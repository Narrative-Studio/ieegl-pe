(function(U,M,V){var Y=M.getElementById("codemirror");var W=CodeMirror.fromTextArea(Y,{lineNumbers:true,mode:"javascript",theme:"monokai"});var Q=M.getElementById("select");var D=Q.options[Q.selectedIndex].textContent;Y=M.getElementById("codemirror-theme");var C=CodeMirror.fromTextArea(Y,{lineNumbers:true,styleActiveLine:true,mode:"javascript",matchBrackets:true});V("#select").change(function(){var a=V(":selected").val();var b=V('[title="theme"]');b.attr("href","../../../app-assets/vendors/css/editors/theme/"+a.toLowerCase()+".css");C.setOption("theme",a)});function X(){var a=Q.options[Q.selectedIndex].textContent;C.setOption("theme",a);location.hash="#"+a}var S=(location.hash&&location.hash.slice(1))||(M.location.search&&decodeURIComponent(M.location.search.slice(1)));if(S){Q.value=S;C.setOption("theme",S)}CodeMirror.on(U,"hashchange",function(){var a=location.hash.slice(1);if(a){Q.value=a;X()}});Y=M.getElementById("codemirror-loadmode");CodeMirror.modeURL="../../../app-assets/vendors/js/editors/codemirror/mode/*/*.js";var N=CodeMirror.fromTextArea(Y,{lineNumbers:true});var R=M.getElementById("mode");CodeMirror.on(R,"keypress",function(a){if(a.keyCode==13){change()}});V("#change").on("click",function(){var c=R.value,b,d,a;if(b=/.+\.([^.]+)$/.exec(c)){var e=CodeMirror.findModeByExtension(b[1]);if(e){d=e.mode;a=e.mime}}else{if(/\//.test(c)){var e=CodeMirror.findModeByMIME(c);if(e){d=e.mode;a=c}}else{d=a=c}}if(d){N.setOption("mode",a);CodeMirror.autoLoadMode(N,d);M.getElementById("modeinfo").textContent=a}else{alert("Could not find a mode corresponding to "+c)}});var K=M.getElementById("codemirror-sublime").value;var i=CodeMirror.keyMap.sublime;for(var L in i){var J=i[L];if(L!="fallthrough"&&J!="..."&&(!/find/.test(J)||/findUnder/.test(J))){K+='	"'+L+'": "'+J+'",\n'}}K+="}\n\n// The implementation of joinLines\n";K+=CodeMirror.commands.joinLines.toString().replace(/^function\s*\(/,"function joinLines(").replace(/\n	/g,"\n")+"\n";Y=M.getElementById("codemirror-sublime");var W=CodeMirror.fromTextArea(Y,{value:K,lineNumbers:true,theme:"monokai",mode:"javascript",keyMap:"sublime",autoCloseBrackets:true,matchBrackets:true,showCursorWhenSelecting:true,theme:"monokai",tabSize:2});Y=M.getElementById("codemirror-js");var Z=M.getElementById("codemirror-html");var O=M.getElementById("codemirror-markdown");U.editor=CodeMirror.fromTextArea(Y,{mode:"javascript",lineNumbers:true,lineWrapping:true,extraKeys:{"Ctrl-Q":function(a){a.foldCode(a.getCursor())}},foldGutter:true,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]});W.foldCode(CodeMirror.Pos(13,0));U.editor_html=CodeMirror.fromTextArea(Z,{mode:"text/html",lineNumbers:true,lineWrapping:true,extraKeys:{"Ctrl-Q":function(a){a.foldCode(a.getCursor())}},foldGutter:true,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]});editor_html.foldCode(CodeMirror.Pos(0,0));editor_html.foldCode(CodeMirror.Pos(21,0));U.editor_markdown=CodeMirror.fromTextArea(O,{mode:"markdown",lineNumbers:true,lineWrapping:true,extraKeys:{"Ctrl-Q":function(a){a.foldCode(a.getCursor())}},foldGutter:true,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]});Y=M.getElementById("codemirror-marker");var W=new CodeMirror.fromTextArea(Y,{lineNumbers:true,styleSelectedText:true,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:true}});W.markText({line:6,ch:26},{line:6,ch:42},{className:"styled-background"});var j;var W=new CodeMirror.fromTextArea(M.getElementById("codemirror-preview"),{mode:"text/html"});W.on("change",function(){clearTimeout(j);j=setTimeout(F,300)});function F(){var a=M.getElementById("preview");var b=a.contentDocument||a.contentWindow.document;b.open();b.write(W.getValue());b.close()}setTimeout(F,300);var G="0123456789",E="          ";var T=["#967ADC","#37BC9B","#F6BB42","#3BAFDA","#DA4453","#3f51b5","#2196F3","#ff9800","#e91e63"];var P=[];K="";for(var H=1;H<=9;H++){P.push({color:T[H],column:H*10,lineStyle:"dashed"});for(var I=1;I<H;I++){K+=E}K+=G+"\n"}Y=M.getElementById("codemirror-ruler");W=new CodeMirror(Y,{rulers:P,value:K+K+K,lineNumbers:true});Y=M.getElementById("codemirror-tabs");W=CodeMirror.fromTextArea(Y,{lineNumbers:true,tabSize:4,indentUnit:4,indentWithTabs:true,mode:"text/html"})})(window,document,jQuery);