/*! jQuery-ui-Slider-Pips - v1.11.3 - 2016-03-15
* Copyright (c) 2016 Simon Goellner <simey.me@gmail.com>; Licensed MIT */
;!function(b){var a={pips:function(C){function B(g){var d,h,f,c,u,m=[],p=0;if(j.values()&&j.values().length){for(f=j.values(),c=b.map(f,function(i){return Math.abs(i-g)}),u=Math.min.apply(Math,c),d=0;d<c.length;d++){c[d]===u&&m.push(d)}for(p=m[0],h=0;h<m.length;h++){j._lastChangedValue===m[h]&&(p=m[h])}j.options.range&&2===m.length&&(g>f[1]?p=m[1]:g<f[0]&&(p=m[0]))}return p}function q(){j.element.off(".selectPip").on("mousedown.slider",j.element.data("mousedown-original")).removeClass("ui-slider-pips").find(".ui-slider-pip").remove()}function k(f,g){if(!j.option("disabled")){var d=b(f).data("value"),c=B(d);j.values()&&j.values().length?j.options.values[c]=j._trimAlignValue(d):j.options.value=j._trimAlignValue(d),j._refreshValue(),j._change(g,c)}}function J(n){var m,O,N,L,c,h=n,g="ui-slider-pip",K="",u=j.value(),M=j.values();if("first"===n?h=0:"last"===n&&(h=D),N=H+j.options.step*h,L=N.toString().replace(".","-"),c=Math.round((h-H)/E.step),m="array"===b.type(E.labels)?E.labels[c]||"":"object"===b.type(E.labels)?"first"===n?E.labels.first||"":"last"===n?E.labels.last||"":"array"===b.type(E.labels.rest)?E.labels.rest[c-1]||"":N:N,"first"===n?(O="0%",g+=" ui-slider-pip-first",g+="label"===E.first?" ui-slider-pip-label":"",g+=E.first===!1?" ui-slider-pip-hide":""):"last"===n?(O="100%",g+=" ui-slider-pip-last",g+="label"===E.last?" ui-slider-pip-label":"",g+=E.last===!1?" ui-slider-pip-hide":""):(O=(100/D*n).toFixed(4)+"%",g+="label"===E.rest?" ui-slider-pip-label":"",g+=E.rest===!1?" ui-slider-pip-hide":""),g+=" ui-slider-pip-"+L,M&&M.length){for(z=0;z<M.length;z++){N===M[z]&&(g+=" ui-slider-pip-initial-"+(z+1),g+=" ui-slider-pip-selected-"+(z+1))}j.options.range&&N>M[0]&&N<M[1]&&(g+=" ui-slider-pip-inrange")}else{N===u&&(g+=" ui-slider-pip-initial",g+=" ui-slider-pip-selected"),j.options.range&&("min"===j.options.range&&u>N||"max"===j.options.range&&N>u)&&(g+=" ui-slider-pip-inrange")}return K="horizontal"===j.options.orientation?"left: "+O:"bottom: "+O,'<span class="'+g+'" style="'+K+'"><span class="ui-slider-line"></span><span class="ui-slider-label" data-value="'+N+'">'+E.formatLabel(m)+"</span></span>"}var z,w,y,x,G,j=this,F="",H=j._valueMin(),e=j._valueMax(),D=(e-H)/j.options.step,A=j.element.find(".ui-slider-handle"),E={first:"label",last:"label",rest:"pip",labels:!1,prefix:"",suffix:"",step:D>100?Math.floor(0.05*D):1,formatLabel:function(c){return this.prefix+c+this.suffix}};if("object"!==b.type(C)&&"undefined"!==b.type(C)){return void ("destroy"===C?q():"refresh"===C&&j.element.slider("pips",j.element.data("pips-options")))}b.extend(E,C),j.element.data("pips-options",E),j.options.pipStep=Math.abs(Math.round(E.step))||1,j.element.off(".selectPip").addClass("ui-slider-pips").find(".ui-slider-pip").remove();var I={single:function(c){this.resetClasses(),G.filter(".ui-slider-pip-"+this.classLabel(c)).addClass("ui-slider-pip-selected"),j.options.range&&G.each(function(d,g){var f=b(g).children(".ui-slider-label").data("value");("min"===j.options.range&&c>f||"max"===j.options.range&&f>c)&&b(g).addClass("ui-slider-pip-inrange")})},range:function(c){for(this.resetClasses(),z=0;z<c.length;z++){G.filter(".ui-slider-pip-"+this.classLabel(c[z])).addClass("ui-slider-pip-selected-"+(z+1))}j.options.range&&G.each(function(d,g){var f=b(g).children(".ui-slider-label").data("value");f>c[0]&&f<c[1]&&b(g).addClass("ui-slider-pip-inrange")})},classLabel:function(c){return c.toString().replace(".","-")},resetClasses:function(){var c=/(^|\s*)(ui-slider-pip-selected|ui-slider-pip-inrange)(-{1,2}\d+|\s|$)/gi;G.removeClass(function(f,d){return(d.match(c)||[]).join(" ")})}};for(F+=J("first"),y=j.options.pipStep;D>y;y+=j.options.pipStep){F+=J(y)}for(F+=J("last"),j.element.append(F),G=j.element.find(".ui-slider-pip"),x=b._data(j.element.get(0),"events").mousedown&&b._data(j.element.get(0),"events").mousedown.length?b._data(j.element.get(0),"events").mousedown:j.element.data("mousedown-handlers"),j.element.data("mousedown-handlers",x.slice()),w=0;w<x.length;w++){"slider"===x[w].namespace&&j.element.data("mousedown-original",x[w].handler)}j.element.off("mousedown.slider").on("mousedown.selectPip",function(d){var f=b(d.target),c=B(f.data("value")),h=A.eq(c);if(h.addClass("ui-state-active"),f.is(".ui-slider-label")){k(f,d),j.element.one("mouseup.selectPip",function(){h.removeClass("ui-state-active").focus()})}else{var g=j.element.data("mousedown-original");g(d)}}),j.element.on("slide.selectPip slidechange.selectPip",function(g,d){var h=b(this),f=h.slider("value"),c=h.slider("values");d&&(f=d.value,c=d.values),j.values()&&j.values().length?I.range(c):I.single(f)})},"float":function(k){function j(){v.element.off(".sliderFloat").removeClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove()}function y(f){var d=[],n=b.map(f,function(i){return Math.ceil((i-h)/v.options.step)});if("array"===b.type(m.labels)){for(x=0;x<f.length;x++){d[x]=m.labels[n[x]]||f[x]}}else{if("object"===b.type(m.labels)){for(x=0;x<f.length;x++){f[x]===h?d[x]=m.labels.first||h:f[x]===c?d[x]=m.labels.last||c:"array"===b.type(m.labels.rest)?d[x]=m.labels.rest[n[x]-1]||f[x]:d[x]=f[x]}}else{for(x=0;x<f.length;x++){d[x]=f[x]}}}return d}var x,v=this,h=v._valueMin(),c=v._valueMax(),g=v._value(),e=v._values(),q=[],w=v.element.find(".ui-slider-handle"),m={handle:!0,pips:!1,labels:!1,prefix:"",suffix:"",event:"slidechange slide",formatLabel:function(d){return this.prefix+d+this.suffix}};if("object"!==b.type(k)&&"undefined"!==b.type(k)){return void ("destroy"===k?j():"refresh"===k&&v.element.slider("float",v.element.data("float-options")))}if(b.extend(m,k),v.element.data("float-options",m),h>g&&(g=h),g>c&&(g=c),e&&e.length){for(x=0;x<e.length;x++){e[x]<h&&(e[x]=h),e[x]>c&&(e[x]=c)}}if(v.element.addClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove(),m.handle){for(q=y(v.values()&&v.values().length?e:[g]),x=0;x<q.length;x++){w.eq(x).append(b('<span class="ui-slider-tip">'+m.formatLabel(q[x])+"</span>"))}}m.pips&&v.element.find(".ui-slider-label").each(function(p,f){var o,d,u=b(f),s=[u.data("value")];o=m.formatLabel(y(s)[0]),d=b('<span class="ui-slider-tip-label">'+o+"</span>").insertAfter(u)}),"slide"!==m.event&&"slidechange"!==m.event&&"slide slidechange"!==m.event&&"slidechange slide"!==m.event&&(m.event="slidechange slide"),v.element.off(".sliderFloat").on(m.event+".sliderFloat",function(o,f){var n="array"===b.type(f.value)?f.value:[f.value],d=m.formatLabel(y(n)[0]);b(f.handle).find(".ui-slider-tip").html(d)})}};b.extend(!0,b.ui.slider.prototype,a)}(jQuery);