/*! Summernote v0.8.1 | (c) 2013-2015 Alan Hong and other contributors | MIT license */
;!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof module&&module.exports?module.exports=b(require("jquery")):b(window.jQuery)}(function(bf){var be,bd=function(){var B=function(b){return function(c){return b===c}},A=function(d,c){return d===c},z=function(b){return function(d,e){return d[b]===e[b]}},y=function(){return !0},x=function(){return !1},w=function(b){return function(){return !b.apply(b,arguments)}},v=function(d,c){return function(b){return d(b)&&c(b)}},u=function(b){return b},t=function(d,c){return function(){return d[c].apply(d,arguments)}},s=0,r=function(d){var c=++s+"";return d?d+c:c},q=function(d){var e=bf(document);return{top:d.top+e.scrollTop(),left:d.left+e.scrollLeft(),width:d.right-d.left,height:d.bottom-d.top}},p=function(e){var d={};for(var f in e){e.hasOwnProperty(f)&&(d[e[f]]=f)}return d},a=function(d,c){return c=c||"",c+d.split(".").map(function(b){return b.substring(0,1).toUpperCase()+b.substring(1)}).join("")};return{eq:B,eq2:A,peq2:z,ok:y,fail:x,self:u,not:w,and:v,invoke:t,uniqueId:r,rect2bnd:q,invertObject:p,namespaceToCamel:a}}(),bc=function(){var F=function(b){return b[0]},E=function(b){return b[b.length-1]},D=function(b){return b.slice(0,b.length-1)},C=function(b){return b.slice(1)},B=function(g,f){for(var j=0,i=g.length;i>j;j++){var h=g[j];if(f(h)){return h}}},A=function(f,e){for(var h=0,g=f.length;g>h;h++){if(!e(f[h])){return !1}}return !0},z=function(d,e){return bf.inArray(e,d)},y=function(e,d){return -1!==z(e,d)},x=function(e,d){return d=d||bd.self,e.reduce(function(b,f){return b+d(f)},0)},w=function(f){for(var e=[],h=-1,g=f.length;++h<g;){e[h]=f[h]}return e},v=function(b){return !b||!b.length},u=function(b,f){if(!b.length){return[]}var d=C(b);return d.reduce(function(h,g){var i=E(h);return f(E(i),g)?i[i.length]=g:h[h.length]=[g],h},[[F(b)]])},t=function(f){for(var e=[],h=0,g=f.length;g>h;h++){f[h]&&e.push(f[h])}return e},s=function(f){for(var e=[],h=0,g=f.length;g>h;h++){y(e,f[h])||e.push(f[h])}return e},c=function(e,d){var f=z(e,d);return -1===f?null:e[f+1]},a=function(e,d){var f=z(e,d);return -1===f?null:e[f-1]};return{head:F,last:E,initial:D,tail:C,prev:a,next:c,find:B,contains:y,all:A,sum:x,from:w,isEmpty:v,clusterBy:u,compact:t,unique:s}}(),bb="function"==typeof define&&define.amd,a9=function(a){var j="Comic Sans MS"===a?"Courier New":"Comic Sans MS",i=bf("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),h=i.css("fontFamily",j).width(),g=i.css("fontFamily",a+","+j).width();return i.remove(),h!==g},a8=navigator.userAgent,a7=/MSIE|Trident/i.test(a8);if(a7){var a6=/MSIE (\d+[.]\d+)/.exec(a8);a6&&(be=parseFloat(a6[1])),a6=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(a8),a6&&(be=parseFloat(a6[1]))}var a5=/Edge\/\d+/.test(a8),a4=!!window.CodeMirror;if(!a4&&bb&&require){if(require.hasOwnProperty("resolve")){try{require.resolve("codemirror"),a4=!0}catch(a3){a4=!1}}else{require.hasOwnProperty("specified")&&(a4=require.specified("codemirror"))}}var a2={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:a7,isEdge:a5,isFF:!a5&&/firefox/i.test(a8),isPhantom:/PhantomJS/i.test(a8),isWebkit:!a5&&/webkit/i.test(a8),isChrome:!a5&&/chrome/i.test(a8),isSafari:!a5&&/safari/i.test(a8),browserVersion:be,jqueryVersion:parseFloat(bf.fn.jquery),isSupportAmd:bb,hasCodeMirror:a4,isFontInstalled:a9,isW3CRangeSupport:!!document.createRange},a1=String.fromCharCode(160),a0="\ufeff",aZ=function(){var bF=function(e){return e&&bf(e).hasClass("note-editable")},bD=function(e){return e&&bf(e).hasClass("note-control-sizing")},bC=function(b){return b=b.toUpperCase(),function(e){return e&&e.nodeName.toUpperCase()===b}},bB=function(b){return b&&3===b.nodeType},bA=function(b){return b&&1===b.nodeType},by=function(b){return b&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(b.nodeName.toUpperCase())},bx=function(b){return bF(b)?!1:b&&/^DIV|^P|^LI|^H[1-7]/.test(b.nodeName.toUpperCase())},bw=function(b){return b&&/^H[1-7]/.test(b.nodeName.toUpperCase())},bv=bC("PRE"),bt=bC("LI"),bs=function(b){return bx(b)&&!bt(b)},br=bC("TABLE"),bq=function(b){return !(bl(b)||bp(b)||bo(b)||bx(b)||br(b)||bm(b))},bp=function(b){return b&&/^UL|^OL/.test(b.nodeName.toUpperCase())},bo=bC("HR"),bn=function(b){return b&&/^TD|^TH/.test(b.nodeName.toUpperCase())},bm=bC("BLOCKQUOTE"),bl=function(b){return bn(b)||bm(b)||bF(b)},bk=bC("A"),cb=function(b){return bq(b)&&!!bZ(b,bx)},b9=function(b){return bq(b)&&!bZ(b,bx)},b8=bC("BODY"),b7=function(f,e){return f.nextSibling===e||f.previousSibling===e},b5=function(f,e){e=e||bd.ok;var g=[];return f.previousSibling&&e(f.previousSibling)&&g.push(f.previousSibling),g.push(f),f.nextSibling&&e(f.nextSibling)&&g.push(f.nextSibling),g},b4=a2.isMSIE&&a2.browserVersion<11?"&nbsp;":"<br>",b3=function(b){return bB(b)?b.nodeValue.length:b.childNodes.length},b2=function(f){var e=b3(f);return 0===e?!0:bB(f)||1!==e||f.innerHTML!==b4?bc.all(f.childNodes,bB)&&""===f.innerHTML?!0:!1:!0},b1=function(b){by(b)||b3(b)||(b.innerHTML=b4)},bZ=function(b,e){for(;b;){if(e(b)){return b}if(bF(b)){break}b=b.parentNode}return null},bY=function(b,e){for(b=b.parentNode;b&&1===b3(b);){if(e(b)){return b}if(bF(b)){break}b=b.parentNode}return null},bX=function(b,g){g=g||bd.fail;var f=[];return bZ(b,function(e){return bF(e)||f.push(e),g(e)}),f},bW=function(f,e){var g=bX(f);return bc.last(g.filter(e))},bV=function(f,i){for(var h=bX(f),g=i;g;g=g.parentNode){if(bf.inArray(g,h)>-1){return g}}return null},bU=function(f,e){e=e||bd.fail;for(var g=[];f&&!e(f);){g.push(f),f=f.previousSibling}return g},bS=function(f,e){e=e||bd.fail;for(var g=[];f&&!e(f);){g.push(f),f=f.nextSibling}return g},bR=function(g,f){var i=[];return f=f||bd.ok,function h(j){g!==j&&f(j)&&i.push(j);for(var e=0,b=j.childNodes.length;b>e;e++){h(j.childNodes[e])}}(g),i},bQ=function(f,i){var h=f.parentNode,g=bf("<"+i+">")[0];return h.insertBefore(g,f),g.appendChild(f),g},bP=function(f,e){var h=e.nextSibling,g=e.parentNode;return h?g.insertBefore(f,h):g.appendChild(f),f},bO=function(e,f){return bf.each(f,function(b,g){e.appendChild(g)}),e},bN=function(b){return 0===b.offset},bM=function(b){return b.offset===b3(b.node)},bL=function(b){return bN(b)||bM(b)},bK=function(f,e){for(;f&&f!==e;){if(0!==bG(f)){return !1}f=f.parentNode}return !0},bJ=function(f,e){for(;f&&f!==e;){if(bG(f)!==b3(f.parentNode)-1){return !1}f=f.parentNode}return !0},bI=function(f,e){return bN(f)&&bK(f.node,e)},cg=function(f,e){return bM(f)&&bJ(f.node,e)},bG=function(f){for(var e=0;f=f.previousSibling;){e+=1}return e},cd=function(b){return !!(b&&b.childNodes&&b.childNodes.length)},bT=function(b,h){var g,f;if(0===b.offset){if(bF(b.node)){return null}g=b.node.parentNode,f=bG(b.node)}else{cd(b.node)?(g=b.node.childNodes[b.offset-1],f=b3(g)):(g=b.node,f=h?0:b.offset-1)}return{node:g,offset:f}},bu=function(b,h){var g,f;if(b3(b.node)===b.offset){if(bF(b.node)){return null}g=b.node.parentNode,f=bG(b.node)+1}else{cd(b.node)?(g=b.node.childNodes[b.offset],f=0):(g=b.node,f=h?b3(b.node):b.offset+1)}return{node:g,offset:f}},o=function(f,e){return f.node===e.node&&f.offset===e.offset},c=function(f){if(bB(f.node)||!cd(f.node)||b2(f.node)){return !0}var e=f.node.childNodes[f.offset-1],g=f.node.childNodes[f.offset];return e&&!by(e)||g&&!by(g)?!1:!0},cj=function(f,e){for(;f;){if(e(f)){return f}f=bT(f)}return null},ce=function(f,e){for(;f;){if(e(f)){return f}f=bu(f)}return null},b0=function(f){if(!bB(f.node)){return !1}var e=f.node.nodeValue.charAt(f.offset-1);return e&&" "!==e&&e!==a1},bz=function(h,g,l,k){for(var j=h;j&&(l(j),!o(j,g));){var i=k&&h.node!==j.node&&g.node!==j.node;j=bu(j,i)}},p=function(f,e){var g=bX(e,bd.eq(f));return g.map(bG).reverse()},d=function(g,f){for(var j=g,i=0,h=f.length;h>i;i++){j=j.childNodes.length<=f[i]?j.childNodes[j.childNodes.length-1]:j.childNodes[f[i]]}return j},ck=function(h,g){var l=g&&g.isSkipPaddingBlankHTML,k=g&&g.isNotSplitEdgePoint;if(bL(h)&&(bB(h.node)||k)){if(bN(h)){return h.node}if(bM(h)){return h.node.nextSibling}}if(bB(h.node)){return h.node.splitText(h.offset)}var j=h.node.childNodes[h.offset],i=bP(h.node.cloneNode(!1),h.node);return bO(i,bS(j)),l||(b1(h.node),b1(i)),i},cf=function(g,f,i){var h=bX(f.node,bd.eq(g));return h.length?1===h.length?ck(f,i):h.reduce(function(b,e){return b===f.node&&(b=ck(f,i)),ck({node:e,offset:b?aZ.position(b):b3(e)},i)}):null},b6=function(k,j){var u,t,s=j?bx:bl,r=bX(k.node,s),q=bc.last(r)||k.node;s(q)?(u=r[r.length-2],t=q):(u=q,t=u.parentNode);var l=u&&cf(u,k,{isSkipPaddingBlankHTML:j,isNotSplitEdgePoint:j});return l||t!==k.node||(l=k.node.childNodes[k.offset]),{rightNode:l,container:t}},bE=function(b){return document.createElement(b)},bi=function(b){return document.createTextNode(b)},m=function(h,g){if(h&&h.parentNode){if(h.removeNode){return h.removeNode(g)}var l=h.parentNode;if(!g){var k,j,i=[];for(k=0,j=h.childNodes.length;j>k;k++){i.push(h.childNodes[k])}for(k=0,j=i.length;j>k;k++){l.insertBefore(i[k],h)}}l.removeChild(h)}},cl=function(b,f){for(;b&&!bF(b)&&f(b);){var e=b.parentNode;m(b),b=e}},ch=function(f,e){if(f.nodeName.toUpperCase()===e.toUpperCase()){return f}var g=bE(e);return f.style.cssText&&(g.style.cssText=f.style.cssText),bO(g,bc.from(f.childNodes)),bP(g,f),m(f),g},cc=bC("TEXTAREA"),bH=function(f,e){var g=cc(f[0])?f.val():f.html();return e?g.replace(/[\n\r]/g,""):g},bj=function(f,i){var h=bH(f);if(i){var g=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;h=h.replace(g,function(k,j,r){r=r.toUpperCase();var q=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(r)&&!!j,l=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(r);return k+(q||l?"\n":"")}),h=bf.trim(h)}return h},n=function(f){var i=bf(f),h=i.offset(),g=i.outerHeight(!0);return{left:h.left,top:h.top+g}},a=function(f,e){Object.keys(e).forEach(function(b){f.on(b,e[b])})},ci=function(f,e){Object.keys(e).forEach(function(b){f.off(b,e[b])})};return{NBSP_CHAR:a1,ZERO_WIDTH_NBSP_CHAR:a0,blank:b4,emptyPara:"<p>"+b4+"</p>",makePredByNodeName:bC,isEditable:bF,isControlSizing:bD,isText:bB,isElement:bA,isVoid:by,isPara:bx,isPurePara:bs,isHeading:bw,isInline:bq,isBlock:bd.not(bq),isBodyInline:b9,isBody:b8,isParaInline:cb,isPre:bv,isList:bp,isTable:br,isCell:bn,isBlockquote:bm,isBodyContainer:bl,isAnchor:bk,isDiv:bC("DIV"),isLi:bt,isBR:bC("BR"),isSpan:bC("SPAN"),isB:bC("B"),isU:bC("U"),isS:bC("S"),isI:bC("I"),isImg:bC("IMG"),isTextarea:cc,isEmpty:b2,isEmptyAnchor:bd.and(bk,b2),isClosestSibling:b7,withClosestSiblings:b5,nodeLength:b3,isLeftEdgePoint:bN,isRightEdgePoint:bM,isEdgePoint:bL,isLeftEdgeOf:bK,isRightEdgeOf:bJ,isLeftEdgePointOf:bI,isRightEdgePointOf:cg,prevPoint:bT,nextPoint:bu,isSamePoint:o,isVisiblePoint:c,prevPointUntil:cj,nextPointUntil:ce,isCharPoint:b0,walkPoint:bz,ancestor:bZ,singleChildAncestor:bY,listAncestor:bX,lastAncestor:bW,listNext:bS,listPrev:bU,listDescendant:bR,commonAncestor:bV,wrap:bQ,insertAfter:bP,appendChildNodes:bO,position:bG,hasChildren:cd,makeOffsetPath:p,fromOffsetPath:d,splitTree:cf,splitPoint:b6,create:bE,createText:bi,remove:m,removeWhile:cl,replace:ch,html:bj,value:bH,posFromPlaceholder:n,attachEvents:a,detachEvents:ci}}(),aY=function(a,h){var d=this,c=bf.summernote.ui;return this.memos={},this.modules={},this.layoutInfo={},this.options=h,this.initialize=function(){return this.layoutInfo=c.createLayout(a,h),this._initialize(),a.hide(),this},this.destroy=function(){this._destroy(),a.removeData("summernote"),c.removeLayout(a,this.layoutInfo)},this.reset=function(){var b=d.isDisabled();this.code(aZ.emptyPara),this._destroy(),this._initialize(),b&&d.disable()},this._initialize=function(){var e=bf.extend({},this.options.buttons);Object.keys(e).forEach(function(b){d.memo("button."+b,e[b])});var f=bf.extend({},this.options.modules,bf.summernote.plugins||{});Object.keys(f).forEach(function(b){d.module(b,f[b],!0)}),Object.keys(this.modules).forEach(function(b){d.initializeModule(b)})},this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(b){d.removeModule(b)}),Object.keys(this.memos).forEach(function(b){d.removeMemo(b)})},this.code=function(b){var e=this.invoke("codeview.isActivated");return void 0===b?(this.invoke("codeview.sync"),e?this.layoutInfo.codable.val():this.layoutInfo.editable.html()):(e?this.layoutInfo.codable.val(b):this.layoutInfo.editable.html(b),a.val(b),this.triggerEvent("change",b),void 0)},this.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},this.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0)},this.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0)},this.triggerEvent=function(){var b=bc.head(arguments),i=bc.tail(bc.from(arguments)),g=this.options.callbacks[bd.namespaceToCamel(b,"on")];g&&g.apply(a[0],i),a.trigger("summernote."+b,i)},this.initializeModule=function(b){var e=this.modules[b];e.shouldInitialize=e.shouldInitialize||bd.ok,e.shouldInitialize()&&(e.initialize&&e.initialize(),e.events&&aZ.attachEvents(a,e.events))},this.module=function(f,e,g){return 1===arguments.length?this.modules[f]:(this.modules[f]=new e(this),void (g||this.initializeModule(f)))},this.removeModule=function(b){var e=this.modules[b];e.shouldInitialize()&&(e.events&&aZ.detachEvents(a,e.events),e.destroy&&e.destroy()),delete this.modules[b]},this.memo=function(f,e){return 1===arguments.length?this.memos[f]:void (this.memos[f]=e)},this.removeMemo=function(b){this.memos[b]&&this.memos[b].destroy&&this.memos[b].destroy(),delete this.memos[b]},this.createInvokeHandler=function(e,f){return function(b){b.preventDefault(),d.invoke(e,f||bf(b.target).closest("[data-value]").data("value"))}},this.invoke=function(){var j=bc.head(arguments),i=bc.tail(bc.from(arguments)),o=j.split("."),n=o.length>1,m=n&&bc.head(o),l=n?bc.last(o):bc.head(o),k=this.modules[m||"editor"];return !m&&this[l]?this[l].apply(this,i):k&&k[l]&&k.shouldInitialize()?k[l].apply(k,i):void 0},this.initialize()};bf.fn.extend({summernote:function(){var a=bf.type(bc.head(arguments)),l="string"===a,k="object"===a,j=k?bc.head(arguments):{};j=bf.extend({},bf.summernote.options,j),j.langInfo=bf.extend(!0,{},bf.summernote.lang["en-US"],bf.summernote.lang[j.lang]),this.each(function(f,m){var h=bf(m);if(!h.data("summernote")){var g=new aY(h,j);h.data("summernote",g),h.data("summernote").triggerEvent("init",g.layoutInfo)}});var i=this.first();if(i.length){var d=i.data("summernote");if(l){return d.invoke.apply(d,bc.from(arguments))}j.focus&&d.invoke("editor.focus")}return this}});var aX=function(a,h,g,f){this.render=function(d){var c=bf(a);if(g&&g.contents&&c.html(g.contents),g&&g.className&&c.addClass(g.className),g&&g.data&&bf.each(g.data,function(i,e){c.attr("data-"+i,e)}),g&&g.click&&c.on("click",g.click),h){var b=c.find(".note-children-container");h.forEach(function(e){e.render(b.length?b:c)})}return f&&f(c,g),g&&g.callback&&g.callback(c),d&&d.append(c),c}},aW={create:function(a,d){return function(){var c=bf.isArray(arguments[0])?arguments[0]:[],b="object"==typeof arguments[1]?arguments[1]:arguments[0];return b&&b.children&&(c=b.children),new aX(a,c,b,d)}}},aV=aW.create('<div class="note-editor note-frame panel panel-default"/>'),aU=aW.create('<div class="note-toolbar panel-heading"/>'),aT=aW.create('<div class="note-editing-area"/>'),aS=aW.create('<textarea class="note-codable"/>'),aR=aW.create('<div class="note-editable panel-body" contentEditable="true"/>'),aP=aW.create(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),aO=aW.create('<div class="note-editor"/>'),aE=aW.create('<div class="note-editable" contentEditable="true"/>'),aD=aW.create('<div class="note-btn-group btn-group">'),aC=aW.create('<button type="button" class="note-btn btn btn-default btn-sm">',function(d,c){c&&c.tooltip&&d.attr({title:c.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}),aB=aW.create('<div class="dropdown-menu">',function(a,f){var e=bf.isArray(f.items)?f.items.map(function(g){var c="string"==typeof g?g:g.value||"",h=f.template?f.template(g):g;return'<li><a href="#" data-value="'+c+'">'+h+"</a></li>"}).join(""):f.items;a.html(e)}),aA=aW.create('<div class="dropdown-menu note-check">',function(a,f){var e=bf.isArray(f.items)?f.items.map(function(g){var c="string"==typeof g?g:g.value||"",h=f.template?f.template(g):g;return'<li><a href="#" data-value="'+c+'">'+aw(f.checkClassName)+" "+h+"</a></li>"}).join(""):f.items;a.html(e)}),az=aW.create('<div class="note-color-palette"/>',function(v,u){for(var t=[],s=0,r=u.colors.length;r>s;s++){for(var q=u.eventName,p=u.colors[s],o=[],n=0,m=p.length;m>n;n++){var l=p[n];o.push(['<button type="button" class="note-color-btn"','style="background-color:',l,'" ','data-event="',q,'" ','data-value="',l,'" ','title="',l,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}t.push('<div class="note-color-row">'+o.join("")+"</div>")}v.html(t.join("")),v.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})}),ay=aW.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function(d,c){c.fade&&d.addClass("fade"),d.html(['<div class="modal-dialog">','  <div class="modal-content">',c.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>      <h4 class="modal-title">'+c.title+"</h4>    </div>":"",'    <div class="modal-body">'+c.body+"</div>",c.footer?'    <div class="modal-footer">'+c.footer+"</div>":"","  </div>","</div>"].join(""))}),ax=aW.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(e,d){var f="undefined"!=typeof d.direction?d.direction:"bottom";e.addClass(f),d.hideArrow&&e.find(".arrow").hide()}),aw=function(d,c){return c=c||"i","<"+c+' class="'+d+'"/>'},av={editor:aV,toolbar:aU,editingArea:aT,codable:aS,editable:aR,statusbar:aP,airEditor:aO,airEditable:aE,buttonGroup:aD,button:aC,dropdown:aB,dropdownCheck:aA,palette:az,dialog:ay,popover:ax,icon:aw,toggleBtn:function(d,c){d.toggleClass("disabled",!c),d.attr("disabled",!c)},toggleBtnActive:function(d,c){d.toggleClass("active",c)},onDialogShown:function(d,c){d.one("shown.bs.modal",c)},onDialogHidden:function(d,c){d.one("hidden.bs.modal",c)},showDialog:function(b){b.modal("show")},hideDialog:function(b){b.modal("hide")},createLayout:function(e,d){var f=(d.airMode?av.airEditor([av.editingArea([av.airEditable()])]):av.editor([av.toolbar(),av.editingArea([av.codable(),av.editable()]),av.statusbar()])).render();return f.insertAfter(e),{note:e,editor:f,toolbar:f.find(".note-toolbar"),editingArea:f.find(".note-editing-area"),editable:f.find(".note-editable"),codable:f.find(".note-codable"),statusbar:f.find(".note-statusbar")}},removeLayout:function(d,c){d.html(c.editable.html()),c.editor.remove(),d.show()}};bf.summernote=bf.summernote||{lang:{}},bf.extend(bf.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var au,at=function(){var b={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(a){return bc.contains([b.BACKSPACE,b.TAB,b.ENTER,b.SPACE],a)},isMove:function(a){return bc.contains([b.LEFT,b.UP,b.RIGHT,b.DOWN],a)},nameFromCode:bd.invertObject(b),code:b}}(),ar=function(){var a=function(w,v){var u,t,s=w.parentElement(),r=document.body.createTextRange(),q=bc.from(s.childNodes);for(u=0;u<q.length;u++){if(!aZ.isText(q[u])){if(r.moveToElementText(q[u]),r.compareEndPoints("StartToStart",w)>=0){break}t=q[u]}}if(0!==u&&aZ.isText(q[u-1])){var p=document.body.createTextRange(),o=null;p.moveToElementText(t||s),p.collapse(!t),o=t?t.nextSibling:s.firstChild;var n=w.duplicate();n.setEndPoint("StartToStart",p);for(var m=n.text.replace(/[\r\n]/g,"").length;m>o.nodeValue.length&&o.nextSibling;){m-=o.nodeValue.length,o=o.nextSibling}o.nodeValue;v&&o.nextSibling&&aZ.isText(o.nextSibling)&&m===o.nodeValue.length&&(m-=o.nodeValue.length,o=o.nextSibling),s=o,u=m}return{cont:s,offset:u}},d=function(h){var g=function(b,o){var n,m;if(aZ.isText(b)){var l=aZ.listPrev(b,bd.not(aZ.isText)),k=bc.last(l).previousSibling;n=k||b.parentNode,o+=bc.sum(bc.tail(l),aZ.nodeLength),m=!k}else{if(n=b.childNodes[o]||b,aZ.isText(n)){return g(n,0)}o=0,m=!1}return{node:n,collapseToStart:m,offset:o}},j=document.body.createTextRange(),i=g(h.node,h.offset);return j.moveToElementText(i.node),j.collapse(i.collapseToStart),j.moveStart("character",i.offset),j},c=function(e,o,n,m){this.sc=e,this.so=o,this.ec=n,this.eo=m;var l=function(){if(a2.isW3CRangeSupport){var b=document.createRange();return b.setStart(e,o),b.setEnd(n,m),b}var g=d({node:e,offset:o});return g.setEndPoint("EndToEnd",d({node:n,offset:m})),g};this.getPoints=function(){return{sc:e,so:o,ec:n,eo:m}},this.getStartPoint=function(){return{node:e,offset:o}},this.getEndPoint=function(){return{node:n,offset:m}},this.select=function(){var h=l();if(a2.isW3CRangeSupport){var g=document.getSelection();g.rangeCount>0&&g.removeAllRanges(),g.addRange(h)}else{h.select()}return this},this.scrollIntoView=function(g){var h=bf(g).height();return g.scrollTop+h<this.sc.offsetTop&&(g.scrollTop+=Math.abs(g.scrollTop+h-this.sc.offsetTop)),this},this.normalize=function(){var h=function(k,j){if(aZ.isVisiblePoint(k)&&!aZ.isEdgePoint(k)||aZ.isVisiblePoint(k)&&aZ.isRightEdgePoint(k)&&!j||aZ.isVisiblePoint(k)&&aZ.isLeftEdgePoint(k)&&j||aZ.isVisiblePoint(k)&&aZ.isBlock(k.node)&&aZ.isEmpty(k.node)){return k}var q=aZ.ancestor(k.node,aZ.isBlock);if((aZ.isLeftEdgePointOf(k,q)||aZ.isVoid(aZ.prevPoint(k).node))&&!j||(aZ.isRightEdgePointOf(k,q)||aZ.isVoid(aZ.nextPoint(k).node))&&j){if(aZ.isVisiblePoint(k)){return k}j=!j}var p=j?aZ.nextPointUntil(aZ.nextPoint(k),aZ.isVisiblePoint):aZ.prevPointUntil(aZ.prevPoint(k),aZ.isVisiblePoint);return p||k},g=h(this.getEndPoint(),!1),i=this.isCollapsed()?g:h(this.getStartPoint(),!0);return new c(i.node,i.offset,g.node,g.offset)},this.nodes=function(p,k){p=p||bd.ok;var v=k&&k.includeAncestor,u=k&&k.fullyContains,t=this.getStartPoint(),s=this.getEndPoint(),r=[],q=[];return aZ.walkPoint(t,s,function(g){if(!aZ.isEditable(g.node)){var h;u?(aZ.isLeftEdgePoint(g)&&q.push(g.node),aZ.isRightEdgePoint(g)&&bc.contains(q,g.node)&&(h=g.node)):h=v?aZ.ancestor(g.node,p):g.node,h&&p(h)&&r.push(h)}},!0),bc.unique(r)},this.commonAncestor=function(){return aZ.commonAncestor(e,n)},this.expand=function(b){var i=aZ.ancestor(e,b),h=aZ.ancestor(n,b);if(!i&&!h){return new c(e,o,n,m)}var g=this.getPoints();return i&&(g.sc=i,g.so=0),h&&(g.ec=h,g.eo=aZ.nodeLength(h)),new c(g.sc,g.so,g.ec,g.eo)},this.collapse=function(b){return b?new c(e,o,e,o):new c(n,m,n,m)},this.splitText=function(){var b=e===n,g=this.getPoints();return aZ.isText(n)&&!aZ.isEdgePoint(this.getEndPoint())&&n.splitText(m),aZ.isText(e)&&!aZ.isEdgePoint(this.getStartPoint())&&(g.sc=e.splitText(o),g.so=0,b&&(g.ec=g.sc,g.eo=m-o)),new c(g.sc,g.so,g.ec,g.eo)},this.deleteContents=function(){if(this.isCollapsed()){return this}var h=this.splitText(),k=h.nodes(null,{fullyContains:!0}),j=aZ.prevPointUntil(h.getStartPoint(),function(b){return !bc.contains(k,b.node)}),i=[];return bf.each(k,function(p,g){var q=g.parentNode;j.node!==q&&1===aZ.nodeLength(q)&&i.push(q),aZ.remove(g,!1)}),bf.each(i,function(p,g){aZ.remove(g,!1)}),new c(j.node,j.offset,j.node,j.offset).normalize()};var f=function(b){return function(){var g=aZ.ancestor(e,b);return !!g&&g===aZ.ancestor(n,b)}};this.isOnEditable=f(aZ.isEditable),this.isOnList=f(aZ.isList),this.isOnAnchor=f(aZ.isAnchor),this.isOnCell=f(aZ.isCell),this.isLeftEdgeOf=function(h){if(!aZ.isLeftEdgePoint(this.getStartPoint())){return !1}var g=aZ.ancestor(this.sc,h);return g&&aZ.isLeftEdgeOf(this.sc,g)},this.isCollapsed=function(){return e===n&&o===m},this.wrapBodyInlineWithPara=function(){if(aZ.isBodyContainer(e)&&aZ.isEmpty(e)){return e.innerHTML=aZ.emptyPara,new c(e.firstChild,0,e.firstChild,0)}var b=this.normalize();if(aZ.isParaInline(e)||aZ.isPara(e)){return b}var q;if(aZ.isInline(b.sc)){var p=aZ.listAncestor(b.sc,bd.not(aZ.isInline));q=bc.last(p),aZ.isInline(q)||(q=p[p.length-2]||b.sc.childNodes[b.so])}else{q=b.sc.childNodes[b.so>0?b.so-1:0]}var k=aZ.listPrev(q,aZ.isParaInline).reverse();if(k=k.concat(aZ.listNext(q.nextSibling,aZ.isParaInline)),k.length){var j=aZ.wrap(bc.head(k),"p");aZ.appendChildNodes(j,bc.tail(k))}return this.normalize()},this.insertNode=function(h){var g=this.wrapBodyInlineWithPara().deleteContents(),i=aZ.splitPoint(g.getStartPoint(),aZ.isInline(h));return i.rightNode?i.rightNode.parentNode.insertBefore(h,i.rightNode):i.container.appendChild(h),h},this.pasteHTML=function(g){var j=bf("<div></div>").html(g)[0],i=bc.from(j.childNodes),h=this.wrapBodyInlineWithPara().deleteContents();return i.reverse().map(function(b){return h.insertNode(b)}).reverse()},this.toString=function(){var b=l();return a2.isW3CRangeSupport?b.toString():b.text},this.getWordRange=function(h){var g=this.getEndPoint();if(!aZ.isCharPoint(g)){return this}var i=aZ.prevPointUntil(g,function(b){return !aZ.isCharPoint(b)});return h&&(g=aZ.nextPointUntil(g,function(b){return !aZ.isCharPoint(b)})),new c(i.node,i.offset,g.node,g.offset)},this.bookmark=function(b){return{s:{path:aZ.makeOffsetPath(b,e),offset:o},e:{path:aZ.makeOffsetPath(b,n),offset:m}}},this.paraBookmark=function(b){return{s:{path:bc.tail(aZ.makeOffsetPath(bc.head(b),e)),offset:o},e:{path:bc.tail(aZ.makeOffsetPath(bc.last(b),n)),offset:m}}},this.getClientRects=function(){var b=l();return b.getClientRects()}};return{create:function(g,f,j,i){if(4===arguments.length){return new c(g,f,j,i)}if(2===arguments.length){return j=g,i=f,new c(g,f,j,i)}var h=this.createFromSelection();return h||1!==arguments.length?h:(h=this.createFromNode(arguments[0]),h.collapse(aZ.emptyPara===arguments[0].innerHTML))},createFromSelection:function(){var v,u,t,s;if(a2.isW3CRangeSupport){var r=document.getSelection();if(!r||0===r.rangeCount){return null}if(aZ.isBody(r.anchorNode)){return null}var q=r.getRangeAt(0);v=q.startContainer,u=q.startOffset,t=q.endContainer,s=q.endOffset}else{var p=document.selection.createRange(),o=p.duplicate();o.collapse(!1);var m=p;m.collapse(!0);var f=a(m,!0),b=a(o,!1);aZ.isText(f.node)&&aZ.isLeftEdgePoint(f)&&aZ.isTextNode(b.node)&&aZ.isRightEdgePoint(b)&&b.node.nextSibling===f.node&&(f=b),v=f.cont,u=f.offset,t=b.cont,s=b.offset}return new c(v,u,t,s)},createFromNode:function(g){var f=g,j=0,i=g,h=aZ.nodeLength(i);return aZ.isVoid(f)&&(j=aZ.listPrev(f).length-1,f=f.parentNode),aZ.isBR(i)?(h=aZ.listPrev(i).length-1,i=i.parentNode):aZ.isVoid(i)&&(h=aZ.listPrev(i).length,i=i.parentNode),this.create(f,j,i,h)},createFromNodeBefore:function(b){return this.createFromNode(b).collapse(!0)},createFromNodeAfter:function(b){return this.createFromNode(b).collapse()},createFromBookmark:function(h,f){var l=aZ.fromOffsetPath(h,f.s.path),k=f.s.offset,j=aZ.fromOffsetPath(h,f.e.path),i=f.e.offset;return new c(l,k,j,i)},createFromParaBookmark:function(i,f){var m=i.s.offset,l=i.e.offset,k=aZ.fromOffsetPath(bc.head(f),i.s.path),j=aZ.fromOffsetPath(bc.last(f),i.e.path);return new c(k,m,j,l)}}}(),aq=function(){var a=function(c){return bf.Deferred(function(b){bf.extend(new FileReader,{onload:function(f){var e=f.target.result;b.resolve(e)},onerror:function(){b.reject(this)}}).readAsDataURL(c)}).promise()},d=function(c){return bf.Deferred(function(e){var b=bf("<img>");b.one("load",function(){b.off("error abort"),e.resolve(b)}).one("error abort",function(){b.off("load").detach(),e.reject(b)}).css({display:"none"}).appendTo(document.body).attr("src",c)}).promise()};return{readFileAsDataURL:a,createImage:d}}(),ap=function(h){var g=[],l=-1,k=h[0],j=function(){var a=ar.create(k),d={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:h.html(),bookmark:a?a.bookmark(k):d}},i=function(a){null!==a.contents&&h.html(a.contents),null!==a.bookmark&&ar.createFromBookmark(k,a.bookmark).select()};this.rewind=function(){h.html()!==g[l].contents&&this.recordUndo(),l=0,i(g[l])},this.reset=function(){g=[],l=-1,h.html(""),this.recordUndo()},this.undo=function(){h.html()!==g[l].contents&&this.recordUndo(),l>0&&(l--,i(g[l]))},this.redo=function(){g.length-1>l&&(l++,i(g[l]))},this.recordUndo=function(){l++,g.length>l&&(g=g.slice(0,l)),g.push(j())}},ao=function(){var a=function(e,g){if(a2.jqueryVersion<1.9){var f={};return bf.each(g,function(b,d){f[d]=e.css(d)}),f}return e.css.call(e,g)};this.fromNode=function(b){var f=["font-family","font-size","text-align","list-style-type","line-height"],e=a(b,f)||{};return e["font-size"]=parseInt(e["font-size"],10),e},this.stylePara=function(d,e){bf.each(d.nodes(aZ.isPara,{includeAncestor:!0}),function(c,f){bf(f).css(e)})},this.styleNodes=function(c,q){c=c.splitText();var p=q&&q.nodeName||"SPAN",o=!(!q||!q.expandClosestSibling),n=!(!q||!q.onlyPartialContains);if(c.isCollapsed()){return[c.insertNode(aZ.create(p))]}var m=aZ.makePredByNodeName(p),l=c.nodes(aZ.isText,{fullyContains:!0}).map(function(b){return aZ.singleChildAncestor(b,m)||aZ.wrap(b,p)});if(o){if(n){var d=c.nodes();m=bd.and(m,function(b){return bc.contains(d,b)})}return l.map(function(g){var j=aZ.withClosestSiblings(g,m),i=bc.head(j),h=bc.tail(j);return bf.each(h,function(f,e){aZ.appendChildNodes(i,e.childNodes),aZ.remove(e)}),bc.head(j)})}return l},this.current=function(j){var q=bf(aZ.isElement(j.sc)?j.sc:j.sc.parentNode),p=this.fromNode(q);try{p=bf.extend(p,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal"})}catch(o){}if(j.isOnList()){var n=["circle","disc","disc-leading-zero","square"],m=bf.inArray(p["list-style-type"],n)>-1;p["list-style"]=m?"unordered":"ordered"}else{p["list-style"]="none"}var l=aZ.ancestor(j.sc,aZ.isPara);if(l&&l.style["line-height"]){p["line-height"]=l.style.lineHeight}else{var k=parseInt(p["line-height"],10)/parseInt(p["font-size"],10);p["line-height"]=k.toFixed(1)}return p.anchor=j.isOnAnchor()&&aZ.ancestor(j.sc,aZ.isAnchor),p.ancestors=aZ.listAncestor(j.sc,aZ.isEditable),p.range=j,p}},an=function(){var a=this;this.insertOrderedList=function(b){this.toggleList("OL",b)},this.insertUnorderedList=function(b){this.toggleList("UL",b)},this.indent=function(c){var k=this,j=ar.create(c).wrapBodyInlineWithPara(),i=j.nodes(aZ.isPara,{includeAncestor:!0}),d=bc.clusterBy(i,bd.peq2("parentNode"));bf.each(d,function(e,h){var g=bc.head(h);aZ.isLi(g)?k.wrapList(h,g.parentNode.nodeName):bf.each(h,function(f,l){bf(l).css("marginLeft",function(n,m){return(parseInt(m,10)||0)+25})})}),j.select()},this.outdent=function(c){var k=this,j=ar.create(c).wrapBodyInlineWithPara(),i=j.nodes(aZ.isPara,{includeAncestor:!0}),d=bc.clusterBy(i,bd.peq2("parentNode"));bf.each(d,function(e,h){var g=bc.head(h);aZ.isLi(g)?k.releaseList([h]):bf.each(h,function(f,l){bf(l).css("marginLeft",function(n,m){return m=parseInt(m,10)||0,m>25?m-25:""})})}),j.select()},this.toggleList=function(q,p){var o=ar.create(p).wrapBodyInlineWithPara(),n=o.nodes(aZ.isPara,{includeAncestor:!0}),m=o.paraBookmark(n),d=bc.clusterBy(n,bd.peq2("parentNode"));if(bc.find(n,aZ.isPurePara)){var c=[];bf.each(d,function(e,f){c=c.concat(a.wrapList(f,q))}),n=c}else{var b=o.nodes(aZ.isList,{includeAncestor:!0}).filter(function(e){return !bf.nodeName(e,q)});b.length?bf.each(b,function(f,e){aZ.replace(e,q)}):n=this.releaseList(d,!0)}ar.createFromParaBookmark(m,n).select()},this.wrapList=function(i,d){var n=bc.head(i),m=bc.last(i),l=aZ.isList(n.previousSibling)&&n.previousSibling,k=aZ.isList(m.nextSibling)&&m.nextSibling,j=l||aZ.insertAfter(aZ.create(d||"UL"),m);return i=i.map(function(b){return aZ.isPurePara(b)?aZ.replace(b,"LI"):b}),aZ.appendChildNodes(j,i),k&&(aZ.appendChildNodes(j,bc.from(k.childNodes)),aZ.remove(k)),i},this.releaseList=function(d,g){var f=[];return bf.each(d,function(c,r){var q=bc.head(r),p=bc.last(r),o=g?aZ.lastAncestor(q,aZ.isList):q.parentNode,n=o.childNodes.length>1?aZ.splitTree(o,{node:p.parentNode,offset:aZ.position(p)+1},{isSkipPaddingBlankHTML:!0}):null,m=aZ.splitTree(o,{node:q.parentNode,offset:aZ.position(q)},{isSkipPaddingBlankHTML:!0});r=g?aZ.listDescendant(m,aZ.isLi):bc.from(m.childNodes).filter(aZ.isLi),(g||!aZ.isList(o.parentNode))&&(r=r.map(function(b){return aZ.replace(b,"P")})),bf.each(bc.from(r).reverse(),function(i,h){aZ.insertAfter(h,o)});var e=bc.compact([o,m,n]);bf.each(e,function(h,j){var i=[j].concat(aZ.listDescendant(j,aZ.isList));bf.each(i.reverse(),function(l,k){aZ.nodeLength(k)||aZ.remove(k,!0)})}),f=f.concat(r)}),f}},am=function(){var a=new an;this.insertTab=function(e,d){var f=aZ.createText(new Array(d+1).join(aZ.NBSP_CHAR));e=e.deleteContents(),e.insertNode(f,!0),e=ar.create(f,d),e.select()},this.insertParagraph=function(m){var l=ar.create(m);l=l.deleteContents(),l=l.wrapBodyInlineWithPara();var k,j=aZ.ancestor(l.sc,aZ.isPara);if(j){if(aZ.isEmpty(j)&&aZ.isLi(j)){return void a.toggleList(j.parentNode.nodeName)}if(aZ.isEmpty(j)&&aZ.isPara(j)&&aZ.isBlockquote(j.parentNode)){aZ.insertAfter(j,j.parentNode),k=j}else{k=aZ.splitTree(j,l.getStartPoint());var i=aZ.listDescendant(j,aZ.isEmptyAnchor);i=i.concat(aZ.listDescendant(k,aZ.isEmptyAnchor)),bf.each(i,function(d,c){aZ.remove(c)}),(aZ.isHeading(k)||aZ.isPre(k))&&aZ.isEmpty(k)&&(k=aZ.replace(k,"p"))}}else{var b=l.sc.childNodes[l.so];k=bf(aZ.emptyPara)[0],b?l.sc.insertBefore(k,b):l.sc.appendChild(k)}ar.create(k,0).normalize().select().scrollIntoView(m)}},al=function(){this.tab=function(h,d){var l=aZ.ancestor(h.commonAncestor(),aZ.isCell),k=aZ.ancestor(l,aZ.isTable),j=aZ.listDescendant(k,aZ.isCell),i=bc[d?"prev":"next"](j,l);i&&ar.create(i,0).select()},this.createTable=function(t,s,r){for(var q,p=[],o=0;t>o;o++){p.push("<td>"+aZ.blank+"</td>")}q=p.join("");for(var n,m=[],l=0;s>l;l++){m.push("<tr>"+q+"</tr>")}n=m.join("");var a=bf("<table>"+n+"</table>");return r&&r.tableClassName&&a.addClass(r.tableClassName),a[0]}},ak="bogus",aj=function(L){var K=this,J=L.layoutInfo.note,I=L.layoutInfo.editor,H=L.layoutInfo.editable,G=L.options,F=G.langInfo,E=H[0],D=null,C=new ao,B=new al,A=new am,z=new an,y=new ap(H);this.initialize=function(){H.on("keydown",function(c){c.keyCode===at.code.ENTER&&L.triggerEvent("enter",c),L.triggerEvent("keydown",c),G.shortcuts&&!c.isDefaultPrevented()&&K.handleKeyMap(c)}).on("keyup",function(c){L.triggerEvent("keyup",c)}).on("focus",function(c){L.triggerEvent("focus",c)}).on("blur",function(c){L.triggerEvent("blur",c)}).on("mousedown",function(c){L.triggerEvent("mousedown",c)}).on("mouseup",function(c){L.triggerEvent("mouseup",c)}).on("scroll",function(c){L.triggerEvent("scroll",c)}).on("paste",function(c){L.triggerEvent("paste",c)}),H.html(aZ.html(J)||aZ.emptyPara);var b=a2.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";H.on(b,function(){L.triggerEvent("change",H.html())}),I.on("focusin",function(c){L.triggerEvent("focusin",c)}).on("focusout",function(c){L.triggerEvent("focusout",c)}),!G.airMode&&G.height&&this.setHeight(G.height),!G.airMode&&G.maxHeight&&H.css("max-height",G.maxHeight),!G.airMode&&G.minHeight&&H.css("min-height",G.minHeight),y.recordUndo()},this.destroy=function(){H.off()},this.handleKeyMap=function(b){var j=G.keyMap[a2.isMac?"mac":"pc"],i=[];b.metaKey&&i.push("CMD"),b.ctrlKey&&!b.altKey&&i.push("CTRL"),b.shiftKey&&i.push("SHIFT");var h=at.nameFromCode[b.keyCode];h&&i.push(h);var g=j[i.join("+")];g?(b.preventDefault(),L.invoke(g)):at.isEdit(b.keyCode)&&this.afterCommand()},this.createRange=function(){return this.focus(),ar.create(E)},this.saveRange=function(b){D=this.createRange(),b&&D.collapse().select()},this.restoreRange=function(){D&&(D.select(),this.focus())},this.saveTarget=function(b){H.data("target",b)},this.clearTarget=function(){H.removeData("target")},this.restoreTarget=function(){return H.data("target")},this.currentStyle=function(){var b=ar.create();return b&&(b=b.normalize()),b?C.current(b):C.fromNode(H)},this.styleFromNode=function(b){return C.fromNode(b)},this.undo=function(){L.triggerEvent("before.command",H.html()),y.undo(),L.triggerEvent("change",H.html())},L.memo("help.undo",F.help.undo),this.redo=function(){L.triggerEvent("before.command",H.html()),y.redo(),L.triggerEvent("change",H.html())},L.memo("help.redo",F.help.redo);for(var x=this.beforeCommand=function(){L.triggerEvent("before.command",H.html()),K.focus()},p=this.afterCommand=function(b){y.recordUndo(),b||L.triggerEvent("change",H.html())},m=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"],d=0,a=m.length;a>d;d++){this[m[d]]=function(b){return function(c){x(),document.execCommand(b,!1,c),p(!0)}}(m[d]),L.memo("help."+m[d],F.help[m[d]])}this.tab=function(){var b=this.createRange();b.isCollapsed()&&b.isOnCell()?B.tab(b):(x(),A.insertTab(b,G.tabSize),p())},L.memo("help.tab",F.help.tab),this.untab=function(){var b=this.createRange();b.isCollapsed()&&b.isOnCell()&&B.tab(b,!0)},L.memo("help.untab",F.help.untab),this.wrapCommand=function(b){return function(){x(),b.apply(K,arguments),p()}},this.insertParagraph=this.wrapCommand(function(){A.insertParagraph(E)}),L.memo("help.insertParagraph",F.help.insertParagraph),this.insertOrderedList=this.wrapCommand(function(){z.insertOrderedList(E)}),L.memo("help.insertOrderedList",F.help.insertOrderedList),this.insertUnorderedList=this.wrapCommand(function(){z.insertUnorderedList(E)}),L.memo("help.insertUnorderedList",F.help.insertUnorderedList),this.indent=this.wrapCommand(function(){z.indent(E)}),L.memo("help.indent",F.help.indent),this.outdent=this.wrapCommand(function(){z.outdent(E)}),L.memo("help.outdent",F.help.outdent),this.insertImage=function(b,e){return aq.createImage(b,e).then(function(c){x(),"function"==typeof e?e(c):("string"==typeof e&&c.attr("data-filename",e),c.css("width",Math.min(H.width(),c.width()))),c.show(),ar.create(E).insertNode(c[0]),ar.createFromNodeAfter(c[0]).select(),p()}).fail(function(c){L.triggerEvent("image.upload.error",c)})},this.insertImages=function(b){bf.each(b,function(c,g){var f=g.name;G.maximumImageFileSize&&G.maximumImageFileSize<g.size?L.triggerEvent("image.upload.error",F.image.maximumFileSizeError):aq.readFileAsDataURL(g).then(function(e){return K.insertImage(e,f)}).fail(function(){L.triggerEvent("image.upload.error")})})},this.insertImagesOrCallback=function(b){var e=G.callbacks;e.onImageUpload?L.triggerEvent("image.upload",b):this.insertImages(b)},this.insertNode=this.wrapCommand(function(e){var c=this.createRange();c.insertNode(e),ar.createFromNodeAfter(e).select()}),this.insertText=this.wrapCommand(function(f){var e=this.createRange(),g=e.insertNode(aZ.createText(f));ar.create(g,aZ.nodeLength(g)).select()}),this.getSelectedText=function(){var b=this.createRange();return b.isOnAnchor()&&(b=ar.createFromNode(aZ.ancestor(b.sc,aZ.isAnchor))),b.toString()},this.pasteHTML=this.wrapCommand(function(e){var c=this.createRange().pasteHTML(e);ar.createFromNodeAfter(bc.last(c)).select()}),this.formatBlock=this.wrapCommand(function(b){b=a2.isMSIE?"<"+b+">":b,document.execCommand("FormatBlock",!1,b)}),this.formatPara=function(){this.formatBlock("P")},L.memo("help.formatPara",F.help.formatPara);for(var d=1;6>=d;d++){this["formatH"+d]=function(b){return function(){this.formatBlock("H"+b)}}(d),L.memo("help.formatH"+d,F.help["formatH"+d])}this.fontSize=function(g){var j=this.createRange();if(j&&j.isCollapsed()){var i=C.styleNodes(j),h=bc.head(i);bf(i).css({"font-size":g+"px"}),h&&!aZ.nodeLength(h)&&(h.innerHTML=aZ.ZERO_WIDTH_NBSP_CHAR,ar.createFromNodeAfter(h.firstChild).select(),H.data(ak,h))}else{x(),bf(C.styleNodes(j)).css({"font-size":g+"px"}),p()}},this.insertHorizontalRule=this.wrapCommand(function(){var b=this.createRange().insertNode(aZ.create("HR"));b.nextSibling&&ar.create(b.nextSibling,0).normalize().select()}),L.memo("help.insertHorizontalRule",F.help.insertHorizontalRule),this.removeBogus=function(){var f=H.data(ak);if(f){var e=bc.find(bc.from(f.childNodes),aZ.isText),g=e.nodeValue.indexOf(aZ.ZERO_WIDTH_NBSP_CHAR);-1!==g&&e.deleteData(g,1),aZ.isEmpty(f)&&aZ.remove(f),H.removeData(ak)}},this.lineHeight=this.wrapCommand(function(b){C.stylePara(this.createRange(),{lineHeight:b})}),this.unlink=function(){var e=this.createRange();if(e.isOnAnchor()){var c=aZ.ancestor(e.sc,aZ.isAnchor);e=ar.createFromNode(c),e.select(),x(),document.execCommand("unlink"),p()}},this.createLink=this.wrapCommand(function(O){var N=O.url,M=O.text,w=O.isNewWindow,v=O.range||this.createRange(),u=v.toString()!==M;G.onCreateLink&&(N=G.onCreateLink(N));var t=[];if(u){v=v.deleteContents();var s=v.insertNode(bf("<A>"+M+"</A>")[0]);t.push(s)}else{t=C.styleNodes(v,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0})}bf.each(t,function(c,e){bf(e).attr("href",N),w?bf(e).attr("target","_blank"):bf(e).removeAttr("target")});var r=ar.createFromNodeBefore(bc.head(t)),q=r.getStartPoint(),l=ar.createFromNodeAfter(bc.last(t)),h=l.getEndPoint();ar.create(q.node,q.offset,h.node,h.offset).select()}),this.getLinkInfo=function(){var e=this.createRange().expand(aZ.isAnchor),f=bf(bc.head(e.nodes(aZ.isAnchor)));return{range:e,text:e.toString(),isNewWindow:f.length?"_blank"===f.attr("target"):!1,url:f.length?f.attr("href"):""}},this.color=this.wrapCommand(function(f){var e=f.foreColor,g=f.backColor;e&&document.execCommand("foreColor",!1,e),g&&document.execCommand("backColor",!1,g)}),this.insertTable=this.wrapCommand(function(f){var e=f.split("x"),g=this.createRange().deleteContents();g.insertNode(B.createTable(e[0],e[1],G))}),this.floatMe=this.wrapCommand(function(e){var f=bf(this.restoreTarget());f.css("float",e)}),this.resize=this.wrapCommand(function(e){var f=bf(this.restoreTarget());f.css({width:100*e+"%",height:""})}),this.resizeTo=function(h,g,l){var k;if(l){var j=h.y/h.x,i=g.data("ratio");k={width:i>j?h.x:h.y/i,height:i>j?h.x*i:h.y}}else{k={width:h.x,height:h.y}}g.css(k)},this.removeMedia=this.wrapCommand(function(){var b=bf(this.restoreTarget()).detach();L.triggerEvent("media.delete",b,H)}),this.hasFocus=function(){return H.is(":focus")},this.focus=function(){this.hasFocus()||H.focus()},this.isEmpty=function(){return aZ.isEmpty(H[0])||aZ.emptyPara===H.html()},this.empty=function(){L.invoke("code",aZ.emptyPara)},this.setHeight=function(b){H.outerHeight(b)}},ai=function(a){var f=this,d=a.layoutInfo.editable;this.events={"summernote.keydown":function(b,c){f.needKeydownHook()&&(c.ctrlKey||c.metaKey)&&c.keyCode===at.code.V&&(a.invoke("editor.saveRange"),f.$paste.focus(),setTimeout(function(){f.pasteByHook()},0))}},this.needKeydownHook=function(){return a2.isMSIE&&a2.browserVersion>10||a2.isFF},this.initialize=function(){this.needKeydownHook()?(this.$paste=bf("<div />").attr("contenteditable",!0).css({position:"absolute",left:-100000,opacity:0}),d.before(this.$paste),this.$paste.on("paste",function(b){a.triggerEvent("paste",b)})):d.on("paste",this.pasteByEvent)},this.destroy=function(){this.needKeydownHook()&&(this.$paste.remove(),this.$paste=null)},this.pasteByHook=function(){var o=this.$paste[0].firstChild;if(aZ.isImg(o)){for(var n=o.src,m=atob(n.split(",")[1]),l=new Uint8Array(m.length),k=0;k<m.length;k++){l[k]=m.charCodeAt(k)}var j=new Blob([l],{type:"image/png"});j.name="clipboard.png",a.invoke("editor.restoreRange"),a.invoke("editor.focus"),a.invoke("editor.insertImagesOrCallback",[j])}else{var b=bf("<div />").html(this.$paste.html()).html();a.invoke("editor.restoreRange"),a.invoke("editor.focus"),b&&a.invoke("editor.pasteHTML",b)}this.$paste.empty()},this.pasteByEvent=function(b){var h=b.originalEvent.clipboardData;if(h&&h.items&&h.items.length){var g=bc.head(h.items);"file"===g.kind&&-1!==g.type.indexOf("image/")&&a.invoke("editor.insertImagesOrCallback",[g.getAsFile()]),a.invoke("editor.afterCommand")}}},ah=function(a){var n=bf(document),m=a.layoutInfo.editor,l=a.layoutInfo.editable,k=a.options,j=k.langInfo,i=bf(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(m);this.initialize=function(){k.disableDragAndDrop?n.on("drop",function(b){b.preventDefault()}):this.attachDragAndDropEvent()},this.attachDragAndDropEvent=function(){var c=bf(),b=i.find(".note-dropzone-message");n.on("dragenter",function(d){var g=a.invoke("codeview.isActivated"),f=m.width()>0&&m.height()>0;g||c.length||!f||(m.addClass("dragover"),i.width(m.width()),i.height(m.height()),b.text(j.image.dragImageHere)),c=c.add(d.target)}).on("dragleave",function(d){c=c.not(d.target),c.length||m.removeClass("dragover")}).on("drop",function(){c=bf(),m.removeClass("dragover")}),i.on("dragenter",function(){i.addClass("hover"),b.text(j.image.dropImage)}).on("dragleave",function(){i.removeClass("hover"),b.text(j.image.dragImageHere)}),i.on("drop",function(f){var e=f.originalEvent.dataTransfer;e&&e.files&&e.files.length?(f.preventDefault(),l.focus(),a.invoke("editor.insertImagesOrCallback",e.files)):bf.each(e.types,function(h,g){var d=e.getData(g);g.toLowerCase().indexOf("text")>-1?a.invoke("editor.pasteHTML",d):bf(d).each(function(){a.invoke("editor.insertNode",this)})})}).on("dragover",!1)}};a2.hasCodeMirror&&(a2.isSupportAmd?require(["codemirror"],function(b){au=b}):au=window.CodeMirror);var ag=function(g){var f=g.layoutInfo.editor,j=g.layoutInfo.editable,i=g.layoutInfo.codable,h=g.options;this.sync=function(){var b=this.isActivated();b&&a2.hasCodeMirror&&i.data("cmEditor").save()},this.isActivated=function(){return f.hasClass("codeview")},this.toggle=function(){this.isActivated()?this.deactivate():this.activate(),g.triggerEvent("codeview.toggled")},this.activate=function(){if(i.val(aZ.html(j,h.prettifyHtml)),i.height(j.height()),g.invoke("toolbar.updateCodeview",!0),f.addClass("codeview"),i.focus(),a2.hasCodeMirror){var b=au.fromTextArea(i[0],h.codemirror);if(h.codemirror.tern){var a=new au.TernServer(h.codemirror.tern);b.ternServer=a,b.on("cursorActivity",function(c){a.updateArgHints(c)})}b.setSize(null,j.outerHeight()),i.data("cmEditor",b)}},this.deactivate=function(){if(a2.hasCodeMirror){var c=i.data("cmEditor");i.val(c.getValue()),c.toTextArea()}var b=aZ.value(i,h.prettifyHtml)||aZ.emptyPara,a=j.html()!==b;j.html(b),j.height(h.height?i.height():"auto"),f.removeClass("codeview"),a&&g.triggerEvent("change",j.html(),j),j.focus(),g.invoke("toolbar.updateCodeview",!1)},this.destroy=function(){this.isActivated()&&this.deactivate()}},af=24,ad=function(a){var j=bf(document),i=a.layoutInfo.statusbar,h=a.layoutInfo.editable,g=a.options;this.initialize=function(){g.airMode||g.disableResizeEditor||i.on("mousedown",function(d){d.preventDefault(),d.stopPropagation();var c=h.offset().top-j.scrollTop();j.on("mousemove",function(b){var e=b.clientY-(c+af);e=g.minheight>0?Math.max(e,g.minheight):e,e=g.maxHeight>0?Math.min(e,g.maxHeight):e,h.height(e)}).one("mouseup",function(){j.off("mousemove")})})},this.destroy=function(){i.off()}},aK=function(a){var n=a.layoutInfo.editor,m=a.layoutInfo.toolbar,l=a.layoutInfo.editable,k=a.layoutInfo.codable,j=bf(window),i=bf("html, body");this.toggle=function(){var b=function(c){l.css("height",c.h),k.css("height",c.h),k.data("cmeditor")&&k.data("cmeditor").setsize(null,c.h)};n.toggleClass("fullscreen"),this.isFullscreen()?(l.data("orgHeight",l.css("height")),j.on("resize",function(){b({h:j.height()-m.outerHeight()})}).trigger("resize"),i.css("overflow","hidden")):(j.off("resize"),b({h:l.data("orgHeight")}),i.css("overflow","visible")),a.invoke("toolbar.updateFullscreen",this.isFullscreen())},this.isFullscreen=function(){return n.hasClass("fullscreen")}},bh=function(a){var j=this,i=bf(document),h=a.layoutInfo.editingArea,g=a.options;this.events={"summernote.mousedown":function(d,c){j.update(c.target)&&c.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){j.update()}},this.initialize=function(){this.$handle=bf(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',g.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',g.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(h),this.$handle.on("mousedown",function(b){if(aZ.isControlSizing(b.target)){b.preventDefault(),b.stopPropagation();var k=j.$handle.find(".note-control-selection").data("target"),d=k.offset(),c=i.scrollTop();i.on("mousemove",function(e){a.invoke("editor.resizeTo",{x:e.clientX-d.left,y:e.clientY-(d.top-c)},k,!e.shiftKey),j.update(k[0])}).one("mouseup",function(e){e.preventDefault(),i.off("mousemove"),a.invoke("editor.afterCommand")}),k.data("ratio")||k.data("ratio",k.height()/k.width())}})},this.destroy=function(){this.$handle.remove()},this.update=function(p){var o=aZ.isImg(p),n=this.$handle.find(".note-control-selection");if(a.invoke("imagePopover.update",p),o){var m=bf(p),l=m.position(),k={w:m.outerWidth(!0),h:m.outerHeight(!0)};n.css({display:"block",left:l.left,top:l.top,width:k.w,height:k.h}).data("target",m);var b=k.w+"x"+k.h;n.find(".note-control-selection-info").text(b),a.invoke("editor.saveTarget",p)}else{this.hide()}return o},this.hide=function(){a.invoke("editor.clearTarget"),this.$handle.children().hide()}},aF=function(a){var h=this,g="http://",d=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(e,c){c.isDefaultPrevented()||h.handleKeyup(c)},"summernote.keydown":function(e,c){h.handleKeydown(c)}},this.initialize=function(){this.lastWordRange=null},this.destroy=function(){this.lastWordRange=null},this.replace=function(){if(this.lastWordRange){var i=this.lastWordRange.toString(),f=i.match(d);if(f&&(f[1]||f[2])){var e=f[1]?i:g+i,b=bf("<a />").html(i).attr("href",e)[0];this.lastWordRange.insertNode(b),this.lastWordRange=null,a.invoke("editor.focus")}}},this.handleKeydown=function(b){if(bc.contains([at.code.ENTER,at.code.SPACE],b.keyCode)){var e=a.invoke("editor.createRange").getWordRange();this.lastWordRange=e}},this.handleKeyup=function(b){bc.contains([at.code.ENTER,at.code.SPACE],b.keyCode)&&this.replace()}},bg=function(d){var c=d.layoutInfo.note;this.events={"summernote.change":function(){c.val(d.invoke("code"))}},this.shouldInitialize=function(){return aZ.isTextarea(c[0])}},aL=function(a){var h=this,g=a.layoutInfo.editingArea,f=a.options;this.events={"summernote.init summernote.change":function(){h.update()},"summernote.codeview.toggled":function(){h.update()}},this.shouldInitialize=function(){return !!f.placeholder},this.initialize=function(){this.$placeholder=bf('<div class="note-placeholder">'),this.$placeholder.on("click",function(){a.invoke("focus")}).text(f.placeholder).prependTo(g)},this.destroy=function(){this.$placeholder.remove()},this.update=function(){var b=!a.invoke("codeview.isActivated")&&a.invoke("editor.isEmpty");this.$placeholder.toggle(b)}},aG=function(a){var p=this,o=bf.summernote.ui,n=a.layoutInfo.toolbar,m=a.options,l=m.langInfo,d=bd.invertObject(m.keyMap[a2.isMac?"mac":"pc"]),c=this.representShortcut=function(f){var e=d[f];return a2.isMac&&(e=e.replace("CMD","⌘").replace("SHIFT","⇧")),e=e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")," ("+e+")"};this.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.fontInstalledMap={}},this.destroy=function(){delete this.fontInstalledMap},this.isFontInstalled=function(b){return p.fontInstalledMap.hasOwnProperty(b)||(p.fontInstalledMap[b]=a2.isFontInstalled(b)||bc.contains(m.fontNamesIgnoreCheck,b)),p.fontInstalledMap[b]},this.addToolbarButtons=function(){a.memo("button.style",function(){return o.buttonGroup([o.button({className:"dropdown-toggle",contents:o.icon(m.icons.magic)+" "+o.icon(m.icons.caret,"span"),tooltip:l.style.style,data:{toggle:"dropdown"}}),o.dropdown({className:"dropdown-style",items:a.options.styleTags,template:function(j){"string"==typeof j&&(j={tag:j,title:j});var g=j.tag,s=j.title,r=j.style?' style="'+j.style+'" ':"",q=j.className?' className="'+j.className+'"':"";return"<"+g+r+q+">"+s+"</"+g+">"},click:a.createInvokeHandler("editor.formatBlock")})]).render()}),a.memo("button.bold",function(){return o.button({className:"note-btn-bold",contents:o.icon(m.icons.bold),tooltip:l.font.bold+c("bold"),click:a.createInvokeHandler("editor.bold")}).render()}),a.memo("button.italic",function(){return o.button({className:"note-btn-italic",contents:o.icon(m.icons.italic),tooltip:l.font.italic+c("italic"),click:a.createInvokeHandler("editor.italic")}).render()}),a.memo("button.underline",function(){return o.button({className:"note-btn-underline",contents:o.icon(m.icons.underline),tooltip:l.font.underline+c("underline"),click:a.createInvokeHandler("editor.underline")}).render()}),a.memo("button.clear",function(){return o.button({contents:o.icon(m.icons.eraser),tooltip:l.font.clear+c("removeFormat"),click:a.createInvokeHandler("editor.removeFormat")}).render()}),a.memo("button.strikethrough",function(){return o.button({className:"note-btn-strikethrough",contents:o.icon(m.icons.strikethrough),tooltip:l.font.strikethrough+c("strikethrough"),click:a.createInvokeHandler("editor.strikethrough")}).render()}),a.memo("button.superscript",function(){return o.button({className:"note-btn-superscript",contents:o.icon(m.icons.superscript),tooltip:l.font.superscript,click:a.createInvokeHandler("editor.superscript")}).render()}),a.memo("button.subscript",function(){return o.button({className:"note-btn-subscript",contents:o.icon(m.icons.subscript),tooltip:l.font.subscript,click:a.createInvokeHandler("editor.subscript")}).render()}),a.memo("button.fontname",function(){return o.buttonGroup([o.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> '+o.icon(m.icons.caret,"span"),tooltip:l.font.name,data:{toggle:"dropdown"}}),o.dropdownCheck({className:"dropdown-fontname",checkClassName:m.icons.menuCheck,items:m.fontNames.filter(p.isFontInstalled),template:function(g){return'<span style="font-family:'+g+'">'+g+"</span>"},click:a.createInvokeHandler("editor.fontName")})]).render()}),a.memo("button.fontsize",function(){return o.buttonGroup([o.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/>'+o.icon(m.icons.caret,"span"),tooltip:l.font.size,data:{toggle:"dropdown"}}),o.dropdownCheck({className:"dropdown-fontsize",checkClassName:m.icons.menuCheck,items:m.fontSizes,click:a.createInvokeHandler("editor.fontSize")})]).render()}),a.memo("button.color",function(){return o.buttonGroup({className:"note-color",children:[o.button({className:"note-current-color-button",contents:o.icon(m.icons.font+" note-recent-color"),tooltip:l.color.recent,click:function(j){var g=bf(j.currentTarget);a.invoke("editor.color",{backColor:g.attr("data-backColor"),foreColor:g.attr("data-foreColor")})},callback:function(j){var g=j.find(".note-recent-color");g.css("background-color","#FFFF00"),j.attr("data-backColor","#FFFF00")}}),o.button({className:"dropdown-toggle",contents:o.icon(m.icons.caret,"span"),tooltip:l.color.more,data:{toggle:"dropdown"}}),o.dropdown({items:["<li>",'<div class="btn-group">','  <div class="note-palette-title">'+l.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="backColor" data-value="inherit">',l.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="btn-group">','  <div class="note-palette-title">'+l.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="removeFormat" data-value="foreColor">',l.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>","</li>"].join(""),callback:function(g){g.find(".note-holder").each(function(){var j=bf(this);j.append(o.palette({colors:m.colors,eventName:j.data("event")}).render())})},click:function(v){var u=bf(v.target),t=u.data("event"),s=u.data("value");if(t&&s){var r="backColor"===t?"background-color":"color",q=u.closest(".note-color").find(".note-recent-color"),j=u.closest(".note-color").find(".note-current-color-button");q.css(r,s),j.attr("data-"+t,s),a.invoke("editor."+t,s)}}})]}).render()}),a.memo("button.ul",function(){return o.button({contents:o.icon(m.icons.unorderedlist),tooltip:l.lists.unordered+c("insertUnorderedList"),click:a.createInvokeHandler("editor.insertUnorderedList")}).render()}),a.memo("button.ol",function(){return o.button({contents:o.icon(m.icons.orderedlist),tooltip:l.lists.ordered+c("insertOrderedList"),click:a.createInvokeHandler("editor.insertOrderedList")}).render()});var i=o.button({contents:o.icon(m.icons.alignLeft),tooltip:l.paragraph.left+c("justifyLeft"),click:a.createInvokeHandler("editor.justifyLeft")}),h=o.button({contents:o.icon(m.icons.alignCenter),tooltip:l.paragraph.center+c("justifyCenter"),click:a.createInvokeHandler("editor.justifyCenter")}),f=o.button({contents:o.icon(m.icons.alignRight),tooltip:l.paragraph.right+c("justifyRight"),click:a.createInvokeHandler("editor.justifyRight")}),e=o.button({contents:o.icon(m.icons.alignJustify),tooltip:l.paragraph.justify+c("justifyFull"),click:a.createInvokeHandler("editor.justifyFull")}),b=o.button({contents:o.icon(m.icons.outdent),tooltip:l.paragraph.outdent+c("outdent"),click:a.createInvokeHandler("editor.outdent")}),k=o.button({contents:o.icon(m.icons.indent),tooltip:l.paragraph.indent+c("indent"),click:a.createInvokeHandler("editor.indent")});a.memo("button.justifyLeft",bd.invoke(i,"render")),a.memo("button.justifyCenter",bd.invoke(h,"render")),a.memo("button.justifyRight",bd.invoke(f,"render")),a.memo("button.justifyFull",bd.invoke(e,"render")),a.memo("button.outdent",bd.invoke(b,"render")),a.memo("button.indent",bd.invoke(k,"render")),a.memo("button.paragraph",function(){return o.buttonGroup([o.button({className:"dropdown-toggle",contents:o.icon(m.icons.alignLeft)+" "+o.icon(m.icons.caret,"span"),tooltip:l.paragraph.paragraph,data:{toggle:"dropdown"}}),o.dropdown([o.buttonGroup({className:"note-align",children:[i,h,f,e]}),o.buttonGroup({className:"note-list",children:[b,k]})])]).render()}),a.memo("button.height",function(){return o.buttonGroup([o.button({className:"dropdown-toggle",contents:o.icon(m.icons.textHeight)+" "+o.icon(m.icons.caret,"span"),tooltip:l.font.height,data:{toggle:"dropdown"}}),o.dropdownCheck({items:m.lineHeights,checkClassName:m.icons.menuCheck,className:"dropdown-line-height",click:a.createInvokeHandler("editor.lineHeight")})]).render()}),a.memo("button.table",function(){return o.buttonGroup([o.button({className:"dropdown-toggle",contents:o.icon(m.icons.table)+" "+o.icon(m.icons.caret,"span"),tooltip:l.table.table,data:{toggle:"dropdown"}}),o.dropdown({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(g){var j=g.find(".note-dimension-picker-mousecatcher");j.css({width:m.insertTableMaxSize.col+"em",height:m.insertTableMaxSize.row+"em"}).mousedown(a.createInvokeHandler("editor.insertTable")).on("mousemove",p.tableMoveHandler)}}).render()}),a.memo("button.link",function(){return o.button({contents:o.icon(m.icons.link),tooltip:l.link.link,click:a.createInvokeHandler("linkDialog.show")}).render()}),a.memo("button.picture",function(){return o.button({contents:o.icon(m.icons.picture),tooltip:l.image.image,click:a.createInvokeHandler("imageDialog.show")}).render()}),a.memo("button.video",function(){return o.button({contents:o.icon(m.icons.video),tooltip:l.video.video,click:a.createInvokeHandler("videoDialog.show")}).render()}),a.memo("button.hr",function(){return o.button({contents:o.icon(m.icons.minus),tooltip:l.hr.insert+c("insertHorizontalRule"),click:a.createInvokeHandler("editor.insertHorizontalRule")}).render()}),a.memo("button.fullscreen",function(){return o.button({className:"btn-fullscreen",contents:o.icon(m.icons.arrowsAlt),tooltip:l.options.fullscreen,click:a.createInvokeHandler("fullscreen.toggle")}).render()}),a.memo("button.codeview",function(){return o.button({className:"btn-codeview",contents:o.icon(m.icons.code),tooltip:l.options.codeview,click:a.createInvokeHandler("codeview.toggle")}).render()}),a.memo("button.redo",function(){return o.button({contents:o.icon(m.icons.redo),tooltip:l.history.redo+c("redo"),click:a.createInvokeHandler("editor.redo")}).render()}),a.memo("button.undo",function(){return o.button({contents:o.icon(m.icons.undo),tooltip:l.history.undo+c("undo"),click:a.createInvokeHandler("editor.undo")}).render()}),a.memo("button.help",function(){return o.button({contents:o.icon(m.icons.question),tooltip:l.options.help,click:a.createInvokeHandler("helpDialog.show")}).render()})},this.addImagePopoverButtons=function(){a.memo("button.imageSize100",function(){return o.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:l.image.resizeFull,click:a.createInvokeHandler("editor.resize","1")}).render()}),a.memo("button.imageSize50",function(){return o.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:l.image.resizeHalf,click:a.createInvokeHandler("editor.resize","0.5")}).render()}),a.memo("button.imageSize25",function(){return o.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:l.image.resizeQuarter,click:a.createInvokeHandler("editor.resize","0.25")}).render()}),a.memo("button.floatLeft",function(){return o.button({contents:o.icon(m.icons.alignLeft),tooltip:l.image.floatLeft,click:a.createInvokeHandler("editor.floatMe","left")}).render()}),a.memo("button.floatRight",function(){return o.button({contents:o.icon(m.icons.alignRight),tooltip:l.image.floatRight,click:a.createInvokeHandler("editor.floatMe","right")}).render()}),a.memo("button.floatNone",function(){return o.button({contents:o.icon(m.icons.alignJustify),tooltip:l.image.floatNone,click:a.createInvokeHandler("editor.floatMe","none")}).render()}),a.memo("button.removeMedia",function(){return o.button({contents:o.icon(m.icons.trash),tooltip:l.image.remove,click:a.createInvokeHandler("editor.removeMedia")}).render()})},this.addLinkPopoverButtons=function(){a.memo("button.linkDialogShow",function(){return o.button({contents:o.icon(m.icons.link),tooltip:l.link.edit,click:a.createInvokeHandler("linkDialog.show")}).render()}),a.memo("button.unlink",function(){return o.button({contents:o.icon(m.icons.unlink),tooltip:l.link.unlink,click:a.createInvokeHandler("editor.unlink")}).render()})},this.build=function(y,x){for(var w=0,v=x.length;v>w;w++){for(var u=x[w],t=u[0],s=u[1],r=o.buttonGroup({className:"note-"+t}).render(),q=0,f=s.length;f>q;q++){var b=a.memo("button."+s[q]);b&&r.append("function"==typeof b?b(a):b)}r.appendTo(y)}},this.updateCurrentStyle=function(){var q=a.invoke("editor.currentStyle");if(this.updateBtnStates({".note-btn-bold":function(){return"bold"===q["font-bold"]},".note-btn-italic":function(){return"italic"===q["font-italic"]},".note-btn-underline":function(){return"underline"===q["font-underline"]},".note-btn-subscript":function(){return"subscript"===q["font-subscript"]},".note-btn-superscript":function(){return"superscript"===q["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===q["font-strikethrough"]}}),q["font-family"]){var k=q["font-family"].split(",").map(function(f){return f.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),g=bc.find(k,p.isFontInstalled);n.find(".dropdown-fontname li a").each(function(){var f=bf(this).data("value")+""==g+"";this.className=f?"checked":""}),n.find(".note-current-fontname").text(g)}if(q["font-size"]){var e=q["font-size"];n.find(".dropdown-fontsize li a").each(function(){var f=bf(this).data("value")+""==e+"";this.className=f?"checked":""}),n.find(".note-current-fontsize").text(e)}if(q["line-height"]){var b=q["line-height"];n.find(".dropdown-line-height li a").each(function(){var f=bf(this).data("value")+""==b+"";this.className=f?"checked":""})}},this.updateBtnStates=function(e){bf.each(e,function(g,f){o.toggleBtnActive(n.find(g),f())})},this.tableMoveHandler=function(y){var x,w=18,v=bf(y.target.parentNode),u=v.next(),t=v.find(".note-dimension-picker-mousecatcher"),s=v.find(".note-dimension-picker-highlighted"),r=v.find(".note-dimension-picker-unhighlighted");if(void 0===y.offsetX){var q=bf(y.target).offset();x={x:y.pageX-q.left,y:y.pageY-q.top}}else{x={x:y.offsetX,y:y.offsetY}}var h={c:Math.ceil(x.x/w)||1,r:Math.ceil(x.y/w)||1};s.css({width:h.c+"em",height:h.r+"em"}),t.data("value",h.c+"x"+h.r),3<h.c&&h.c<m.insertTableMaxSize.col&&r.css({width:h.c+1+"em"}),3<h.r&&h.r<m.insertTableMaxSize.row&&r.css({height:h.r+1+"em"}),u.html(h.c+" x "+h.r)}},ab=function(a){var j=bf.summernote.ui,i=a.layoutInfo.note,h=a.layoutInfo.toolbar,g=a.options;this.shouldInitialize=function(){return !g.airMode},this.initialize=function(){g.toolbar=g.toolbar||[],g.toolbar.length?a.invoke("buttons.build",h,g.toolbar):h.hide(),g.toolbarContainer&&h.appendTo(g.toolbarContainer),i.on("summernote.keyup summernote.mouseup summernote.change",function(){a.invoke("buttons.updateCurrentStyle")}),a.invoke("buttons.updateCurrentStyle")},this.destroy=function(){h.children().remove()},this.updateFullscreen=function(b){j.toggleBtnActive(h.find(".btn-fullscreen"),b)},this.updateCodeview=function(b){j.toggleBtnActive(h.find(".btn-codeview"),b),b?this.deactivate():this.activate()},this.activate=function(d){var c=h.find("button");d||(c=c.not(".btn-codeview")),j.toggleBtn(c,!0)},this.deactivate=function(d){var c=h.find("button");d||(c=c.not(".btn-codeview")),j.toggleBtn(c,!1)}},aM=function(a){var l=this,k=bf.summernote.ui,j=a.layoutInfo.editor,i=a.options,h=i.langInfo;this.initialize=function(){var d=i.dialogsInBody?bf(document.body):j,f='<div class="form-group"><label>'+h.link.textToDisplay+'</label><input class="note-link-text form-control" type="text" /></div><div class="form-group"><label>'+h.link.url+'</label><input class="note-link-url form-control" type="text" value="http://" /></div>'+(i.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+h.link.openInNewWindow+"</label></div>"),e='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+h.link.insert+"</button>";this.$dialog=k.dialog({className:"link-dialog",title:h.link.insert,fade:i.dialogsFade,body:f,footer:e}).render().appendTo(d)},this.destroy=function(){k.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(d,c){d.on("keypress",function(b){b.keyCode===at.code.ENTER&&c.trigger("click")})},this.showLinkDialog=function(b){return bf.Deferred(function(c){var n=l.$dialog.find(".note-link-text"),m=l.$dialog.find(".note-link-url"),e=l.$dialog.find(".note-link-btn"),d=l.$dialog.find("input[type=checkbox]");k.onDialogShown(l.$dialog,function(){a.triggerEvent("dialog.shown"),n.val(b.text),n.on("input",function(){k.toggleBtn(e,n.val()&&m.val()),b.text=n.val()}),b.url||(b.url=b.text||"http://",k.toggleBtn(e,b.text)),m.on("input",function(){k.toggleBtn(e,n.val()&&m.val()),b.text||n.val(m.val())}).val(b.url).trigger("focus"),l.bindEnterKey(m,e),l.bindEnterKey(n,e),d.prop("checked",b.isNewWindow),e.one("click",function(f){f.preventDefault(),c.resolve({range:b.range,url:m.val(),text:n.val(),isNewWindow:d.is(":checked")}),l.$dialog.modal("hide")})}),k.onDialogHidden(l.$dialog,function(){n.off("input keypress"),m.off("input keypress"),e.off("click"),"pending"===c.state()&&c.reject()}),k.showDialog(l.$dialog)}).promise()},this.show=function(){var b=a.invoke("editor.getLinkInfo");a.invoke("editor.saveRange"),this.showLinkDialog(b).then(function(c){a.invoke("editor.restoreRange"),a.invoke("editor.createLink",c)}).fail(function(){a.invoke("editor.restoreRange")})},a.memo("help.linkDialog.show",i.langInfo.help["linkDialog.show"])},aH=function(a){var h=this,g=bf.summernote.ui,d=a.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){h.update()},"summernote.dialog.shown":function(){h.hide()}},this.shouldInitialize=function(){return !bc.isEmpty(d.popover.link)},this.initialize=function(){this.$popover=g.popover({className:"note-link-popover",callback:function(e){var c=e.find(".popover-content");c.prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo("body");var b=this.$popover.find(".popover-content");a.invoke("buttons.build",b,d.popover.link)},this.destroy=function(){this.$popover.remove()},this.update=function(){if(!a.invoke("editor.hasFocus")){return void this.hide()}var k=a.invoke("editor.createRange");if(k.isCollapsed()&&k.isOnAnchor()){var j=aZ.ancestor(k.sc,aZ.isAnchor),i=bf(j).attr("href");this.$popover.find("a").attr("href",i).html(i);var b=aZ.posFromPlaceholder(j);this.$popover.css({display:"block",left:b.left,top:b.top})}else{this.hide()}},this.hide=function(){this.$popover.hide()}},ac=function(a){var l=this,k=bf.summernote.ui,j=a.layoutInfo.editor,i=a.options,h=i.langInfo;this.initialize=function(){var d=i.dialogsInBody?bf(document.body):j,n="";if(i.maximumImageFileSize){var m=Math.floor(Math.log(i.maximumImageFileSize)/Math.log(1024)),g=1*(i.maximumImageFileSize/Math.pow(1024,m)).toFixed(2)+"  KMGTP"[m]+"B";n="<small>"+h.image.maximumFileSize+" : "+g+"</small>"}var f='<div class="form-group note-group-select-from-files"><label>'+h.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+n+'</div><div class="form-group" style="overflow:auto;"><label>'+h.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>',e='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+h.image.insert+"</button>";this.$dialog=k.dialog({title:h.image.insert,fade:i.dialogsFade,body:f,footer:e}).render().appendTo(d)},this.destroy=function(){k.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(d,c){d.on("keypress",function(b){b.keyCode===at.code.ENTER&&c.trigger("click")})},this.show=function(){a.invoke("editor.saveRange"),this.showImageDialog().then(function(b){k.hideDialog(l.$dialog),a.invoke("editor.restoreRange"),"string"==typeof b?a.invoke("editor.insertImage",b):a.invoke("editor.insertImagesOrCallback",b)}).fail(function(){a.invoke("editor.restoreRange")})},this.showImageDialog=function(){return bf.Deferred(function(b){var m=l.$dialog.find(".note-image-input"),d=l.$dialog.find(".note-image-url"),c=l.$dialog.find(".note-image-btn");k.onDialogShown(l.$dialog,function(){a.triggerEvent("dialog.shown"),m.replaceWith(m.clone().on("change",function(){b.resolve(this.files||this.value)}).val("")),c.click(function(e){e.preventDefault(),b.resolve(d.val())}),d.on("keyup paste",function(){var e=d.val();k.toggleBtn(c,e)}).val("").trigger("focus"),l.bindEnterKey(d,c)}),k.onDialogHidden(l.$dialog,function(){m.off("change"),d.off("keyup paste keypress"),c.off("click"),"pending"===b.state()&&b.reject()}),k.showDialog(l.$dialog)})}},aN=function(a){var f=bf.summernote.ui,d=a.options;this.shouldInitialize=function(){return !bc.isEmpty(d.popover.image)},this.initialize=function(){this.$popover=f.popover({className:"note-image-popover"}).render().appendTo("body");var b=this.$popover.find(".popover-content");a.invoke("buttons.build",b,d.popover.image)},this.destroy=function(){this.$popover.remove()},this.update=function(e){if(aZ.isImg(e)){var c=aZ.posFromPlaceholder(e);this.$popover.css({display:"block",left:c.left,top:c.top})}else{this.hide()}},this.hide=function(){this.$popover.hide()}},aI=function(a){var l=this,k=bf.summernote.ui,j=a.layoutInfo.editor,i=a.options,h=i.langInfo;this.initialize=function(){var d=i.dialogsInBody?bf(document.body):j,f='<div class="form-group row-fluid"><label>'+h.video.url+' <small class="text-muted">'+h.video.providers+'</small></label><input class="note-video-url form-control span12" type="text" /></div>',e='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+h.video.insert+"</button>";this.$dialog=k.dialog({title:h.video.insert,fade:i.dialogsFade,body:f,footer:e}).render().appendTo(d)},this.destroy=function(){k.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(d,c){d.on("keypress",function(b){b.keyCode===at.code.ENTER&&c.trigger("click")})},this.createVideoNode=function(Q){var P,O=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,N=Q.match(O),M=/\/\/instagram.com\/p\/(.[a-zA-Z0-9_-]*)/,L=Q.match(M),K=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/,J=Q.match(K),I=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,H=Q.match(I),G=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,F=Q.match(G),E=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/,D=Q.match(E),C=/^.+.(mp4|m4v)$/,B=Q.match(C),A=/^.+.(ogg|ogv)$/,z=Q.match(A),y=/^.+.(webm)$/,x=Q.match(y);if(N&&11===N[1].length){var w=N[1];P=bf("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+w).attr("width","640").attr("height","360")}else{if(L&&L[0].length){P=bf("<iframe>").attr("frameborder",0).attr("src",L[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true")}else{if(J&&J[0].length){P=bf("<iframe>").attr("frameborder",0).attr("src",J[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed")}else{if(H&&H[3].length){P=bf("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+H[3]).attr("width","640").attr("height","360")}else{if(F&&F[2].length){P=bf("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+F[2]).attr("width","640").attr("height","360")}else{if(D&&D[1].length){P=bf("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+D[1])}else{if(!(B||z||x)){return !1}P=bf("<video controls>").attr("src",Q).attr("width","640").attr("height","360")}}}}}}return P.addClass("note-video-clip"),P[0]},this.show=function(){var b=a.invoke("editor.getSelectedText");a.invoke("editor.saveRange"),this.showVideoDialog(b).then(function(c){k.hideDialog(l.$dialog),a.invoke("editor.restoreRange");var d=l.createVideoNode(c);d&&a.invoke("editor.insertNode",d)}).fail(function(){a.invoke("editor.restoreRange")})},this.showVideoDialog=function(b){return bf.Deferred(function(c){var e=l.$dialog.find(".note-video-url"),d=l.$dialog.find(".note-video-btn");k.onDialogShown(l.$dialog,function(){a.triggerEvent("dialog.shown"),e.val(b).on("input",function(){k.toggleBtn(d,e.val())}).trigger("focus"),d.click(function(f){f.preventDefault(),c.resolve(e.val())}),l.bindEnterKey(e,d)}),k.onDialogHidden(l.$dialog,function(){e.off("input"),d.off("click"),"pending"===c.state()&&c.reject()}),k.showDialog(l.$dialog)})}},ae=function(a){var l=this,k=bf.summernote.ui,j=a.layoutInfo.editor,i=a.options,h=i.langInfo;this.createShortCutList=function(){var b=i.keyMap[a2.isMac?"mac":"pc"];return Object.keys(b).map(function(m){var g=b[m],c=bf('<div><div class="help-list-item"/></div>');return c.append(bf("<label><kbd>"+m+"</kdb></label>").css({width:180,"margin-right":10})).append(bf("<span/>").html(a.memo("help."+g)||g)),c.html()}).join("")},this.initialize=function(){var d=i.dialogsInBody?bf(document.body):j,e=['<p class="text-center">','<a href="//summernote.org/" target="_blank">Summernote 0.8.1</a> · ','<a href="//github.com/summernote/summernote" target="_blank">Project</a> · ','<a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=k.dialog({title:h.options.help,fade:i.dialogsFade,body:this.createShortCutList(),footer:e,callback:function(b){b.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(d)},this.destroy=function(){k.hideDialog(this.$dialog),this.$dialog.remove()},this.showHelpDialog=function(){return bf.Deferred(function(b){k.onDialogShown(l.$dialog,function(){a.triggerEvent("dialog.shown"),b.resolve()}),k.showDialog(l.$dialog)}).promise()},this.show=function(){a.invoke("editor.saveRange"),this.showHelpDialog().then(function(){a.invoke("editor.restoreRange")})}},aQ=function(a){var j=this,i=bf.summernote.ui,d=a.options,c=20;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){j.update()},"summernote.change summernote.dialog.shown":function(){j.hide()},"summernote.focusout":function(f,e){a2.isFF||e.relatedTarget&&aZ.ancestor(e.relatedTarget,bd.eq(j.$popover[0]))||j.hide()}},this.shouldInitialize=function(){return d.airMode&&!bc.isEmpty(d.popover.air)},this.initialize=function(){this.$popover=i.popover({className:"note-air-popover"}).render().appendTo("body");var b=this.$popover.find(".popover-content");a.invoke("buttons.build",b,d.popover.air)},this.destroy=function(){this.$popover.remove()},this.update=function(){var b=a.invoke("editor.currentStyle");if(b.range&&!b.range.isCollapsed()){var h=bc.last(b.range.getClientRects());if(h){var g=bd.rect2bnd(h);this.$popover.css({display:"block",left:Math.max(g.left+g.width/2,0)-c,top:g.top+g.height})}}else{this.hide()}},this.hide=function(){this.$popover.hide()}},aJ=function(a){var n=this,m=bf.summernote.ui,l=5,k=a.options.hint||[],d=a.options.hintDirection||"bottom",c=bf.isArray(k)?k:[k];this.events={"summernote.keyup":function(f,e){e.isDefaultPrevented()||n.handleKeyup(e)},"summernote.keydown":function(f,e){n.handleKeydown(e)},"summernote.dialog.shown":function(){n.hide()}},this.shouldInitialize=function(){return c.length>0},this.initialize=function(){this.lastWordRange=null,this.$popover=m.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo("body"),this.$popover.hide(),this.$content=this.$popover.find(".popover-content"),this.$content.on("click",".note-hint-item",function(){n.$content.find(".active").removeClass("active"),bf(this).addClass("active"),n.replace()})},this.destroy=function(){this.$popover.remove()},this.selectItem=function(b){this.$content.find(".active").removeClass("active"),b.addClass("active"),this.$content[0].scrollTop=b[0].offsetTop-this.$content.innerHeight()/2},this.moveDown=function(){var f=this.$content.find(".note-hint-item.active"),e=f.next();if(e.length){this.selectItem(e)}else{var g=f.parent().next();g.length||(g=this.$content.find(".note-hint-group").first()),this.selectItem(g.find(".note-hint-item").first())}},this.moveUp=function(){var f=this.$content.find(".note-hint-item.active"),e=f.prev();if(e.length){this.selectItem(e)}else{var g=f.parent().prev();g.length||(g=this.$content.find(".note-hint-group").last()),this.selectItem(g.find(".note-hint-item").last())}},this.replace=function(){var b=this.$content.find(".note-hint-item.active");if(b.length){var e=this.nodeFromItem(b);this.lastWordRange.insertNode(e),ar.createFromNode(e).collapse().select(),this.lastWordRange=null,this.hide(),a.invoke("editor.focus")}},this.nodeFromItem=function(f){var e=c[f.data("index")],h=f.data("item"),g=e.content?e.content(h):h;return"string"==typeof g&&(g=aZ.createText(g)),g},this.createItemTemplates=function(e,g){var f=c[e];return g.map(function(i,h){var b=bf('<div class="note-hint-item"/>');return b.append(f.template?f.template(i):i+""),b.data({index:e,item:i}),0===e&&0===h&&b.addClass("active"),b})},this.handleKeydown=function(b){this.$popover.is(":visible")&&(b.keyCode===at.code.ENTER?(b.preventDefault(),this.replace()):b.keyCode===at.code.UP?(b.preventDefault(),this.moveUp()):b.keyCode===at.code.DOWN&&(b.preventDefault(),this.moveDown()))},this.searchKeyword=function(g,f,j){var i=c[g];if(i&&i.match.test(f)&&i.search){var h=i.match.exec(f);i.search(h[1],j)}else{j()}},this.createGroup=function(e,g){var f=bf('<div class="note-hint-group note-hint-group-'+e+'"/>');return this.searchKeyword(e,g,function(b){b=b||[],b.length&&(f.html(n.createItemTemplates(e,b)),n.show())}),f},this.handleKeyup=function(b){if(bc.contains([at.code.ENTER,at.code.UP,at.code.DOWN],b.keyCode)){if(b.keyCode===at.code.ENTER&&this.$popover.is(":visible")){return}}else{var i=a.invoke("editor.createRange").getWordRange(),g=i.toString();if(c.length&&g){this.$content.empty();var e=bd.rect2bnd(bc.last(i.getClientRects()));e&&(this.$popover.hide(),this.lastWordRange=i,c.forEach(function(h,f){h.match.test(g)&&n.createGroup(f,g).appendTo(n.$content)}),"top"===d?this.$popover.css({left:e.left,top:e.top-this.$popover.outerHeight()-l}):this.$popover.css({left:e.left,top:e.top+e.height+l}))}else{this.hide()}}},this.show=function(){this.$popover.show()},this.hide=function(){this.$popover.hide()}};bf.summernote=bf.extend(bf.summernote,{version:"0.8.1",ui:av,plugins:{},options:{modules:{editor:aj,clipboard:ai,dropzone:ah,codeview:ag,statusbar:ad,fullscreen:aK,handle:bh,hintPopover:aJ,autoLink:aF,autoSync:bg,placeholder:aL,buttons:aG,toolbar:ab,linkDialog:aM,linkPopover:aH,imageDialog:ac,imagePopover:aN,videoDialog:aI,helpDialog:ae,airPopover:aQ},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onSubmit:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})});