!function(V,U,T,S){function R(a,d){this.element=V(a),this.settings=V.extend({},z,d),this._defaults=z,this._name=A,this.init()}function Q(b){b.element.trigger("change")}function P(a){a.element.find("option").each(function(g,f){var b=V(f);"undefined"==typeof b.data("original-index")&&b.data("original-index",a.elementCount++),"undefined"==typeof b.data("_selected")&&b.data("_selected",!1)})}function O(a,f,e){a.element.find("option").each(function(d,c){var b=V(c);b.data("original-index")===f&&(b.prop("selected",e),e?(b.attr("data-sortindex",a.sortIndex),a.sortIndex++):b.removeAttr("data-sortindex"))})}function N(d,c){return d.replace(/\{(\d+)\}/g,function(b,e){return"undefined"!=typeof c[e]?c[e]:b})}function M(h){if(h.settings.infoText){var g=h.elements.select1.find("option").length,l=h.elements.select2.find("option").length,k=h.element.find("option").length-h.selectedElements,j=h.selectedElements,i="";i=0===k?h.settings.infoTextEmpty:g===k?N(h.settings.infoText,[g,k]):N(h.settings.infoTextFiltered,[g,k]),h.elements.info1.html(i),h.elements.box1.toggleClass("filtered",!(g===k||0===k)),i=0===j?h.settings.infoTextEmpty:l===j?N(h.settings.infoText,[l,j]):N(h.settings.infoTextFiltered,[l,j]),h.elements.info2.html(i),h.elements.box2.toggleClass("filtered",!(l===j||0===j))}}function L(a){a.selectedElements=0,a.elements.select1.empty(),a.elements.select2.empty(),a.element.find("option").each(function(g,f){var b=V(f);b.prop("selected")?(a.selectedElements++,a.elements.select2.append(b.clone(!0).prop("selected",b.data("_selected")))):a.elements.select1.append(b.clone(!0).prop("selected",b.data("_selected")))}),a.settings.showFilterInputs&&(K(a,1),K(a,2)),M(a)}function K(a,j){if(a.settings.showFilterInputs){J(a,j),a.elements["select"+j].empty().scrollTop(0);var i=new RegExp(V.trim(a.elements["filterInput"+j].val()),"gi"),h=a.element.find("option"),g=a.element;g=1===j?h.not(":selected"):g.find("option:selected"),g.each(function(e,d){var c=V(d),b=!0;(d.text.match(i)||a.settings.filterOnValues&&c.attr("value").match(i))&&(b=!1,a.elements["select"+j].append(c.clone(!0).prop("selected",c.data("_selected")))),h.eq(c.data("original-index")).data("filtered"+j,b)}),M(a)}}function J(a,f){var e=a.element.find("option");a.elements["select"+f].find("option").each(function(d,h){var g=V(h);e.eq(g.data("original-index")).data("_selected",g.prop("selected"))})}function I(d){var c=d.children("option");c.sort(function(f,e){var h=parseInt(f.getAttribute("data-sortindex")),g=parseInt(e.getAttribute("data-sortindex"));return h>g?1:g>h?-1:0}),c.detach().appendTo(d)}function H(a){a.find("option").sort(function(d,e){return V(d).data("original-index")>V(e).data("original-index")?1:-1}).appendTo(a)}function G(b){b.elements.select1.find("option").each(function(){b.element.find("option").data("_selected",!1)})}function F(a){"all"!==a.settings.preserveSelectionOnMove||a.settings.moveOnSelect?"moved"!==a.settings.preserveSelectionOnMove||a.settings.moveOnSelect||J(a,1):(J(a,1),J(a,2)),a.elements.select1.find("option:selected").each(function(g,f){var b=V(f);b.data("filtered1")||O(a,b.data("original-index"),!0)}),L(a),Q(a),a.settings.sortByInputOrder?I(a.elements.select2):H(a.elements.select2)}function E(a){"all"!==a.settings.preserveSelectionOnMove||a.settings.moveOnSelect?"moved"!==a.settings.preserveSelectionOnMove||a.settings.moveOnSelect||J(a,2):(J(a,1),J(a,2)),a.elements.select2.find("option:selected").each(function(g,f){var b=V(f);b.data("filtered2")||O(a,b.data("original-index"),!1)}),L(a),Q(a),H(a.elements.select1),a.settings.sortByInputOrder&&I(a.elements.select2)}function D(a){"all"!==a.settings.preserveSelectionOnMove||a.settings.moveOnSelect?"moved"!==a.settings.preserveSelectionOnMove||a.settings.moveOnSelect||J(a,1):(J(a,1),J(a,2)),a.element.find("option").each(function(g,f){var b=V(f);b.data("filtered1")||(b.prop("selected",!0),b.attr("data-sortindex",a.sortIndex),a.sortIndex++)}),L(a),Q(a)}function C(a){"all"!==a.settings.preserveSelectionOnMove||a.settings.moveOnSelect?"moved"!==a.settings.preserveSelectionOnMove||a.settings.moveOnSelect||J(a,2):(J(a,1),J(a,2)),a.element.find("option").each(function(e,g){var f=V(g);f.data("filtered2")||(f.prop("selected",!1),f.removeAttr("data-sortindex"))}),L(a),Q(a)}function B(b){b.elements.form.submit(function(a){b.elements.filterInput1.is(":focus")?(a.preventDefault(),b.elements.filterInput1.focusout()):b.elements.filterInput2.is(":focus")&&(a.preventDefault(),b.elements.filterInput2.focusout())}),b.element.on("bootstrapDualListbox.refresh",function(a,d){b.refresh(d)}),b.elements.filterClear1.on("click",function(){b.setNonSelectedFilter("",!0)}),b.elements.filterClear2.on("click",function(){b.setSelectedFilter("",!0)}),b.settings.eventMoveOverride===!1&&b.elements.moveButton.on("click",function(){F(b)}),b.settings.eventMoveAllOverride===!1&&b.elements.moveAllButton.on("click",function(){D(b)}),b.settings.eventRemoveOverride===!1&&b.elements.removeButton.on("click",function(){E(b)}),b.settings.eventRemoveAllOverride===!1&&b.elements.removeAllButton.on("click",function(){C(b)}),b.elements.filterInput1.on("change keyup",function(){K(b,1)}),b.elements.filterInput2.on("change keyup",function(){K(b,2)})}var A="bootstrapDualListbox",z={bootstrap2Compatible:!1,filterTextClear:"show all",filterPlaceHolder:"Filter",moveSelectedLabel:"Move selected",moveAllLabel:"Move all",removeSelectedLabel:"Remove selected",removeAllLabel:"Remove all",moveOnSelect:!0,preserveSelectionOnMove:!1,selectedListLabel:!1,nonSelectedListLabel:!1,helperSelectNamePostfix:"_helper",selectorMinimalHeight:100,showFilterInputs:!0,nonSelectedFilter:"",selectedFilter:"",infoText:"Showing all {0}",infoTextFiltered:'<span class="label label-warning">Filtered</span> {0} from {1}',infoTextEmpty:"Empty list",filterOnValues:!1,sortByInputOrder:!1,eventMoveOverride:!1,eventMoveAllOverride:!1,eventRemoveOverride:!1,eventRemoveAllOverride:!1},y=/android/i.test(navigator.userAgent.toLowerCase());R.prototype={init:function(){this.container=V('<div class="bootstrap-duallistbox-container"> <div class="box1">   <label></label>   <span class="info-container">     <span class="info"></span>     <button type="button" class="btn clear1 pull-right"></button>   </span>   <input class="filter" type="text">   <div class="btn-group buttons">     <button type="button" class="btn moveall">       <i></i>       <i></i>     </button>     <button type="button" class="btn move">       <i></i>     </button>   </div>   <select multiple="multiple"></select> </div> <div class="box2">   <label></label>   <span class="info-container">     <span class="info"></span>     <button type="button" class="btn clear2 pull-right"></button>   </span>   <input class="filter" type="text">   <div class="btn-group buttons">     <button type="button" class="btn remove">       <i></i>     </button>     <button type="button" class="btn removeall">       <i></i>       <i></i>     </button>   </div>   <select multiple="multiple"></select> </div></div>').insertBefore(this.element),this.elements={originalSelect:this.element,box1:V(".box1",this.container),box2:V(".box2",this.container),filterInput1:V(".box1 .filter",this.container),filterInput2:V(".box2 .filter",this.container),filterClear1:V(".box1 .clear1",this.container),filterClear2:V(".box2 .clear2",this.container),label1:V(".box1 > label",this.container),label2:V(".box2 > label",this.container),info1:V(".box1 .info",this.container),info2:V(".box2 .info",this.container),select1:V(".box1 select",this.container),select2:V(".box2 select",this.container),moveButton:V(".box1 .move",this.container),removeButton:V(".box2 .remove",this.container),moveAllButton:V(".box1 .moveall",this.container),removeAllButton:V(".box2 .removeall",this.container),form:V(V(".box1 .filter",this.container)[0].form)},this.originalSelectName=this.element.attr("name")||"";var a="bootstrap-duallistbox-nonselected-list_"+this.originalSelectName,d="bootstrap-duallistbox-selected-list_"+this.originalSelectName;return this.elements.select1.attr("id",a),this.elements.select2.attr("id",d),this.elements.label1.attr("for",a),this.elements.label2.attr("for",d),this.selectedElements=0,this.sortIndex=0,this.elementCount=0,this.setBootstrap2Compatible(this.settings.bootstrap2Compatible),this.setFilterTextClear(this.settings.filterTextClear),this.setFilterPlaceHolder(this.settings.filterPlaceHolder),this.setMoveSelectedLabel(this.settings.moveSelectedLabel),this.setMoveAllLabel(this.settings.moveAllLabel),this.setRemoveSelectedLabel(this.settings.removeSelectedLabel),this.setRemoveAllLabel(this.settings.removeAllLabel),this.setMoveOnSelect(this.settings.moveOnSelect),this.setPreserveSelectionOnMove(this.settings.preserveSelectionOnMove),this.setSelectedListLabel(this.settings.selectedListLabel),this.setNonSelectedListLabel(this.settings.nonSelectedListLabel),this.setHelperSelectNamePostfix(this.settings.helperSelectNamePostfix),this.setSelectOrMinimalHeight(this.settings.selectorMinimalHeight),P(this),this.setShowFilterInputs(this.settings.showFilterInputs),this.setNonSelectedFilter(this.settings.nonSelectedFilter),this.setSelectedFilter(this.settings.selectedFilter),this.setInfoText(this.settings.infoText),this.setInfoTextFiltered(this.settings.infoTextFiltered),this.setInfoTextEmpty(this.settings.infoTextEmpty),this.setFilterOnValues(this.settings.filterOnValues),this.setSortByInputOrder(this.settings.sortByInputOrder),this.setEventMoveOverride(this.settings.eventMoveOverride),this.setEventMoveAllOverride(this.settings.eventMoveAllOverride),this.setEventRemoveOverride(this.settings.eventRemoveOverride),this.setEventRemoveAllOverride(this.settings.eventRemoveAllOverride),this.element.hide(),B(this),L(this),this.element},setBootstrap2Compatible:function(d,c){return this.settings.bootstrap2Compatible=d,d?(this.container.removeClass("row").addClass("row-fluid bs2compatible"),this.container.find(".box1, .box2").removeClass("col-md-6").addClass("span6"),this.container.find(".clear1, .clear2").removeClass("btn-primary btn-xs").addClass("btn-mini"),this.container.find("input, select").removeClass("form-control"),this.container.find(".btn").removeClass("btn-primary"),this.container.find(".moveall > i, .move > i").removeClass("ft-chevron-right").addClass("icon-arrow-right"),this.container.find(".removeall > i, .remove > i").removeClass("ft-chevron-left").addClass("icon-arrow-left")):(this.container.removeClass("row-fluid bs2compatible").addClass("row"),this.container.find(".box1, .box2").removeClass("span6").addClass("col-md-6"),this.container.find(".clear1, .clear2").removeClass("btn-mini").addClass("btn-primary btn-xs"),this.container.find("input, select").addClass("form-control"),this.container.find(".btn").addClass("btn-primary"),this.container.find(".moveall > i, .move > i").removeClass("icon-arrow-right").addClass("ft-chevron-right"),this.container.find(".removeall > i, .remove > i").removeClass("icon-arrow-left").addClass("ft-chevron-left")),c&&L(this),this.element},setFilterTextClear:function(d,c){return this.settings.filterTextClear=d,this.elements.filterClear1.html(d),this.elements.filterClear2.html(d),c&&L(this),this.element},setFilterPlaceHolder:function(d,c){return this.settings.filterPlaceHolder=d,this.elements.filterInput1.attr("placeholder",d),this.elements.filterInput2.attr("placeholder",d),c&&L(this),this.element},setMoveSelectedLabel:function(d,c){return this.settings.moveSelectedLabel=d,this.elements.moveButton.attr("title",d),c&&L(this),this.element},setMoveAllLabel:function(d,c){return this.settings.moveAllLabel=d,this.elements.moveAllButton.attr("title",d),c&&L(this),this.element},setRemoveSelectedLabel:function(d,c){return this.settings.removeSelectedLabel=d,this.elements.removeButton.attr("title",d),c&&L(this),this.element},setRemoveAllLabel:function(d,c){return this.settings.removeAllLabel=d,this.elements.removeAllButton.attr("title",d),c&&L(this),this.element},setMoveOnSelect:function(e,d){if(y&&(e=!0),this.settings.moveOnSelect=e,this.settings.moveOnSelect){this.container.addClass("moveonselect");var f=this;this.elements.select1.on("change",function(){F(f)}),this.elements.select2.on("change",function(){E(f)})}else{this.container.removeClass("moveonselect"),this.elements.select1.off("change"),this.elements.select2.off("change")}return d&&L(this),this.element},setPreserveSelectionOnMove:function(d,c){return y&&(d=!1),this.settings.preserveSelectionOnMove=d,c&&L(this),this.element},setSelectedListLabel:function(d,c){return this.settings.selectedListLabel=d,d?this.elements.label2.show().html(d):this.elements.label2.hide().html(d),c&&L(this),this.element},setNonSelectedListLabel:function(d,c){return this.settings.nonSelectedListLabel=d,d?this.elements.label1.show().html(d):this.elements.label1.hide().html(d),c&&L(this),this.element},setHelperSelectNamePostfix:function(d,c){return this.settings.helperSelectNamePostfix=d,d?(this.elements.select1.attr("name",this.originalSelectName+d+"1"),this.elements.select2.attr("name",this.originalSelectName+d+"2")):(this.elements.select1.removeAttr("name"),this.elements.select2.removeAttr("name")),c&&L(this),this.element},setSelectOrMinimalHeight:function(e,d){this.settings.selectorMinimalHeight=e;var f=this.element.height();return this.element.height()<e&&(f=e),this.elements.select1.height(f),this.elements.select2.height(f),d&&L(this),this.element},setShowFilterInputs:function(d,c){return d?(this.elements.filterInput1.show(),this.elements.filterInput2.show()):(this.setNonSelectedFilter(""),this.setSelectedFilter(""),L(this),this.elements.filterInput1.hide(),this.elements.filterInput2.hide()),this.settings.showFilterInputs=d,c&&L(this),this.element},setNonSelectedFilter:function(d,c){return this.settings.showFilterInputs?(this.settings.nonSelectedFilter=d,this.elements.filterInput1.val(d),c&&L(this),this.element):void 0},setSelectedFilter:function(d,c){return this.settings.showFilterInputs?(this.settings.selectedFilter=d,this.elements.filterInput2.val(d),c&&L(this),this.element):void 0},setInfoText:function(d,c){return this.settings.infoText=d,c&&L(this),this.element},setInfoTextFiltered:function(d,c){return this.settings.infoTextFiltered=d,c&&L(this),this.element},setInfoTextEmpty:function(d,c){return this.settings.infoTextEmpty=d,c&&L(this),this.element},setFilterOnValues:function(d,c){return this.settings.filterOnValues=d,c&&L(this),this.element},setSortByInputOrder:function(d,c){return this.settings.sortByInputOrder=d,c&&L(this),this.element},setEventMoveOverride:function(d,c){return this.settings.eventMoveOverride=d,c&&L(this),this.element},setEventMoveAllOverride:function(d,c){return this.settings.eventMoveAllOverride=d,c&&L(this),this.element},setEventRemoveOverride:function(d,c){return this.settings.eventRemoveOverride=d,c&&L(this),this.element},setEventRemoveAllOverride:function(d,c){return this.settings.eventRemoveAllOverride=d,c&&L(this),this.element},getContainer:function(){return this.container},refresh:function(b){P(this),b?G(this):(J(this,1),J(this,2)),L(this)},destroy:function(){return this.container.remove(),this.element.show(),V.data(this,"plugin_"+A,null),this.element}},V.fn[A]=function(a){var e=arguments;if(a===S||"object"==typeof a){return this.each(function(){V(this).is("select")?V.data(this,"plugin_"+A)||V.data(this,"plugin_"+A,new R(this,a)):V(this).find("select").each(function(f,b){V(b).bootstrapDualListbox(a)})})}if("string"==typeof a&&"_"!==a[0]&&"init"!==a){var d;return this.each(function(){var b=V.data(this,"plugin_"+A);b instanceof R&&"function"==typeof b[a]&&(d=b[a].apply(b,Array.prototype.slice.call(e,1)))}),d!==S?d:this}}}(jQuery,window,document);