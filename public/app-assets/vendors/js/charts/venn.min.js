(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?a(exports):typeof define==="function"&&define.amd?define("venn",["exports"],a):a((b.venn={}))}(this,function(R){function P(Z,af,ae,ai){ai=ai||{};var ac=ai.maxIterations||100,ad=ai.tolerance||1e-10,ab=Z(af),aa=Z(ae),ah=ae-af;if(ab*aa>0){throw"Initial bisect points must have opposite signs"}if(ab===0){return af}if(aa===0){return ae}for(var Y=0;Y<ac;++Y){ah/=2;var ag=af+ah,X=Z(ag);if(X*ab>=0){af=ag}if((Math.abs(ah)<ad)||(X===0)){return ag}}return af+ah}function B(X){var Z=new Array(X);for(var Y=0;Y<X;++Y){Z[Y]=0}return Z}function U(X,Y){return B(X).map(function(){return B(Y)})}function W(Y,X){var Z=0;for(var aa=0;aa<Y.length;++aa){Z+=Y[aa]*X[aa]}return Z}function g(X){return Math.sqrt(W(X,X))}function o(X,Z){for(var Y=0;Y<X.length;++Y){X[Y]*=Z}}function u(aa,Y,ac,X,ab){for(var Z=0;Z<aa.length;++Z){aa[Z]=Y*ac[Z]+X*ab[Z]}}function Q(at,au,ae){ae=ae||{};var am=ae.maxIterations||au.length*200,af=ae.nonZeroDelta||1.1,Y=ae.zeroDelta||0.001,az=ae.minErrorDelta||0.000001,ac=ae.minErrorDelta||0.00001,Z=ae.rho||1,ay=ae.chi||2,aw=ae.psi||-0.5,ak=ae.sigma||0.5,ab=ae.callback,aa,av;var ah=au.length,ai=new Array(ah+1);ai[0]=au;ai[0].fx=at(au);for(var ar=0;ar<ah;++ar){var ao=au.slice();ao[ar]=ao[ar]?ao[ar]*af:Y;ai[ar+1]=ao;ai[ar+1].fx=at(ao)}var al=function(aB,aA){return aB.fx-aA.fx};var aj=au.slice(),ax=au.slice(),ag=au.slice(),ap=au.slice();for(var X=0;X<am;++X){ai.sort(al);if(ab){ab(ai)}aa=0;for(ar=0;ar<ah;++ar){aa=Math.max(aa,Math.abs(ai[0][ar]-ai[1][ar]))}if((Math.abs(ai[0].fx-ai[ah].fx)<az)&&(aa<ac)){break}for(ar=0;ar<ah;++ar){aj[ar]=0;for(var aq=0;aq<ah;++aq){aj[ar]+=ai[aq][ar]}aj[ar]/=ah}var an=ai[ah];u(ax,1+Z,aj,-Z,an);ax.fx=at(ax);if(ax.fx<=ai[0].fx){u(ap,1+ay,aj,-ay,an);ap.fx=at(ap);if(ap.fx<ax.fx){av=ai[ah];ai[ah]=ap;ap=av}else{av=ai[ah];ai[ah]=ax;ax=av}}else{if(ax.fx>=ai[ah-1].fx){var ad=false;if(ax.fx>an.fx){u(ag,1+aw,aj,-aw,an);ag.fx=at(ag);if(ag.fx<an.fx){av=ai[ah];ai[ah]=ag;ag=av}else{ad=true}}else{u(ag,1-aw*Z,aj,aw*Z,an);ag.fx=at(ag);if(ag.fx<=ax.fx){av=ai[ah];ai[ah]=ag;ag=av}else{ad=true}}if(ad){for(ar=1;ar<ai.length;++ar){u(ai[ar],1-ak,ai[0],ak,ai[ar]);ai[ar].fx=at(ai[ar])}}}else{av=ai[ah];ai[ah]=ax;ax=av}}}ai.sort(al);return{f:ai[0].fx,solution:ai[0]}}function E(ae,ag,Y){var af={x:ag.slice(),fx:0,fxprime:ag.slice()},ad={x:ag.slice(),fx:0,fxprime:ag.slice()},X=ag.slice(),aa,ak,ai=1,ah;Y=Y||{};ah=Y.maxIterations||ag.length*5;af.fx=ae(af.x,af.fxprime);aa=af.fxprime.slice();o(aa,-1);for(var ac=0;ac<ah;++ac){if(Y.history){Y.history.push({x:af.x.slice(),fx:af.fx,fxprime:af.fxprime.slice()})}ai=r(ae,aa,af,ad,ai);if(!ai){for(var Z=0;Z<aa.length;++Z){aa[Z]=-1*af.fxprime[Z]}}else{u(X,1,ad.fxprime,-1,af.fxprime);var aj=W(af.fxprime,af.fxprime),ab=Math.max(0,W(X,ad.fxprime)/aj);u(aa,ab,aa,-1,ad.fxprime);ak=af;af=ad;ad=ak}if(g(af.fxprime)<=0.00001){break}}if(Y.history){Y.history.push({x:af.x.slice(),fx:af.fx,fxprime:af.fxprime.slice()})}return af}var h=0.000001;var f=0.1;function r(ad,aa,ae,ac,ah){var ag=ae.fx,ab=W(ae.fxprime,aa),af=ag,ai=ag,Z=ab,X=0;ah=ah||1;function aj(al,an,ak){for(var am=0;am<16;++am){ah=(al+an)/2;u(ac.x,1,ae.x,ah,aa);af=ac.fx=ad(ac.x,ac.fxprime);Z=W(ac.fxprime,aa);if((af>(ag+h*ah*ab))||(af>=ak)){an=ah}else{if(Math.abs(Z)<=-f*ab){return ah}if(Z*(an-al)>=0){an=al}al=ah;ak=af}}return 0}for(var Y=0;Y<10;++Y){u(ac.x,1,ae.x,ah,aa);af=ac.fx=ad(ac.x,ac.fxprime);Z=W(ac.fxprime,aa);if((af>(ag+h*ah*ab))||(Y&&(af>=ai))){return aj(X,ah,ai)}if(Math.abs(Z)<=-f*ab){return ah}if(Z>=0){return aj(ah,X,af)}ai=af;X=ah;ah*=2}return 0}var N=1e-10;function w(ah,ar){var af=M(ah);var an=af.filter(function(av){return S(av,ah)});var ao=0,ag=0,am=[],al;if(an.length>1){var ap=H(an);for(al=0;al<an.length;++al){var ad=an[al];ad.angle=Math.atan2(ad.x-ap.x,ad.y-ap.y)}an.sort(function(aw,av){return av.angle-aw.angle});var Y=an[an.length-1];for(al=0;al<an.length;++al){var Z=an[al];ag+=(Y.x+Z.x)*(Z.y-Y.y);var ab={x:(Z.x+Y.x)/2,y:(Z.y+Y.y)/2},ac=null;for(var ai=0;ai<Z.parentIndex.length;++ai){if(Y.parentIndex.indexOf(Z.parentIndex[ai])>-1){var aa=ah[Z.parentIndex[ai]],au=Math.atan2(Z.x-aa.x,Z.y-aa.y),at=Math.atan2(Y.x-aa.x,Y.y-aa.y);var ak=(at-au);if(ak<0){ak+=2*Math.PI}var aq=at-ak/2,ae=y(ab,{x:aa.x+aa.radius*Math.sin(aq),y:aa.y+aa.radius*Math.cos(aq)});if((ac===null)||(ac.width>ae)){ac={circle:aa,width:ae,p1:Z,p2:Y}}}}if(ac!==null){am.push(ac);ao+=c(ac.circle.radius,ac.width);Y=Z}}}else{var X=ah[0];for(al=1;al<ah.length;++al){if(ah[al].radius<X.radius){X=ah[al]}}var aj=false;for(al=0;al<ah.length;++al){if(y(ah[al],X)>Math.abs(X.radius-ah[al].radius)){aj=true;break}}if(aj){ao=ag=0}else{ao=X.radius*X.radius*Math.PI;am.push({circle:X,p1:{x:X.x,y:X.y+X.radius},p2:{x:X.x-N,y:X.y+X.radius},width:X.radius*2})}}ag/=2;if(ar){ar.area=ao+ag;ar.arcArea=ao;ar.polygonArea=ag;ar.arcs=am;ar.innerPoints=an;ar.intersectionPoints=af}return ao+ag}function S(X,Z){for(var Y=0;Y<Z.length;++Y){if(y(X,Z[Y])>Z[Y].radius+N){return false}}return true}function M(ad){var aa=[];for(var ab=0;ab<ad.length;++ab){for(var Z=ab+1;Z<ad.length;++Z){var X=A(ad[ab],ad[Z]);for(var Y=0;Y<X.length;++Y){var ac=X[Y];ac.parentIndex=[ab,Z];aa.push(ac)}}}return aa}function x(Y,X){var Z=Math.sqrt(Y*Y-X*X);return X*Z+Y*Y*Math.atan2(X,Z)}function c(Y,X){return x(Y,X-Y)-x(Y,-Y)}function y(Y,X){return Math.sqrt((Y.x-X.x)*(Y.x-X.x)+(Y.y-X.y)*(Y.y-X.y))}function e(aa,Z,ab){if(ab>=aa+Z){return 0}if(ab<=Math.abs(aa-Z)){return Math.PI*Math.min(aa,Z)*Math.min(aa,Z)}var Y=aa-(ab*ab-Z*Z+aa*aa)/(2*ab),X=Z-(ab*ab-aa*aa+Z*Z)/(2*ab);return c(aa,Y)+c(Z,X)}function A(ah,ag){var ad=y(ah,ag),ab=ah.radius,aa=ag.radius;if((ad>=(ab+aa))||(ad<=Math.abs(ab-aa))){return[]}var ae=(ab*ab-aa*aa+ad*ad)/(2*ad),ac=Math.sqrt(ab*ab-ae*ae),Z=ah.x+ae*(ag.x-ah.x)/ad,af=ah.y+ae*(ag.y-ah.y)/ad,Y=-(ag.y-ah.y)*(ac/ad),X=-(ag.x-ah.x)*(ac/ad);return[{x:Z+Y,y:af-X},{x:Z-Y,y:af+X}]}function H(Z){var X={x:0,y:0};for(var Y=0;Y<Z.length;++Y){X.x+=Z[Y].x;X.y+=Z[Y].y}X.x/=Z.length;X.y/=Z.length;return X}function L(X,ag){ag=ag||{};ag.maxIterations=ag.maxIterations||500;var Z=ag.initialLayout||t;X=K(X);var ad=Z(X);var ae=[],aa=[],ah;for(ah in ad){if(ad.hasOwnProperty(ah)){ae.push(ad[ah].x);ae.push(ad[ah].y);aa.push(ah)}}var Y=0;var af=Q(function(ai){Y+=1;var ak={};for(var aj=0;aj<aa.length;++aj){var al=aa[aj];ak[al]={x:ai[2*aj],y:ai[2*aj+1],radius:ad[al].radius}}return b(ak,X)},ae,ag);var ac=af.solution;for(var ab=0;ab<aa.length;++ab){ah=aa[ab];ad[ah].x=ac[2*ab];ad[ah].y=ac[2*ab+1]}return ad}var p=1e-10;function F(Z,Y,X){if(Math.min(Z,Y)*Math.min(Z,Y)*Math.PI<=X+p){return Math.abs(Z-Y)}return P(function(aa){return e(Z,Y,aa)-X},0,Z+Y)}function K(Z){Z=Z.slice();var ac=[],ae={},ab,aa,Y,X;for(ab=0;ab<Z.length;++ab){var ad=Z[ab];if(ad.sets.length==1){ac.push(ad.sets[0])}else{if(ad.sets.length==2){Y=ad.sets[0];X=ad.sets[1];ae[[Y,X]]=true;ae[[X,Y]]=true}}}ac.sort(function(ag,af){return ag>af});for(ab=0;ab<ac.length;++ab){Y=ac[ab];for(aa=ab+1;aa<ac.length;++aa){X=ac[aa];if(!([Y,X] in ae)){Z.push({sets:[Y,X],size:0})}}}return Z}function i(Y,Z,aa){var X=U(Z.length,Z.length),ab=U(Z.length,Z.length);Y.filter(function(ac){return ac.sets.length==2}).map(function(ag){var af=aa[ag.sets[0]],ae=aa[ag.sets[1]],ad=Math.sqrt(Z[af].size/Math.PI),ac=Math.sqrt(Z[ae].size/Math.PI),ai=F(ad,ac,ag.size);X[af][ae]=X[ae][af]=ai;var ah=0;if(ag.size+1e-10>=Math.min(Z[af].size,Z[ae].size)){ah=1}else{if(ag.size<=1e-10){ah=-1}}ab[af][ae]=ab[ae][af]=ah});return{distances:X,constraints:ab}}function I(aj,Z,ai,ab){var am=0,ae;for(ae=0;ae<Z.length;++ae){Z[ae]=0}for(ae=0;ae<ai.length;++ae){var ah=aj[2*ae],ac=aj[2*ae+1];for(var ad=ae+1;ad<ai.length;++ad){var ag=aj[2*ad],aa=aj[2*ad+1],af=ai[ae][ad],Y=ab[ae][ad];var al=(ag-ah)*(ag-ah)+(aa-ac)*(aa-ac),X=Math.sqrt(al),ak=al-af*af;if(((Y>0)&&(X<=af))||((Y<0)&&(X>=af))){continue}am+=2*ak*ak;Z[2*ae]+=4*ak*(ah-ag);Z[2*ae+1]+=4*ak*(ac-aa);Z[2*ad]+=4*ak*(ag-ah);Z[2*ad+1]+=4*ak*(aa-ac)}}return am}function t(X,ac){var Z=D(X,ac);if(X.length>=8){var ab=V(X,ac),Y=b(ab,X),aa=b(Z,X);if(Y+1e-8<aa){Z=ab}}return Z}function V(ac,ao){ao=ao||{};var aj=ao.restarts||10;var X=[],af={},am;for(am=0;am<ac.length;++am){var an=ac[am];if(an.sets.length==1){af[an.sets[0]]=X.length;X.push(an)}}var Y=i(ac,X,af),ab=Y.distances,al=Y.constraints;var ad=g(ab.map(g))/(ab.length);ab=ab.map(function(ap){return ap.map(function(aq){return aq/ad})});var ag=function(ap,aq){return I(ap,aq,ab,al)};var aa,ai;for(am=0;am<aj;++am){var Z=B(ab.length*2).map(Math.random);ai=E(ag,Z,ao);if(!aa||(ai.fx<aa.fx)){aa=ai}}var ae=aa.x;var ak={};for(am=0;am<X.length;++am){var ah=X[am];ak[ah.sets[0]]={x:ae[2*am]*ad,y:ae[2*am+1]*ad,radius:Math.sqrt(ah.size/Math.PI)}}if(ao.history){for(am=0;am<ao.history.length;++am){o(ao.history[am].x,ad)}}return ak}function D(af){var at={},ab={},ak;for(var ax=0;ax<af.length;++ax){var ay=af[ax];if(ay.sets.length==1){ak=ay.sets[0];at[ak]={x:10000000000,y:10000000000,rowid:at.length,size:ay.size,radius:Math.sqrt(ay.size/Math.PI)};ab[ak]=[]}}af=af.filter(function(aC){return aC.sets.length==2});for(ax=0;ax<af.length;++ax){var am=af[ax];var aj=am.hasOwnProperty("weight")?am.weight:1;var ae=am.sets[0],az=am.sets[1];if(am.size+p>=Math.min(at[ae].size,at[az].size)){aj=0}ab[ae].push({set:az,size:am.size,weight:aj});ab[az].push({set:ae,size:am.size,weight:aj})}var ah=[];for(ak in ab){if(ab.hasOwnProperty(ak)){var al=0;for(ax=0;ax<ab[ak].length;++ax){al+=ab[ak][ax].size*ab[ak][ax].weight}ah.push({set:ak,size:al})}}function an(aD,aC){return aC.size-aD.size}ah.sort(an);var Y={};function ai(aC){return aC.set in Y}function ar(aC,aD){at[aD].x=aC.x;at[aD].y=aC.y;Y[aD]=true}ar({x:0,y:0},ah[0].set);for(ax=1;ax<ah.length;++ax){var av=ah[ax].set,X=ab[av].filter(ai);ak=at[av];X.sort(an);if(X.length===0){throw"ERROR: missing pairwise overlap information"}var aw=[];for(var au=0;au<X.length;++au){var ac=at[X[au].set],aB=F(ak.radius,ac.radius,X[au].size);aw.push({x:ac.x+aB,y:ac.y});aw.push({x:ac.x-aB,y:ac.y});aw.push({y:ac.y+aB,x:ac.x});aw.push({y:ac.y-aB,x:ac.x});for(var aq=au+1;aq<X.length;++aq){var aa=at[X[aq].set],aA=F(ak.radius,aa.radius,X[aq].size);var ap=A({x:ac.x,y:ac.y,radius:aB},{x:aa.x,y:aa.y,radius:aA});for(var ao=0;ao<ap.length;++ao){aw.push(ap[ao])}}}var Z=1e+50,ag=aw[0];for(au=0;au<aw.length;++au){at[av].x=aw[au].x;at[av].y=aw[au].y;var ad=b(at,af);if(ad<Z){Z=ad;ag=aw[au]}}ar(ag,av)}return at}function b(ae,Y){var Z=0;function aa(ah){return ah.map(function(ai){return ae[ai]})}for(var ac=0;ac<Y.length;++ac){var X=Y[ac],af;if(X.sets.length==1){continue}else{if(X.sets.length==2){var ab=ae[X.sets[0]],ag=ae[X.sets[1]];af=e(ab.radius,ag.radius,y(ab,ag))}else{af=w(aa(X.sets))}}var ad=X.hasOwnProperty("weight")?X.weight:1;Z+=ad*(af-X.size)*(af-X.size)}return Z}function q(aa,X,ai){if(ai===null){aa.sort(function(am,al){return al.radius-am.radius})}else{aa.sort(ai)}var Z;if(aa.length>0){var ah=aa[0].x,af=aa[0].y;for(Z=0;Z<aa.length;++Z){aa[Z].x-=ah;aa[Z].y-=af}}if(aa.length>1){var aj=Math.atan2(aa[1].x,aa[1].y)-X,ad=Math.cos(aj),ak=Math.sin(aj),ag,ae;for(Z=0;Z<aa.length;++Z){ag=aa[Z].x;ae=aa[Z].y;aa[Z].x=ad*ag-ak*ae;aa[Z].y=ak*ag+ad*ae}}if(aa.length>2){var Y=Math.atan2(aa[2].x,aa[2].y)-X;while(Y<0){Y+=2*Math.PI}while(Y>2*Math.PI){Y-=2*Math.PI}if(Y>Math.PI){var ab=aa[1].y/(1e-10+aa[1].x);for(Z=0;Z<aa.length;++Z){var ac=(aa[Z].x+ab*aa[Z].y)/(1+ab*ab);aa[Z].x=2*ac-aa[Z].x;aa[Z].y=2*ac*ab-aa[Z].y}}}}function j(aa){aa.map(function(ag){ag.parent=ag});function ad(ag){if(ag.parent!==ag){ag.parent=ad(ag.parent)}return ag.parent}function ab(ag,aj){var ah=ad(ag),ai=ad(aj);ah.parent=ai}for(var Z=0;Z<aa.length;++Z){for(var Y=Z+1;Y<aa.length;++Y){var X=aa[Z].radius+aa[Y].radius;if(y(aa[Z],aa[Y])+1e-10<X){ab(aa[Y],aa[Z])}}}var ae={},af;for(Z=0;Z<aa.length;++Z){af=ad(aa[Z]).parent.setid;if(!(af in ae)){ae[af]=[]}ae[af].push(aa[Z])}aa.map(function(ag){delete ag.parent});var ac=[];for(af in ae){if(ae.hasOwnProperty(af)){ac.push(ae[af])}}return ac}function m(Y){var X=function(ab){var Z=Math.max.apply(null,Y.map(function(ac){return ac[ab]+ac.radius})),aa=Math.min.apply(null,Y.map(function(ac){return ac[ab]-ac.radius}));return{max:Z,min:aa}};return{xRange:X("x"),yRange:X("y")}}function G(ag,Y,aj){if(Y===null){Y=Math.PI/2}var ad=[],aa,ak;for(ak in ag){if(ag.hasOwnProperty(ak)){var ab=ag[ak];ad.push({x:ab.x,y:ab.y,radius:ab.radius,setid:ak})}}var ai=j(ad);for(aa=0;aa<ai.length;++aa){q(ai[aa],Y,aj);var X=m(ai[aa]);ai[aa].size=(X.xRange.max-X.xRange.min)*(X.yRange.max-X.yRange.min);ai[aa].bounds=X}ai.sort(function(am,al){return al.size-am.size});ad=ai[0];var Z=ad.bounds;var ah=(Z.xRange.max-Z.xRange.min)/50;function af(al,ap,am){if(!al){return}var ar=al.bounds,aq,at,ao;if(ap){aq=Z.xRange.max-ar.xRange.min+ah}else{aq=Z.xRange.max-ar.xRange.max;ao=(ar.xRange.max-ar.xRange.min)/2-(Z.xRange.max-Z.xRange.min)/2;if(ao<0){aq+=ao}}if(am){at=Z.yRange.max-ar.yRange.min+ah}else{at=Z.yRange.max-ar.yRange.max;ao=(ar.yRange.max-ar.yRange.min)/2-(Z.yRange.max-Z.yRange.min)/2;if(ao<0){at+=ao}}for(var an=0;an<al.length;++an){al[an].x+=aq;al[an].y+=at;ad.push(al[an])}}var ac=1;while(ac<ai.length){af(ai[ac],true,false);af(ai[ac+1],false,true);af(ai[ac+2],true,true);ac+=3;Z=m(ad)}var ae={};for(aa=0;aa<ad.length;++aa){ae[ad[aa].setid]=ad[aa]}return ae}function s(ac,ah,af,ad){var aj=[],aa=[];for(var al in ac){if(ac.hasOwnProperty(al)){aa.push(al);aj.push(ac[al])}}ah-=2*ad;af-=2*ad;var Y=m(aj),ae=Y.xRange,ai=Y.yRange,am=ah/(ae.max-ae.min),an=af/(ai.max-ai.min),ab=Math.min(an,am),ao=(ah-(ae.max-ae.min)*ab)/2,Z=(af-(ai.max-ai.min)*ab)/2;var ag={};for(var ak=0;ak<aj.length;++ak){var X=aj[ak];ag[aa[ak]]={radius:ab*X.radius,x:ad+ao+(X.x-ae.min)*ab,y:ad+Z+(X.y-ai.min)*ab}}return ag}function d(){var X=600,aj=350,ah=15,ab=1000,Z=Math.PI/2,ac=true,Y=true,ae=true,ak=null,ai=null,aa=d3.scale.category10(),ad=L;function af(aC){var at=aC.datum();var aB=ad(at);if(ac){aB=G(aB,Z,ai)}var ay=s(aB,X,aj,ah);var aq=C(ay,at);var aw=aC.selectAll("svg").data([ay]);aw.enter().append("svg");aw.attr("width",X).attr("height",aj);var ax={},az=false;aw.selectAll("g").each(function(aE){var aD=d3.select(this).select("path").attr("d");if((aE.sets.length==1)&&aD){az=true;ax[aE.sets[0]]=O(aD)}});var av=function(aD){return function(aE){var aF=aD.sets.map(function(aI){var aH=ax[aI],aG=ay[aI];if(!aH){aH={x:X/2,y:aj/2,radius:1}}if(!aG){aG={x:X/2,y:aj/2,radius:1}}return{x:aH.x*(1-aE)+aG.x*aE,y:aH.y*(1-aE)+aG.y*aE,radius:aH.radius*(1-aE)+aG.radius*aE}});return a(aF)}};var al=aw.selectAll("g").data(at,function(aD){return aD.sets});var aA=al.enter().append("g").attr("class",function(aD){return"venn-area venn-"+(aD.sets.length==1?"circle":"intersection")}).attr("data-venn-sets",function(aD){return aD.sets.join("_")});var ap=aA.append("path"),ao=aA.append("text").attr("class","label").text(function(aD){return ag(aD)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",X/2).attr("y",aj/2);if(ae){ap.style("fill-opacity","0").filter(function(aD){return aD.sets.length==1}).style("fill",function(aD){return aa(ag(aD))}).style("fill-opacity",".25");ao.style("fill",function(aD){return aD.sets.length==1?aa(ag(aD)):"#444"})}var ar=al.transition("venn").duration(az?ab:0);ar.select("path").attrTween("d",av);var an=ar.select("text").text(function(aD){return ag(aD)}).attr("x",function(aD){return Math.floor(aq[aD.sets].x)}).attr("y",function(aD){return Math.floor(aq[aD.sets].y)});if(Y){an.each("end",z(ay,ag))}var am=al.exit().transition("venn").duration(ab).remove();am.select("path").attrTween("d",av);var au=am.select("text").text(function(aD){return ag(aD)}).attr("x",X/2).attr("y",aj/2);if(ak!==null){ao.style("font-size","0px");an.style("font-size",ak);au.style("font-size","0px")}return{circles:ay,textCentres:aq,nodes:al,enter:aA,update:ar,exit:am}}function ag(al){if(al.label){return al.label}if(al.sets.length==1){return""+al.sets[0]}}af.wrap=function(al){if(!arguments.length){return Y}Y=al;return af};af.width=function(al){if(!arguments.length){return X}X=al;return af};af.height=function(al){if(!arguments.length){return aj}aj=al;return af};af.padding=function(al){if(!arguments.length){return ah}ah=al;return af};af.colours=function(al){if(!arguments.length){return aa}aa=al;return af};af.fontSize=function(al){if(!arguments.length){return ak}ak=al;return af};af.duration=function(al){if(!arguments.length){return ab}ab=al;return af};af.layoutFunction=function(al){if(!arguments.length){return ad}ad=al;return af};af.normalize=function(al){if(!arguments.length){return ac}ac=al;return af};af.styled=function(al){if(!arguments.length){return ae}ae=al;return af};af.orientation=function(al){if(!arguments.length){return Z}Z=al;return af};af.orientationOrder=function(al){if(!arguments.length){return ai}ai=al;return af};return af}function z(Y,X){return function(){var an=d3.select(this),ac=an.datum(),aa=Y[ac.sets[0]].radius||50,ak=X(ac)||"";var af=ak.split(/\s+/).reverse(),ai=3,ae=(ak.length+af.length)/ai,Z=af.pop(),ao=[Z],am,ab=0,al=1.1,ah=an.text(null).append("tspan").text(Z);while(true){Z=af.pop();if(!Z){break}ao.push(Z);am=ao.join(" ");ah.text(am);if(am.length>ae&&ah.node().getComputedTextLength()>aa){ao.pop();ah.text(ao.join(" "));ao=[Z];ah=an.append("tspan").text(Z);ab++}}var ad=0.35-ab*al/2,aj=an.attr("x"),ag=an.attr("y");an.selectAll("tspan").attr("x",aj).attr("y",ag).attr("dy",function(aq,ap){return(ad+ap*al)+"em"})}}function v(ab,ac,aa){var Z=ac[0].radius-y(ac[0],ab),Y,X;for(Y=1;Y<ac.length;++Y){X=ac[Y].radius-y(ac[Y],ab);if(X<=Z){Z=X}}for(Y=0;Y<aa.length;++Y){X=y(aa[Y],ab)-aa[Y].radius;if(X<=Z){Z=X}}return Z}function l(Z,ac){var ai=[],ad;for(ad=0;ad<Z.length;++ad){var ah=Z[ad];ai.push({x:ah.x,y:ah.y});ai.push({x:ah.x+ah.radius/2,y:ah.y});ai.push({x:ah.x-ah.radius/2,y:ah.y});ai.push({x:ah.x,y:ah.y+ah.radius/2});ai.push({x:ah.x,y:ah.y-ah.radius/2})}var af=ai[0],ab=v(ai[0],Z,ac);for(ad=1;ad<ai.length;++ad){var aa=v(ai[ad],Z,ac);if(aa>=ab){af=ai[ad];ab=aa}}var ag=Q(function(aj){return -1*v({x:aj[0],y:aj[1]},Z,ac)},[af.x,af.y],{maxIterations:500,minErrorDelta:1e-10}).solution;var ae={x:ag[0],y:ag[1]};var X=true;for(ad=0;ad<Z.length;++ad){if(y(ae,Z[ad])>Z[ad].radius){X=false;break}}for(ad=0;ad<ac.length;++ad){if(y(ae,ac[ad])<ac[ad].radius){X=false;break}}if(!X){if(Z.length==1){ae={x:Z[0].x,y:Z[0].y}}else{var Y={};w(Z,Y);if(Y.arcs.length===0){ae={x:0,y:-1000,disjoint:true}}else{if(Y.arcs.length==1){ae={x:Y.arcs[0].circle.x,y:Y.arcs[0].circle.y}}else{if(ac.length){ae=l(Z,[])}else{ae=H(Y.arcs.map(function(aj){return aj.p1}))}}}}}return ae}function J(ab){var ac={},Z=[];for(var aa in ab){Z.push(aa);ac[aa]=[]}for(var Y=0;Y<Z.length;Y++){var af=ab[Z[Y]];for(var X=Y+1;X<Z.length;++X){var ae=ab[Z[X]],ad=y(af,ae);if(ad+ae.radius<=af.radius+1e-10){ac[Z[X]].push(Z[Y])}else{if(ad+af.radius<=ae.radius+1e-10){ac[Z[Y]].push(Z[X])}}}}return ac}function C(ai,X){var aj={},ak=J(ai);for(var ag=0;ag<X.length;++ag){var Z=X[ag].sets,ah={},aa={};for(var af=0;af<Z.length;++af){ah[Z[af]]=true;var ab=ak[Z[af]];for(var ad=0;ad<ab.length;++ad){aa[ab[ad]]=true}}var ac=[],ae=[];for(var al in ai){if(al in ah){ac.push(ai[al])}else{if(!(al in aa)){ae.push(ai[al])}}}var Y=l(ac,ae);aj[Z]=Y;if(Y.disjoint&&(X[ag].size>0)){console.log("WARNING: area "+Z+" not represented on screen")}}return aj}function n(X,ab){var aa=J(X.selectAll("svg").datum());var Y={};for(var ad=0;ad<ab.sets.length;++ad){var Z=ab.sets[ad];for(var ag in aa){var af=aa[ag];for(var ac=0;ac<af.length;++ac){if(af[ac]==Z){Y[ag]=true;break}}}}function ae(ai){for(var ah=0;ah<ai.length;++ah){if(!(ai[ah] in Y)){return false}}return true}X.selectAll("g").sort(function(ai,ah){if(ai.sets.length!=ah.sets.length){return ai.sets.length-ah.sets.length}if(ai==ab){return ae(ah.sets)?-1:1}if(ah==ab){return ae(ai.sets)?1:-1}return ah.size-ai.size})}function k(X,aa,Z){var Y=[];Y.push("\nM",X,aa);Y.push("\nm",-Z,0);Y.push("\na",Z,Z,0,1,0,Z*2,0);Y.push("\na",Z,Z,0,1,0,-Z*2,0);return Y.join(" ")}function O(Y){var X=Y.split(" ");return{x:parseFloat(X[1]),y:parseFloat(X[2]),radius:-parseFloat(X[4])}}function a(ad){var ac={};w(ad,ac);var X=ac.arcs;if(X.length===0){return"M 0 0"}else{if(X.length==1){var Z=X[0].circle;return k(Z.x,Z.y,Z.radius)}else{var af=["\nM",X[0].p2.x,X[0].p2.y];for(var ab=0;ab<X.length;++ab){var aa=X[ab],Y=aa.circle.radius,ae=aa.width>Y;af.push("\nA",Y,Y,0,ae?1:0,1,aa.p1.x,aa.p1.y)}return af.join(" ")}}}var T="0.2.10";R.version=T;R.fmin=Q;R.minimizeConjugateGradient=E;R.bisect=P;R.intersectionArea=w;R.circleCircleIntersection=A;R.circleOverlap=e;R.circleArea=c;R.distance=y;R.circleIntegral=x;R.venn=L;R.greedyLayout=D;R.scaleSolution=s;R.normalizeSolution=G;R.bestInitialLayout=t;R.lossFunction=b;R.disjointCluster=j;R.distanceFromIntersectArea=F;R.VennDiagram=d;R.wrapText=z;R.computeTextCentres=C;R.computeTextCentre=l;R.sortAreas=n;R.circlePath=k;R.circleFromPath=O;R.intersectionAreaPath=a}));