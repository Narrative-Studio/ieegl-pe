(function(a){"function"===typeof define&&define.amd?define(["jquery","datatables.net","datatables.net-buttons"],function(b){return a(b,window,document)}):"object"===typeof exports?module.exports=function(c,b){c||(c=window);if(!b||!b.fn.dataTable){b=require("datatables.net")(c,b).$}b.fn.dataTable.Buttons||require("datatables.net-buttons")(c,b);return a(b,c,c.document)}:a(jQuery,window,document)})(function(b,f,c,a){f=b.fn.dataTable;b.extend(f.ext.buttons,{colvis:function(d,e){return{extend:"collection",text:function(g){return g.i18n("buttons.colvis","Column visibility")},className:"buttons-colvis",buttons:[{extend:"columnsToggle",columns:e.columns,columnText:e.columnText}]}},columnsToggle:function(d,e){return d.columns(e.columns).indexes().map(function(g){return{extend:"columnToggle",columns:g,columnText:e.columnText}}).toArray()},columnToggle:function(d,e){return{extend:"columnVisibility",columns:e.columns,columnText:e.columnText}},columnsVisibility:function(d,e){return d.columns(e.columns).indexes().map(function(g){return{extend:"columnVisibility",columns:g,visibility:e.visibility,columnText:e.columnText}}).toArray()},columnVisibility:{columns:a,text:function(d,e,g){return g._columnText(d,g)},className:"buttons-columnVisibility",action:function(d,e,h,g){d=e.columns(g.columns);e=d.visible();d.visible(g.visibility!==a?g.visibility:!(e.length&&e[0]))},init:function(d,e,h){var g=this;d.on("column-visibility.dt"+h.namespace,function(i,j){!j.bDestroying&&j.nTable==d.settings()[0].nTable&&g.active(d.column(h.columns).visible())}).on("column-reorder.dt"+h.namespace,function(i,k,j){1===d.columns(h.columns).count()&&("number"===typeof h.columns&&(h.columns=j.mapping[h.columns]),i=d.column(h.columns),g.text(h._columnText(d,h)),g.active(i.visible()))});this.active(d.column(h.columns).visible())},destroy:function(d,e,g){d.off("column-visibility.dt"+g.namespace).off("column-reorder.dt"+g.namespace)},_columnText:function(d,e){var h=d.column(e.columns).index(),g=d.settings()[0].aoColumns[h].sTitle.replace(/\n/g," ").replace(/<br\s*\/?>/gi," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,"");return e.columnText?e.columnText(d,h,g):g}},colvisRestore:{className:"buttons-colvisRestore",text:function(d){return d.i18n("buttons.colvisRestore","Restore visibility")},init:function(d,e,g){g._visOriginal=d.columns().indexes().map(function(h){return d.column(h).visible()}).toArray()},action:function(e,g,i,h){g.columns().every(function(d){d=g.colReorder&&g.colReorder.transpose?g.colReorder.transpose(d,"toOriginal"):d;this.visible(h._visOriginal[d])})}},colvisGroup:{className:"buttons-colvisGroup",action:function(e,g,i,h){g.columns(h.show).visible(!0,!1);g.columns(h.hide).visible(!1,!1);g.columns.adjust()},show:[],hide:[]}});return f.Buttons});