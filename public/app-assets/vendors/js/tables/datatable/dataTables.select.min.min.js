/*!
 Select for DataTables 1.2.3
 2015-2017 SpryMedia Ltd - datatables.net/license/mit
*/
(function(a){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"===typeof exports?module.exports=function(c,b){c||(c=window);if(!b||!b.fn.dataTable){b=require("datatables.net")(c,b).$}return a(b,c,c.document)}:a(jQuery,window,document)})(function(J,F,E,H){function d(g,j,e){var i;i=function(m,p){if(m>p){var o=p,p=m,m=o}var n=!1;return g.columns(":visible").indexes().filter(function(q){q===m&&(n=!0);return q===p?(n=!1,!0):n})};var h=function(m,q){var p=g.rows({search:"applied"}).indexes();if(p.indexOf(m)>p.indexOf(q)){var n=q,q=m,m=n}var o=!1;return p.filter(function(r){r===m&&(o=!0);return r===q?(o=!1,!0):o})};!g.cells({selected:!0}).any()&&!e?(i=i(0,j.column),e=h(0,j.row)):(i=i(e.column,j.column),e=h(e.row,j.row));e=g.cells(e,i).flatten();g.cells(j,{selected:!0}).any()?g.cells(e).deselect():g.cells(e).select()}function w(e){var g=e.settings()[0]._select.selector;J(e.table().container()).off("mousedown.dtSelect",g).off("mouseup.dtSelect",g).off("click.dtSelect",g);J("body").off("click.dtSelect"+e.table().node().id)}function c(g){var i=J(g.table().container()),e=g.settings()[0],h=e._select.selector;i.on("mousedown.dtSelect",h,function(j){if(j.shiftKey||j.metaKey||j.ctrlKey){i.css("-moz-user-select","none").one("selectstart.dtSelect",h,function(){return !1})}}).on("mouseup.dtSelect",h,function(){i.css("-moz-user-select","")}).on("click.dtSelect",h,function(j){var p=g.select.items();if(!F.getSelection||!J.trim(F.getSelection().toString())){var o=g.settings()[0];if(J(j.target).closest("div.dataTables_wrapper")[0]==g.table().container()){var m=g.cell(J(j.target).closest("td, th"));if(m.any()){var n=J.Event("user-select.dt");G(g,n,[p,m,j]);n.isDefaultPrevented()||(n=m.index(),"row"===p?(p=n.row,l(j,g,o,"row",p)):"column"===p?(p=m.index().column,l(j,g,o,"column",p)):"cell"===p&&(p=m.index(),l(j,g,o,"cell",p)),o._select_lastCell=n)}}}});J("body").on("click.dtSelect"+g.table().node().id,function(j){e._select.blurable&&!J(j.target).parents().filter(g.table().container()).length&&(0!==J(j.target).parents("html").length&&!J(j.target).parents("div.DTE").length)&&B(e,!0)})}function G(g,i,e,h){if(!h||g.flatten().length){"string"===typeof i&&(i+=".dt"),e.unshift(g),J(g.table().node()).trigger(i,e)}}function b(h){var m=h.settings()[0];if(m._select.info&&m.aanFeatures.i&&"api"!==h.select.style()){var e=h.rows({selected:!0}).flatten().length,j=h.columns({selected:!0}).flatten().length,i=h.cells({selected:!0}).flatten().length,g=function(n,p,o){n.append(J('<span class="select-item"/>').append(h.i18n("select."+p+"s",{_:"%d "+p+"s selected","0":"",1:"1 "+p+" selected"},o)))};J.each(m.aanFeatures.i,function(q,n){var n=J(n),p=J('<span class="select-info"/>');g(p,"row",e);g(p,"column",j);g(p,"cell",i);var o=n.children("span.select-info");o.length&&o.remove();""!==p.text()&&n.append(p)})}}function a(i,o,e,n){var m=i[o+"s"]({search:"applied"}).indexes(),n=J.inArray(n,m),h=J.inArray(e,m);if(!i[o+"s"]({selected:!0}).any()&&-1===n){m.splice(J.inArray(e,m)+1,m.length)}else{if(n>h){var j=h,h=n,n=j}m.splice(h+1,m.length);m.splice(0,n)}i[o](e,{selected:!0}).any()?(m.splice(J.inArray(e,m),1),i[o+"s"](m).deselect()):i[o+"s"](m).select()}function B(g,h){if(h||"single"===g._select.style){var e=new I.Api(g);e.rows({selected:!0}).deselect();e.columns({selected:!0}).deselect();e.cells({selected:!0}).deselect()}}function l(i,p,h,o,m){var n=p.select.style(),j=p[o](m,{selected:!0}).any();"os"===n?i.ctrlKey||i.metaKey?p[o](m).select(!j):i.shiftKey?"cell"===o?d(p,m,h._select_lastCell||null):a(p,o,m,h._select_lastCell?h._select_lastCell[o]:null):(i=p[o+"s"]({selected:!0}),j&&1===i.flatten().length?p[o](m).deselect():(i.deselect(),p[o](m).select())):"multi+shift"==n?i.shiftKey?"cell"===o?d(p,m,h._select_lastCell||null):a(p,o,m,h._select_lastCell?h._select_lastCell[o]:null):p[o](m).select(!j):p[o](m).select(!j)}function A(e,g){return function(h){return h.i18n("buttons."+e,g)}}function k(e){e=e._eventNamespace;return"draw.dt.DT"+e+" select.dt.DT"+e+" deselect.dt.DT"+e}var I=J.fn.dataTable;I.select={};I.select.version="1.2.3";I.select.init=function(r){var p=r.settings()[0],q=p.oInit.select,o=I.defaults.select,q=q===H?o:q,o="row",n="api",e=!1,s=!0,g="td, th",h="selected",m=!1;p._select={};if(!0===q){n="os",m=!0}else{if("string"===typeof q){n=q,m=!0}else{if(J.isPlainObject(q)&&(q.blurable!==H&&(e=q.blurable),q.info!==H&&(s=q.info),q.items!==H&&(o=q.items),q.style!==H&&(n=q.style,m=!0),q.selector!==H&&(g=q.selector),q.className!==H)){h=q.className}}}r.select.selector(g);r.select.items(o);r.select.style(n);r.select.blurable(e);r.select.info(s);p._select.className=h;J.fn.dataTable.ext.order["select-checkbox"]=function(i,j){return this.api().column(j,{order:"index"}).nodes().map(function(t){return"row"===i._select.items?J(t).parent().hasClass(i._select.className):"cell"===i._select.items?J(t).hasClass(i._select.className):!1})};!m&&J(r.table().node()).hasClass("selectable")&&r.select.style("os")};J.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],function(e,g){I.ext.selector[g.type].push(function(h,j,p){var j=j.selected,q,o=[];if(j===H){return p}for(var m=0,n=p.length;m<n;m++){q=h[g.prop][p[m]],(!0===j&&!0===q._select_selected||!1===j&&!q._select_selected)&&o.push(p[m])}return o})});I.ext.selector.cell.push(function(i,p,h){var p=p.selected,o,m=[];if(p===H){return h}for(var n=0,j=h.length;n<j;n++){o=i.aoData[h[n].row],(!0===p&&o._selected_cells&&!0===o._selected_cells[h[n].column]||!1===p&&(!o._selected_cells||!o._selected_cells[h[n].column]))&&m.push(h[n])}return m});var D=I.Api.register,C=I.Api.registerPlural;D("select()",function(){return this.iterator("table",function(e){I.select.init(new I.Api(e))})});D("select.blurable()",function(e){return e===H?this.context[0]._select.blurable:this.iterator("table",function(g){g._select.blurable=e})});D("select.info()",function(e){return b===H?this.context[0]._select.info:this.iterator("table",function(g){g._select.info=e})});D("select.items()",function(e){return e===H?this.context[0]._select.items:this.iterator("table",function(g){g._select.items=e;G(new I.Api(g),"selectItems",[e])})});D("select.style()",function(e){return e===H?this.context[0]._select.style:this.iterator("table",function(i){i._select.style=e;if(!i._select_init){var g=new I.Api(i);i.aoRowCreatedCallback.push({fn:function(j,m,n){m=i.aoData[n];m._select_selected&&J(j).addClass(i._select.className);j=0;for(n=i.aoColumns.length;j<n;j++){(i.aoColumns[j]._select_selected||m._selected_cells&&m._selected_cells[j])&&J(m.anCells[j]).addClass(i._select.className)}},sName:"select-deferRender"});g.on("preXhr.dt.dtSelect",function(){var m=g.rows({selected:!0}).ids(!0).filter(function(n){return n!==H}),j=g.cells({selected:!0}).eq(0).map(function(o){var n=g.row(o.row).id(!0);return n?{row:n,column:o.column}:H}).filter(function(n){return n!==H});g.one("draw.dt.dtSelect",function(){g.rows(m).select();j.any()&&j.each(function(n){g.cells(n.row,n.column).select()})})});g.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt info.dt",function(){b(g)});g.on("destroy.dtSelect",function(){w(g);g.off(".dtSelect")})}var h=new I.Api(i);w(h);"api"!==e&&c(h);G(new I.Api(i),"selectStyle",[e])})});D("select.selector()",function(e){return e===H?this.context[0]._select.selector:this.iterator("table",function(g){w(new I.Api(g));g._select.selector=e;"api"!==g._select.style&&c(new I.Api(g))})});C("rows().select()","row().select()",function(e){var g=this;if(!1===e){return this.deselect()}this.iterator("row",function(h,i){B(h);h.aoData[i]._select_selected=!0;J(h.aoData[i].nTr).addClass(h._select.className)});this.iterator("table",function(h,i){G(g,"select",["row",g[i]],!0)});return this});C("columns().select()","column().select()",function(e){var g=this;if(!1===e){return this.deselect()}this.iterator("column",function(h,j){B(h);h.aoColumns[j]._select_selected=!0;var i=(new I.Api(h)).column(j);J(i.header()).addClass(h._select.className);J(i.footer()).addClass(h._select.className);i.nodes().to$().addClass(h._select.className)});this.iterator("table",function(h,i){G(g,"select",["column",g[i]],!0)});return this});C("cells().select()","cell().select()",function(e){var g=this;if(!1===e){return this.deselect()}this.iterator("cell",function(h,j,i){B(h);j=h.aoData[j];j._selected_cells===H&&(j._selected_cells=[]);j._selected_cells[i]=!0;j.anCells&&J(j.anCells[i]).addClass(h._select.className)});this.iterator("table",function(h,i){G(g,"select",["cell",g[i]],!0)});return this});C("rows().deselect()","row().deselect()",function(){var e=this;this.iterator("row",function(h,g){h.aoData[g]._select_selected=!1;J(h.aoData[g].nTr).removeClass(h._select.className)});this.iterator("table",function(h,g){G(e,"deselect",["row",e[g]],!0)});return this});C("columns().deselect()","column().deselect()",function(){var e=this;this.iterator("column",function(j,g){j.aoColumns[g]._select_selected=!1;var h=new I.Api(j),i=h.column(g);J(i.header()).removeClass(j._select.className);J(i.footer()).removeClass(j._select.className);h.cells(null,g).indexes().each(function(m){var n=j.aoData[m.row],o=n._selected_cells;n.anCells&&(!o||!o[m.column])&&J(n.anCells[m.column]).removeClass(j._select.className)})});this.iterator("table",function(h,g){G(e,"deselect",["column",e[g]],!0)});return this});C("cells().deselect()","cell().deselect()",function(){var e=this;this.iterator("cell",function(i,g,h){g=i.aoData[g];g._selected_cells[h]=!1;g.anCells&&!i.aoColumns[h]._select_selected&&J(g.anCells[h]).removeClass(i._select.className)});this.iterator("table",function(h,g){G(e,"deselect",["cell",e[g]],!0)});return this});var f=0;J.extend(I.ext.buttons,{selected:{text:A("selected","Selected"),className:"buttons-selected",init:function(g,i,e){var h=this;e._eventNamespace=".select"+f++;g.on(k(e),function(){var j=h.rows({selected:!0}).any()||h.columns({selected:!0}).any()||h.cells({selected:!0}).any();h.enable(j)});this.disable()},destroy:function(g,h,e){g.off(e._eventNamespace)}},selectedSingle:{text:A("selectedSingle","Selected single"),className:"buttons-selected-single",init:function(g,i,e){var h=this;e._eventNamespace=".select"+f++;g.on(k(e),function(){var j=g.rows({selected:!0}).flatten().length+g.columns({selected:!0}).flatten().length+g.cells({selected:!0}).flatten().length;h.enable(1===j)});this.disable()},destroy:function(g,h,e){g.off(e._eventNamespace)}},selectAll:{text:A("selectAll","Select all"),className:"buttons-select-all",action:function(){this[this.select.items()+"s"]().select()}},selectNone:{text:A("selectNone","Deselect all"),className:"buttons-select-none",action:function(){B(this.settings()[0],!0)},init:function(g,i,e){var h=this;e._eventNamespace=".select"+f++;g.on(k(e),function(){var j=g.rows({selected:!0}).flatten().length+g.columns({selected:!0}).flatten().length+g.cells({selected:!0}).flatten().length;h.enable(0<j)});this.disable()},destroy:function(g,h,e){g.off(e._eventNamespace)}}});J.each(["Row","Column","Cell"],function(g,h){var e=h.toLowerCase();I.ext.buttons["select"+h+"s"]={text:A("select"+h+"s","Select "+e+"s"),className:"buttons-select-"+e+"s",action:function(){this.select.items(e)},init:function(i){var j=this;i.on("selectItems.dt.DT",function(m,o,n){j.active(n===e)})}}});J(E).on("preInit.dt.dtSelect",function(e,g){"dt"===e.namespace&&I.select.init(new I.Api(g))});return I.select});