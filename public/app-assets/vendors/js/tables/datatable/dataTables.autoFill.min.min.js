/*!
 AutoFill 2.2.2
 Â©2008-2017 SpryMedia Ltd - datatables.net/license
*/
(function(a){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"===typeof exports?module.exports=function(b,c){b||(b=window);if(!c||!c.fn.dataTable){c=require("datatables.net")(b,c).$}return a(c,b,b.document)}:a(jQuery,window,document)})(function(n,b,f,g){var c=n.fn.dataTable,h=0,d=function(i,e){if(!c.versionCheck||!c.versionCheck("1.10.8")){throw"Warning: AutoFill requires DataTables 1.10.8 or greater"}this.c=n.extend(!0,{},c.defaults.autoFill,d.defaults,e);this.s={dt:new c.Api(i),namespace:".autoFill"+h++,scroll:{},scrollInterval:null,handle:{height:0,width:0},enabled:!1};this.dom={handle:n('<div class="dt-autofill-handle"/>'),select:{top:n('<div class="dt-autofill-select top"/>'),right:n('<div class="dt-autofill-select right"/>'),bottom:n('<div class="dt-autofill-select bottom"/>'),left:n('<div class="dt-autofill-select left"/>')},background:n('<div class="dt-autofill-background"/>'),list:n('<div class="dt-autofill-list">'+this.s.dt.i18n("autoFill.info","")+"<ul/></div>"),dtScroll:null,offsetParent:null};this._constructor()};n.extend(d.prototype,{enabled:function(){return this.s.enabled},enable:function(i){var e=this;if(!1===i){return this.disable()}this.s.enabled=!0;this._focusListener();this.dom.handle.on("mousedown",function(j){e._mousedown(j);return !1});return this},disable:function(){this.s.enabled=!1;this._focusListenerRemove();return this},_constructor:function(){var j=this,e=this.s.dt,i=n("div.dataTables_scrollBody",this.s.dt.table().container());e.settings()[0].autoFill=this;i.length&&(this.dom.dtScroll=i,"static"===i.css("position")&&i.css("position","relative"));!1!==this.c.enable&&this.enable();e.on("destroy.autoFill",function(){j._focusListenerRemove()})},_attach:function(l){var e=this.s.dt,i=e.cell(l).index(),k=this.dom.handle,j=this.s.handle;if(!i||-1===e.columns(this.c.columns).indexes().indexOf(i.column)){this._detach()}else{this.dom.offsetParent||(this.dom.offsetParent=n(e.table().node()).offsetParent());if(!j.height||!j.width){k.appendTo("body"),j.height=k.outerHeight(),j.width=k.outerWidth()}e=this._getPosition(l,this.dom.offsetParent);this.dom.attachedTo=l;k.css({top:e.top+l.offsetHeight-j.height,left:e.left+l.offsetWidth-j.width}).appendTo(this.dom.offsetParent)}},_actionSelector:function(o){var e=this,i=this.s.dt,m=d.actions,l=[];n.each(m,function(p,q){q.available(i,o)&&l.push(p)});if(1===l.length&&!1===this.c.alwaysAsk){var j=m[l[0]].execute(i,o);this._update(j,o)}else{var k=this.dom.list.children("ul").empty();l.push("cancel");n.each(l,function(q,p){k.append(n("<li/>").append('<div class="dt-autofill-question">'+m[p].option(i,o)+"<div>").append(n('<div class="dt-autofill-button">').append(n('<button class="'+d.classes.btn+'">'+i.i18n("autoFill.button","&gt;")+"</button>").on("click",function(){var r=m[p].execute(i,o,n(this).closest("li"));e._update(r,o);e.dom.background.remove();e.dom.list.remove()}))))});this.dom.background.appendTo("body");this.dom.list.appendTo("body");this.dom.list.css("margin-top",-1*(this.dom.list.outerHeight()/2))}},_detach:function(){this.dom.attachedTo=null;this.dom.handle.detach()},_drawSelection:function(o){var e=this.s.dt,i=this.s.start,m=n(this.dom.start),l=n(o),j={row:e.rows({page:"current"}).nodes().indexOf(l.parent()[0]),column:l.index()},o=e.column.index("toData",j.column);if(e.cell(l).any()&&-1!==e.columns(this.c.columns).indexes().indexOf(o)){this.s.end=j;var k,e=i.row<j.row?m:l;k=i.row<j.row?l:m;o=i.column<j.column?m:l;m=i.column<j.column?l:m;e=this._getPosition(e).top;o=this._getPosition(o).left;i=this._getPosition(k).top+k.outerHeight()-e;m=this._getPosition(m).left+m.outerWidth()-o;l=this.dom.select;l.top.css({top:e,left:o,width:m});l.left.css({top:e,left:o,height:i});l.bottom.css({top:e+i,left:o,width:m});l.right.css({top:e,left:o+m,height:i})}},_editor:function(E){var F=this.s.dt,G=this.c.editor;if(G){for(var D={},B=[],C=G.fields(),A=0,z=E.length;A<z;A++){for(var y=0,w=E[A].length;y<w;y++){var t=E[A][y],x=F.settings()[0].aoColumns[t.index.column],u=x.editField;if(u===g){for(var x=x.mData,v=0,s=C.length;v<s;v++){var q=G.field(C[v]);if(q.dataSrc()===x){u=q.name();break}}}if(!u){throw"Could not automatically determine field data. Please see https://datatables.net/tn/11"}D[u]||(D[u]={});x=F.row(t.index.row).id();D[u][x]=t.set;B.push(t.index)}}G.bubble(B,!1).multiSet(D).submit()}},_emitEvent:function(i,e){this.s.dt.iterator("table",function(j){n(j.nTable).triggerHandler(i+".dt",e)})},_focusListener:function(){var k=this,e=this.s.dt,i=this.s.namespace,j=null!==this.c.focus?this.c.focus:e.init().keys||e.settings()[0].keytable?"focus":"hover";if("focus"===j){e.on("key-focus.autoFill",function(l,m,o){k._attach(o.node())}).on("key-blur.autoFill",function(){k._detach()})}else{if("click"===j){n(e.table().body()).on("click"+i,"td, th",function(){k._attach(this)}),n(f.body).on("click"+i,function(l){n(l.target).parents().filter(e.table().body()).length||k._detach()})}else{n(e.table().body()).on("mouseenter"+i,"td, th",function(){k._attach(this)}).on("mouseleave"+i,function(l){n(l.relatedTarget).hasClass("dt-autofill-handle")||k._detach()})}}},_focusListenerRemove:function(){var e=this.s.dt;e.off(".autoFill");n(e.table().body()).off(this.s.namespace);n(f.body).off(this.s.namespace)},_getPosition:function(o,e){var i=n(o),m,l,j=0,k=0;e||(e=n(this.s.dt.table().node()).offsetParent());do{l=i.position();m=i.offsetParent();j+=l.top+m.scrollTop();k+=l.left+m.scrollLeft();if("body"===i.get(0).nodeName.toLowerCase()){break}i=m}while(m.get(0)!==e.get(0));return{top:j,left:k}},_mousedown:function(k){var e=this,i=this.s.dt;this.dom.start=this.dom.attachedTo;this.s.start={row:i.rows({page:"current"}).nodes().indexOf(n(this.dom.start).parent()[0]),column:n(this.dom.start).index()};n(f.body).on("mousemove.autoFill",function(l){e._mousemove(l)}).on("mouseup.autoFill",function(l){e._mouseup(l)});var j=this.dom.select,i=n(i.table().node()).offsetParent();j.top.appendTo(i);j.left.appendTo(i);j.right.appendTo(i);j.bottom.appendTo(i);this._drawSelection(this.dom.start,k);this.dom.handle.css("display","none");k=this.dom.dtScroll;this.s.scroll={windowHeight:n(b).height(),windowWidth:n(b).width(),dtTop:k?k.offset().top:null,dtLeft:k?k.offset().left:null,dtHeight:k?k.outerHeight():null,dtWidth:k?k.outerWidth():null}},_mousemove:function(i){var e=i.target.nodeName.toLowerCase();"td"!==e&&"th"!==e||(this._drawSelection(i.target,i),this._shiftScroll(i))},_mouseup:function(){n(f.body).off(".autoFill");var o=this.s.dt,e=this.dom.select;e.top.remove();e.left.remove();e.right.remove();e.bottom.remove();this.dom.handle.css("display","block");var e=this.s.start,i=this.s.end;if(!(e.row===i.row&&e.column===i.column)){for(var m=this._range(e.row,i.row),e=this._range(e.column,i.column),i=[],l=o.settings()[0],j=l.aoColumns,k=0;k<m.length;k++){i.push(n.map(e,function(q){var q=o.cell(":eq("+m[k]+")",q+":visible",{page:"current"}),p=q.data(),s=q.index(),r=j[s.column].editField;r!==g&&(p=l.oApi._fnGetObjectDataFn(r)(o.row(s.row).data()));return{cell:q,data:p,label:q.data(),index:s}}))}this._actionSelector(i);clearInterval(this.s.scrollInterval);this.s.scrollInterval=null}},_range:function(k,e){var i=[],j;if(k<=e){for(j=k;j<=e;j++){i.push(j)}}else{for(j=k;j>=e;j--){i.push(j)}}return i},_shiftScroll:function(t){var u=this,v=this.s.scroll,s=!1,q=t.pageY-f.body.scrollTop,r=t.pageX-f.body.scrollLeft,p,o,m,i;65>q?p=-5:q>v.windowHeight-65&&(p=5);65>r?o=-5:r>v.windowWidth-65&&(o=5);null!==v.dtTop&&t.pageY<v.dtTop+65?m=-5:null!==v.dtTop&&t.pageY>v.dtTop+v.dtHeight-65&&(m=5);null!==v.dtLeft&&t.pageX<v.dtLeft+65?i=-5:null!==v.dtLeft&&t.pageX>v.dtLeft+v.dtWidth-65&&(i=5);p||o||m||i?(v.windowVert=p,v.windowHoriz=o,v.dtVert=m,v.dtHoriz=i,s=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null);!this.s.scrollInterval&&s&&(this.s.scrollInterval=setInterval(function(){if(v.windowVert){f.body.scrollTop=f.body.scrollTop+v.windowVert}if(v.windowHoriz){f.body.scrollLeft=f.body.scrollLeft+v.windowHoriz}if(v.dtVert||v.dtHoriz){var e=u.dom.dtScroll[0];if(v.dtVert){e.scrollTop=e.scrollTop+v.dtVert}if(v.dtHoriz){e.scrollLeft=e.scrollLeft+v.dtHoriz}}},20))},_update:function(r,j){if(!1!==r){var k=this.s.dt,q;this._emitEvent("preAutoFill",[k,j]);this._editor(j);if(null!==this.c.update?this.c.update:!this.c.editor){for(var o=0,p=j.length;o<p;o++){for(var m=0,l=j[o].length;m<l;m++){q=j[o][m],q.cell.data(q.set)}}k.draw(!1)}this._emitEvent("autoFill",[k,j])}}});d.actions={increment:{available:function(i,e){return n.isNumeric(e[0][0].label)},option:function(e){return e.i18n("autoFill.increment",'Increment / decrement each cell by: <input type="number" value="1">')},execute:function(o,e,i){for(var o=1*e[0][0].data,i=1*n("input",i).val(),m=0,l=e.length;m<l;m++){for(var j=0,k=e[m].length;j<k;j++){e[m][j].set=o,o+=i}}}},fill:{available:function(){return !0},option:function(i,e){return i.i18n("autoFill.fill","Fill all cells with <i>"+e[0][0].label+"</i>")},execute:function(p,i){for(var j=i[0][0].data,o=0,m=i.length;o<m;o++){for(var k=0,l=i[o].length;k<l;k++){i[o][k].set=j}}}},fillHorizontal:{available:function(i,e){return 1<e.length&&1<e[0].length},option:function(e){return e.i18n("autoFill.fillHorizontal","Fill cells horizontally")},execute:function(o,i){for(var j=0,m=i.length;j<m;j++){for(var l=0,k=i[j].length;l<k;l++){i[j][l].set=i[j][0].data}}}},fillVertical:{available:function(i,e){return 1<e.length&&1<e[0].length},option:function(e){return e.i18n("autoFill.fillVertical","Fill cells vertically")},execute:function(o,i){for(var j=0,m=i.length;j<m;j++){for(var l=0,k=i[j].length;l<k;l++){i[j][l].set=i[0][l].data}}}},cancel:{available:function(){return !1},option:function(e){return e.i18n("autoFill.cancel","Cancel")},execute:function(){return !1}}};d.version="2.2.2";d.defaults={alwaysAsk:!1,focus:null,columns:"",enable:!0,update:null,editor:null};d.classes={btn:"btn"};var a=n.fn.dataTable.Api;a.register("autoFill()",function(){return this});a.register("autoFill().enabled()",function(){var e=this.context[0];return e.autoFill?e.autoFill.enabled():!1});a.register("autoFill().enable()",function(e){return this.iterator("table",function(i){i.autoFill&&i.autoFill.enable(e)})});a.register("autoFill().disable()",function(){return this.iterator("table",function(e){e.autoFill&&e.autoFill.disable()})});n(f).on("preInit.dt.autofill",function(k,e){if("dt"===k.namespace){var i=e.oInit.autoFill,j=c.defaults.autoFill;if(i||j){j=n.extend({},i,j),!1!==i&&new d(e,j)}}});c.AutoFill=d;return c.AutoFill=d});