/*!
 Buttons for DataTables 1.4.2
 Â©2016-2017 SpryMedia Ltd - datatables.net/license
*/
(function(a){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"===typeof exports?module.exports=function(c,b){c||(c=window);if(!b||!b.fn.dataTable){b=require("datatables.net")(c,b).$}return a(b,c,c.document)}:a(jQuery,window,document)})(function(k,c,b,f){var h=k.fn.dataTable,r=0,p=0,g=h.ext.buttons,e=function(i,d){"undefined"===typeof d&&(d={});!0===d&&(d={});k.isArray(d)&&(d={buttons:d});this.c=k.extend(!0,{},e.defaults,d);d.buttons&&(this.c.buttons=d.buttons);this.s={dt:new h.Api(i),buttons:[],listenKeys:"",namespace:"dtb"+r++};this.dom={container:k("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)};this._constructor()};k.extend(e.prototype,{action:function(i,d){var j=this._nodeToButton(i);if(d===f){return j.conf.action}j.conf.action=d;return this},active:function(i,d){var l=this._nodeToButton(i),j=this.c.dom.button.active,l=k(l.node);if(d===f){return l.hasClass(j)}l.toggleClass(j,d===f?!0:d);return this},add:function(j,i){var o=this.s.buttons;if("string"===typeof i){for(var m=i.split("-"),o=this.s,n=0,l=m.length-1;n<l;n++){o=o.buttons[1*m[n]]}o=o.buttons;i=1*m[m.length-1]}this._expandButton(o,j,!1,i);this._draw();return this},container:function(){return this.dom.container},disable:function(d){d=this._nodeToButton(d);k(d.node).addClass(this.c.dom.button.disabled);return this},destroy:function(){k("body").off("keyup."+this.s.namespace);var i=this.s.buttons.slice(),d,j;d=0;for(j=i.length;d<j;d++){this.remove(i[d].node)}this.dom.container.remove();i=this.s.dt.settings()[0];d=0;for(j=i.length;d<j;d++){if(i.inst===this){i.splice(d,1);break}}return this},enable:function(i,d){if(!1===d){return this.disable(i)}var j=this._nodeToButton(i);k(j.node).removeClass(this.c.dom.button.disabled);return this},name:function(){return this.c.name},node:function(d){d=this._nodeToButton(d);return k(d.node)},processing:function(i,d){var j=this._nodeToButton(i);if(d===f){return k(j.node).hasClass("processing")}k(j.node).toggleClass("processing",d);return this},remove:function(i){var d=this._nodeToButton(i),m=this._nodeToHost(i),l=this.s.dt;if(d.buttons.length){for(var j=d.buttons.length-1;0<=j;j--){this.remove(d.buttons[j].node)}}d.conf.destroy&&d.conf.destroy.call(l.button(i),l,k(i),d.conf);this._removeKey(d.conf);k(d.node).remove();i=k.inArray(d,m);m.splice(i,1);return this},text:function(i,d){var o=this._nodeToButton(i),n=this.c.dom.collection.buttonLiner,n=o.inCollection&&n&&n.tag?n.tag:this.c.dom.buttonLiner.tag,l=this.s.dt,j=k(o.node),m=function(q){return"function"===typeof q?q(l,j,o.conf):q};if(d===f){return m(o.conf.text)}o.conf.text=d;n?j.children(n).html(m(d)):j.html(m(d));return this},_constructor:function(){var i=this,d=this.s.dt,m=d.settings()[0],l=this.c.buttons;m._buttons||(m._buttons=[]);m._buttons.push({inst:this,name:this.c.name});for(var m=0,j=l.length;m<j;m++){this.add(l[m])}d.on("destroy",function(){i.destroy()});k("body").on("keyup."+this.s.namespace,function(n){if(!b.activeElement||b.activeElement===b.body){var o=String.fromCharCode(n.keyCode).toLowerCase();i.s.listenKeys.toLowerCase().indexOf(o)!==-1&&i._keypress(o,n)}})},_addKey:function(d){d.key&&(this.s.listenKeys+=k.isPlainObject(d.key)?d.key.key:d.key)},_draw:function(i,d){i||(i=this.dom.container,d=this.s.buttons);i.children().detach();for(var l=0,j=d.length;l<j;l++){i.append(d[l].inserter),i.append(" "),d[l].buttons&&d[l].buttons.length&&this._draw(d[l].collection,d[l].buttons)}},_expandButton:function(u,s,q,o){for(var m=this.s.dt,l=0,s=!k.isArray(s)?[s]:s,n=0,d=s.length;n<d;n++){var j=this._resolveExtends(s[n]);if(j){if(k.isArray(j)){this._expandButton(u,j,q,o)}else{var i=this._buildButton(j,q);if(i){o!==f?(u.splice(o,0,i),o++):u.push(i);if(i.conf.buttons){var v=this.c.dom.collection;i.collection=k("<"+v.tag+"/>").addClass(v.className).attr("role","menu");i.conf._collection=i.collection;this._expandButton(i.buttons,i.conf.buttons,!0,o)}j.init&&j.init.call(m.button(i.node),m,k(i.node),j);l++}}}}},_buildButton:function(s,q){var o=this.c.dom.button,n=this.c.dom.buttonLiner,l=this.c.dom.collection,j=this.s.dt,m=function(u){return"function"===typeof u?u(j,i,s):u};q&&l.button&&(o=l.button);q&&l.buttonLiner&&(n=l.buttonLiner);if(s.available&&!s.available(j,s)){return !1}var d=function(v,u,x,w){w.action.call(u.button(x),v,u,x,w);k(u.table().node()).triggerHandler("buttons-action.dt",[u.button(x),u,x,w])},i=k("<"+o.tag+"/>").addClass(o.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",function(u){u.preventDefault();!i.hasClass(o.disabled)&&s.action&&d(u,j,i,s);i.blur()}).on("keyup.dtb",function(u){u.keyCode===13&&!i.hasClass(o.disabled)&&s.action&&d(u,j,i,s)});"a"===o.tag.toLowerCase()&&i.attr("href","#");n.tag?(l=k("<"+n.tag+"/>").html(m(s.text)).addClass(n.className),"a"===n.tag.toLowerCase()&&l.attr("href","#"),i.append(l)):i.html(m(s.text));!1===s.enabled&&i.addClass(o.disabled);s.className&&i.addClass(s.className);s.titleAttr&&i.attr("title",m(s.titleAttr));s.namespace||(s.namespace=".dt-button-"+p++);n=(n=this.c.dom.buttonContainer)&&n.tag?k("<"+n.tag+"/>").addClass(n.className).append(i):i;this._addKey(s);return{conf:s,node:i.get(0),inserter:n,buttons:[],inCollection:q,collection:null}},_nodeToButton:function(j,i){i||(i=this.s.buttons);for(var n=0,l=i.length;n<l;n++){if(i[n].node===j){return i[n]}if(i[n].buttons.length){var m=this._nodeToButton(j,i[n].buttons);if(m){return m}}}},_nodeToHost:function(j,i){i||(i=this.s.buttons);for(var n=0,l=i.length;n<l;n++){if(i[n].node===j){return i}if(i[n].buttons.length){var m=this._nodeToHost(j,i[n].buttons);if(m){return m}}}},_keypress:function(i,d){var j=function(q){for(var n=0,l=q.length;n<l;n++){var o=q[n].conf,m=q[n].node;if(o.key){if(o.key===i){k(m).click()}else{if(k.isPlainObject(o.key)&&o.key.key===i&&(!o.key.shiftKey||d.shiftKey)){if(!o.key.altKey||d.altKey){if(!o.key.ctrlKey||d.ctrlKey){(!o.key.metaKey||d.metaKey)&&k(m).click()}}}}}q[n].buttons.length&&j(q[n].buttons)}};j(this.s.buttons)},_removeKey:function(i){if(i.key){var d=k.isPlainObject(i.key)?i.key.key:i.key,i=this.s.listenKeys.split(""),d=k.inArray(d,i);i.splice(d,1);this.s.listenKeys=i.join("")}},_resolveExtends:function(i){for(var d=this.s.dt,o,n,l=function(s){for(var q=0;!k.isPlainObject(s)&&!k.isArray(s);){if(s===f){return}if("function"===typeof s){if(s=s(d,i),!s){return !1}}else{if("string"===typeof s){if(!g[s]){throw"Unknown button type: "+s}s=g[s]}}q++;if(30<q){throw"Buttons: Too many iterations"}}return k.isArray(s)?s:k.extend({},s)},i=l(i);i&&i.extend;){if(!g[i.extend]){throw"Cannot extend unknown button type: "+i.extend}var j=l(g[i.extend]);if(k.isArray(j)){return j}if(!j){return !1}o=j.className;i=k.extend({},j,i);o&&i.className!==o&&(i.className=o+" "+i.className);var m=i.postfixButtons;if(m){i.buttons||(i.buttons=[]);o=0;for(n=m.length;o<n;o++){i.buttons.push(m[o])}i.postfixButtons=null}if(m=i.prefixButtons){i.buttons||(i.buttons=[]);o=0;for(n=m.length;o<n;o++){i.buttons.splice(o,0,m[o])}i.prefixButtons=null}i.extend=j.extend}return i}});e.background=function(i,d,j){j===f&&(j=400);i?k("<div/>").addClass(d).css("display","none").appendTo("body").fadeIn(j):k("body > div."+d).fadeOut(j,function(){k(this).removeClass(d).remove()})};e.instanceSelector=function(i,d){if(!i){return k.map(d,function(n){return n.inst})}var m=[],l=k.map(d,function(n){return n.name}),j=function(n){if(k.isArray(n)){for(var q=0,o=n.length;q<o;q++){j(n[q])}}else{"string"===typeof n?-1!==n.indexOf(",")?j(n.split(",")):(n=k.inArray(k.trim(n),l),-1!==n&&m.push(d[n].inst)):"number"===typeof n&&m.push(d[n].inst)}};j(i);return m};e.buttonSelector=function(i,d){for(var o=[],n=function(s,q,A){for(var x,v,w=0,u=q.length;w<u;w++){if(x=q[w]){v=A!==f?A+w:w+"",s.push({node:x.node,name:x.conf.name,idx:v}),x.buttons&&n(s,x.buttons,v+"-")}}},l=function(s,q){var x,w,v=[];n(v,q.s.buttons);x=k.map(v,function(A){return A.node});if(k.isArray(s)||s instanceof k){x=0;for(w=s.length;x<w;x++){l(s[x],q)}}else{if(null===s||s===f||"*"===s){x=0;for(w=v.length;x<w;x++){o.push({inst:q,node:v[x].node})}}else{if("number"===typeof s){o.push({inst:q,node:q.s.buttons[s].node})}else{if("string"===typeof s){if(-1!==s.indexOf(",")){v=s.split(",");x=0;for(w=v.length;x<w;x++){l(k.trim(v[x]),q)}}else{if(s.match(/^\d+(\-\d+)*$/)){x=k.map(v,function(A){return A.idx}),o.push({inst:q,node:v[k.inArray(s,x)].node})}else{if(-1!==s.indexOf(":name")){var u=s.replace(":name","");x=0;for(w=v.length;x<w;x++){v[x].name===u&&o.push({inst:q,node:v[x].node})}}else{k(x).filter(s).each(function(){o.push({inst:q,node:this})})}}}}else{"object"===typeof s&&s.nodeName&&(v=k.inArray(s,x),-1!==v&&o.push({inst:q,node:x[v]}))}}}}},j=0,m=i.length;j<m;j++){l(d,i[j])}return o};e.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}};e.version="1.4.2";k.extend(g,{collection:{text:function(d){return d.i18n("buttons.collection","Collection")},className:"buttons-collection",action:function(i,d,o,n){var i=o.offset(),l=k(d.table().container()),j=!1;k("div.dt-button-background").length&&(j=k(".dt-button-collection").offset(),k("body").trigger("click.dtb-collection"));n._collection.addClass(n.collectionLayout).css("display","none").appendTo("body").fadeIn(n.fade);var m=n._collection.css("position");j&&"absolute"===m?n._collection.css({top:j.top,left:j.left}):"absolute"===m?(n._collection.css({top:i.top+o.outerHeight(),left:i.left}),j=l.offset().top+l.height(),o=i.top+o.outerHeight()+n._collection.outerHeight()-j,j=i.top-n._collection.outerHeight(),j=l.offset().top-j,o>j&&n._collection.css("top",i.top-n._collection.outerHeight()-5),o=i.left+n._collection.outerWidth(),l=l.offset().left+l.width(),o>l&&n._collection.css("left",i.left-(o-l))):(i=n._collection.height()/2,i>k(c).height()/2&&(i=k(c).height()/2),n._collection.css("marginTop",-1*i));n.background&&e.background(!0,n.backgroundClassName,n.fade);setTimeout(function(){k("div.dt-button-background").on("click.dtb-collection",function(){});k("body").on("click.dtb-collection",function(q){var s=k.fn.addBack?"addBack":"andSelf";if(!k(q.target).parents()[s]().filter(n._collection).length){n._collection.fadeOut(n.fade,function(){n._collection.detach()});k("div.dt-button-background").off("click.dtb-collection");e.background(false,n.backgroundClassName,n.fade);k("body").off("click.dtb-collection");d.off("buttons-action.b-internal")}})},10);if(n.autoClose){d.on("buttons-action.b-internal",function(){k("div.dt-button-background").click()})}},background:!0,collectionLayout:"",backgroundClassName:"dt-button-background",autoClose:!1,fade:400},copy:function(i,d){if(g.copyHtml5){return"copyHtml5"}if(g.copyFlash&&g.copyFlash.available(i,d)){return"copyFlash"}},csv:function(i,d){if(g.csvHtml5&&g.csvHtml5.available(i,d)){return"csvHtml5"}if(g.csvFlash&&g.csvFlash.available(i,d)){return"csvFlash"}},excel:function(i,d){if(g.excelHtml5&&g.excelHtml5.available(i,d)){return"excelHtml5"}if(g.excelFlash&&g.excelFlash.available(i,d)){return"excelFlash"}},pdf:function(i,d){if(g.pdfHtml5&&g.pdfHtml5.available(i,d)){return"pdfHtml5"}if(g.pdfFlash&&g.pdfFlash.available(i,d)){return"pdfFlash"}},pageLength:function(i){var i=i.settings()[0].aLengthMenu,d=k.isArray(i[0])?i[0]:i,l=k.isArray(i[0])?i[1]:i,j=function(m){return m.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},m.page.len())};return{extend:"collection",text:j,className:"buttons-page-length",autoClose:!0,buttons:k.map(d,function(n,m){return{text:l[m],className:"button-page-length",action:function(o,q){q.page.len(n).draw()},init:function(o,u,s){var q=this,u=function(){q.active(o.page.len()===n)};o.on("length.dt"+s.namespace,u);u()},destroy:function(q,o,s){q.off("length.dt"+s.namespace)}}}),init:function(n,m,q){var o=this;n.on("length.dt"+q.namespace,function(){o.text(j(n))})},destroy:function(n,m,o){n.off("length.dt"+o.namespace)}}}});h.Api.register("buttons()",function(i,d){d===f&&(d=i,i=f);this.selector.buttonGroup=i;var j=this.iterator(!0,"table",function(l){if(l._buttons){return e.buttonSelector(e.instanceSelector(i,l._buttons),d)}},!0);j._groupSelector=i;return j});h.Api.register("button()",function(i,d){var j=this.buttons(i,d);1<j.length&&j.splice(1,j.length);return j});h.Api.registerPlural("buttons().active()","button().active()",function(d){return d===f?this.map(function(i){return i.inst.active(i.node)}):this.each(function(i){i.inst.active(i.node,d)})});h.Api.registerPlural("buttons().action()","button().action()",function(d){return d===f?this.map(function(i){return i.inst.action(i.node)}):this.each(function(i){i.inst.action(i.node,d)})});h.Api.register(["buttons().enable()","button().enable()"],function(d){return this.each(function(i){i.inst.enable(i.node,d)})});h.Api.register(["buttons().disable()","button().disable()"],function(){return this.each(function(d){d.inst.disable(d.node)})});h.Api.registerPlural("buttons().nodes()","button().node()",function(){var d=k();k(this.each(function(i){d=d.add(i.inst.node(i.node))}));return d});h.Api.registerPlural("buttons().processing()","button().processing()",function(d){return d===f?this.map(function(i){return i.inst.processing(i.node)}):this.each(function(i){i.inst.processing(i.node,d)})});h.Api.registerPlural("buttons().text()","button().text()",function(d){return d===f?this.map(function(i){return i.inst.text(i.node)}):this.each(function(i){i.inst.text(i.node,d)})});h.Api.registerPlural("buttons().trigger()","button().trigger()",function(){return this.each(function(d){d.inst.node(d.node).trigger("click")})});h.Api.registerPlural("buttons().containers()","buttons().container()",function(){var i=k(),d=this._groupSelector;this.iterator(!0,"table",function(m){if(m._buttons){for(var m=e.instanceSelector(d,m._buttons),l=0,j=m.length;l<j;l++){i=i.add(m[l].container())}}});return i});h.Api.register("button().add()",function(i,d){var j=this.context;j.length&&(j=e.instanceSelector(this._groupSelector,j[0]._buttons),j.length&&j[0].add(d,i));return this.button(this._groupSelector,i)});h.Api.register("buttons().destroy()",function(){this.pluck("inst").unique().each(function(d){d.destroy()});return this});h.Api.registerPlural("buttons().remove()","buttons().remove()",function(){this.each(function(d){d.inst.remove(d.node)});return this});var a;h.Api.register("buttons.info()",function(i,d,l){var j=this;if(!1===i){return k("#datatables_buttons_info").fadeOut(function(){k(this).remove()}),clearTimeout(a),a=null,this}a&&clearTimeout(a);k("#datatables_buttons_info").length&&k("#datatables_buttons_info").remove();k('<div id="datatables_buttons_info" class="dt-button-info"/>').html(i?"<h2>"+i+"</h2>":"").append(k("<div/>")["string"===typeof d?"html":"append"](d)).css("display","none").appendTo("body").fadeIn();l!==f&&0!==l&&(a=setTimeout(function(){j.buttons.info(!1)},l));return this});h.Api.register("buttons.exportData()",function(G){if(this.context.length){for(var F=new h.Api(this.context[0]),E=k.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,decodeEntities:!0,trim:!0,format:{header:function(j){return D(j)},footer:function(j){return D(j)},body:function(j){return D(j)}}},G),D=function(j){if("string"!==typeof j){return j}j=j.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");E.stripHtml&&(j=j.replace(/<[^>]*>/g,""));E.trim&&(j=j.replace(/^\s+|\s+$/g,""));E.stripNewlines&&(j=j.replace(/\n/g," "));E.decodeEntities&&(y.innerHTML=j,j=y.value);return j},G=F.columns(E.columns).indexes().map(function(j){var l=F.column(j).header();return E.format.header(l.innerHTML,j,l)}).toArray(),B=F.table().footer()?F.columns(E.columns).indexes().map(function(j){var l=F.column(j).footer();return E.format.footer(l?l.innerHTML:"",j,l)}).toArray():null,A=F.rows(E.rows,E.modifier).indexes().toArray(),C=F.cells(A,E.columns),A=C.render(E.orthogonal).toArray(),C=C.nodes().toArray(),x=G.length,w=0<x?A.length/x:0,v=Array(w),u=0,s=0;s<w;s++){for(var i=Array(x),d=0;d<x;d++){i[d]=E.format.body(A[u],s,d,C[u]),u++}v[s]=i}return{header:G,footer:B,body:v}}});h.Api.register("buttons.exportInfo()",function(i){i||(i={});var d;var j=i;d="*"===j.filename&&"*"!==j.title&&j.title!==f?j.title:j.filename;"function"===typeof d&&(d=d());d===f||null===d?d=null:(-1!==d.indexOf("*")&&(d=k.trim(d.replace("*",k("title").text()))),d=d.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""),(j=z(j.extension))||(j=""),d+=j);j=z(i.title);j=null===j?null:-1!==j.indexOf("*")?j.replace("*",k("title").text()||"Exported data"):j;return{filename:d,title:j,messageTop:t(this,i.messageTop||i.message,"top"),messageBottom:t(this,i.messageBottom,"bottom")}});var z=function(d){return null===d||d===f?null:"function"===typeof d?d():d},t=function(i,d,j){d=z(d);if(null===d){return null}i=k("caption",i.table().container()).eq(0);return"*"===d?i.css("caption-side")!==j?null:i.length?i.text():"":d},y=k("<textarea/>")[0];k.fn.dataTable.Buttons=e;k.fn.DataTable.Buttons=e;k(b).on("init.dt plugin-init.dt",function(i,d){if("dt"===i.namespace){var j=d.oInit.buttons||h.defaults.buttons;j&&!d._buttons&&(new e(d,j)).container()}});h.ext.feature.push({fnInit:function(i){var i=new h.Api(i),d=i.init().buttons||h.defaults.buttons;return(new e(i,d)).container()},cFeature:"B"});return e});