$(document).ready(function(){$("#sortable2").sortable({axis:"y",handle:".handle",dragClass:"sortable-drag",dataIdAttr:"id",allowDuplicates:false,onSort:function(a){reorder()}});$('#sortable input[type="checkbox"]').on("change",function(){if($(this).is(":checked")){if($("#sortable2 #"+$(this).val()).length==0){addQuestion($(this).val())}}else{$("#sortable2 #"+$(this).val()).remove()}});$("#select_categoria").on("change",function(){$("#sortable .listados").addClass("hidden");$("#sortable #"+$(this).val()).removeClass("hidden")});$("#guardar_pregunta").on("click",function(){addNewQuestion()})});function addTitle(){$("#cloneTitle").clone().removeClass("hidden").removeAttr("id").appendTo("#sortable2");reorder()}function addQuestion(a){$("#"+a).clone().appendTo("#sortable2");$("#sortable2 #"+a+" .hidden").removeClass("hidden");$("#sortable2 #"+a+" .custom-checkbox").remove();reorder()}function addNewQuestion(){var a=$("#campo_nuevo").clone().removeAttr("id");a.find("select").each(function(b){this.selectedIndex=$("#campo_nuevo").find("select")[b].selectedIndex});$(".hidden",a).removeClass("hidden");$(".form-actions",a).remove();$("#sortable2").append(a);reorder();$("#campo_nuevo input, #campo_nuevo textarea").val("");$("#campo_nuevo select").prop("selectedIndex",0)}function deleteItem(a){let del=$(a).parent().parent().parent();$(del).remove()}function muestra(){var a=$("#sortable2").sortable("toArray");console.log(a)}function reorder(){$("#sortable2 .item").each(function(a){var b=$(this);$("input,select,textarea",b).each(function(d){var c="preguntas["+$(this).attr("data-dato")+"]["+a+"]["+$(this).attr("data-name")+"]";$(this).attr("name",c)})})};